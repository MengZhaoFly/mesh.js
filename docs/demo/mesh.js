!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.meshjs=e():t.meshjs=e()}(this,function(){return function(t){var e=this.webpackHotUpdatemeshjs;this.webpackHotUpdatemeshjs=function(t,n){!function(t,e){if(!M[t]||!b[t])return;for(var n in b[t]=!1,e)Object.prototype.hasOwnProperty.call(e,n)&&(p[n]=e[n]);0==--m&&0===y&&E()}(t,n),e&&e(t,n)};var n,r=!0,o="9a542821b25d015e1c78",i=1e4,a={},s=[],u=[];function c(t){var e=O[t];if(!e)return k;var r=function(r){return e.hot.active?(O[r]?-1===O[r].parents.indexOf(t)&&O[r].parents.push(t):(s=[t],n=r),-1===e.children.indexOf(r)&&e.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+t),s=[]),k(r)},o=function(t){return{configurable:!0,enumerable:!0,get:function(){return k[t]},set:function(e){k[t]=e}}};for(var i in k)Object.prototype.hasOwnProperty.call(k,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(r,i,o(i));return r.e=function(t){return"ready"===h&&d("prepare"),y++,k.e(t).then(e,function(t){throw e(),t});function e(){y--,"prepare"===h&&(x[t]||w(t),0===y&&0===m&&E())}},r.t=function(t,e){return 1&e&&(t=r(t)),k.t(t,-2&e)},r}function l(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==t,active:!0,accept:function(t,n){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var r=0;r<t.length;r++)e._acceptedDependencies[t[r]]=n||function(){};else e._acceptedDependencies[t]=n||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var n=0;n<t.length;n++)e._declinedDependencies[t[n]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var n=e._disposeHandlers.indexOf(t);n>=0&&e._disposeHandlers.splice(n,1)},check:S,apply:C,status:function(t){if(!t)return h;f.push(t)},addStatusHandler:function(t){f.push(t)},removeStatusHandler:function(t){var e=f.indexOf(t);e>=0&&f.splice(e,1)},data:a[t]};return n=void 0,e}var f=[],h="idle";function d(t){h=t;for(var e=0;e<f.length;e++)f[e].call(null,t)}var v,p,g,m=0,y=0,x={},b={},M={};function _(t){return+t+""===t?+t:t}function S(t){if("idle"!==h)throw new Error("check() is only allowed in idle status");return r=t,d("check"),(e=i,e=e||1e4,new Promise(function(t,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=k.p+""+o+".hot-update.json";r.open("GET",i,!0),r.timeout=e,r.send(null)}catch(t){return n(t)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)t();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var e=JSON.parse(r.responseText)}catch(t){return void n(t)}t(e)}}})).then(function(t){if(!t)return d("idle"),null;b={},x={},M=t.c,g=t.h,d("prepare");var e=new Promise(function(t,e){v={resolve:t,reject:e}});p={};return w(0),"prepare"===h&&0===y&&0===m&&E(),e});var e}function w(t){M[t]?(b[t]=!0,m++,function(t){var e=document.createElement("script");e.charset="utf-8",e.src=k.p+""+t+"."+o+".hot-update.js",document.head.appendChild(e)}(t)):x[t]=!0}function E(){d("ready");var t=v;if(v=null,t)if(r)Promise.resolve().then(function(){return C(r)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var n in p)Object.prototype.hasOwnProperty.call(p,n)&&e.push(_(n));t.resolve(e)}}function C(e){if("ready"!==h)throw new Error("apply() is only allowed in ready status");var n,r,i,u,c;function l(t){for(var e=[t],n={},r=e.map(function(t){return{chain:[t],id:t}});r.length>0;){var o=r.pop(),i=o.id,a=o.chain;if((u=O[i])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:i};if(u.hot._main)return{type:"unaccepted",chain:a,moduleId:i};for(var s=0;s<u.parents.length;s++){var c=u.parents[s],l=O[c];if(l){if(l.hot._declinedDependencies[i])return{type:"declined",chain:a.concat([c]),moduleId:i,parentId:c};-1===e.indexOf(c)&&(l.hot._acceptedDependencies[i]?(n[c]||(n[c]=[]),f(n[c],[i])):(delete n[c],e.push(c),r.push({chain:a.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:n}}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];-1===t.indexOf(r)&&t.push(r)}}e=e||{};var v={},m=[],y={},x=function(){console.warn("[HMR] unexpected require("+S.moduleId+") to disposed module")};for(var b in p)if(Object.prototype.hasOwnProperty.call(p,b)){var S;c=_(b);var w=!1,E=!1,C=!1,T="";switch((S=p[b]?l(c):{type:"disposed",moduleId:b}).chain&&(T="\nUpdate propagation: "+S.chain.join(" -> ")),S.type){case"self-declined":e.onDeclined&&e.onDeclined(S),e.ignoreDeclined||(w=new Error("Aborted because of self decline: "+S.moduleId+T));break;case"declined":e.onDeclined&&e.onDeclined(S),e.ignoreDeclined||(w=new Error("Aborted because of declined dependency: "+S.moduleId+" in "+S.parentId+T));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(S),e.ignoreUnaccepted||(w=new Error("Aborted because "+c+" is not accepted"+T));break;case"accepted":e.onAccepted&&e.onAccepted(S),E=!0;break;case"disposed":e.onDisposed&&e.onDisposed(S),C=!0;break;default:throw new Error("Unexception type "+S.type)}if(w)return d("abort"),Promise.reject(w);if(E)for(c in y[c]=p[c],f(m,S.outdatedModules),S.outdatedDependencies)Object.prototype.hasOwnProperty.call(S.outdatedDependencies,c)&&(v[c]||(v[c]=[]),f(v[c],S.outdatedDependencies[c]));C&&(f(m,[S.moduleId]),y[c]=x)}var L,A=[];for(r=0;r<m.length;r++)c=m[r],O[c]&&O[c].hot._selfAccepted&&y[c]!==x&&A.push({module:c,errorHandler:O[c].hot._selfAccepted});d("dispose"),Object.keys(M).forEach(function(t){!1===M[t]&&function(t){delete installedChunks[t]}(t)});for(var R,D,I=m.slice();I.length>0;)if(c=I.pop(),u=O[c]){var F={},U=u.hot._disposeHandlers;for(i=0;i<U.length;i++)(n=U[i])(F);for(a[c]=F,u.hot.active=!1,delete O[c],delete v[c],i=0;i<u.children.length;i++){var P=O[u.children[i]];P&&((L=P.parents.indexOf(c))>=0&&P.parents.splice(L,1))}}for(c in v)if(Object.prototype.hasOwnProperty.call(v,c)&&(u=O[c]))for(D=v[c],i=0;i<D.length;i++)R=D[i],(L=u.children.indexOf(R))>=0&&u.children.splice(L,1);for(c in d("apply"),o=g,y)Object.prototype.hasOwnProperty.call(y,c)&&(t[c]=y[c]);var q=null;for(c in v)if(Object.prototype.hasOwnProperty.call(v,c)&&(u=O[c])){D=v[c];var G=[];for(r=0;r<D.length;r++)if(R=D[r],n=u.hot._acceptedDependencies[R]){if(-1!==G.indexOf(n))continue;G.push(n)}for(r=0;r<G.length;r++){n=G[r];try{n(D)}catch(t){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:c,dependencyId:D[r],error:t}),e.ignoreErrored||q||(q=t)}}}for(r=0;r<A.length;r++){var N=A[r];c=N.module,s=[c];try{k(c)}catch(t){if("function"==typeof N.errorHandler)try{N.errorHandler(t)}catch(n){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:n,originalError:t}),e.ignoreErrored||q||(q=n),q||(q=t)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:c,error:t}),e.ignoreErrored||q||(q=t)}}return q?(d("fail"),Promise.reject(q)):(d("idle"),new Promise(function(t){t(m)}))}var O={};function k(e){if(O[e])return O[e].exports;var n=O[e]={i:e,l:!1,exports:{},hot:l(e),parents:(u=s,s=[],u),children:[]};return t[e].call(n.exports,n,n.exports,c(e)),n.l=!0,n.exports}return k.m=t,k.c=O,k.d=function(t,e,n){k.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},k.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},k.t=function(t,e){if(1&e&&(t=k(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(k.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)k.d(n,r,function(e){return t[e]}.bind(null,r));return n},k.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return k.d(e,"a",e),e},k.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},k.p="/js/",k.h=function(){return o},c(49)(k.s=49)}([function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"EPSILON",function(){return d}),n.d(r,"ARRAY_TYPE",function(){return v}),n.d(r,"RANDOM",function(){return p}),n.d(r,"setMatrixArrayType",function(){return g}),n.d(r,"toRadian",function(){return y}),n.d(r,"equals",function(){return x});var o={};n.r(o),n.d(o,"create",function(){return b}),n.d(o,"clone",function(){return M}),n.d(o,"copy",function(){return _}),n.d(o,"identity",function(){return S}),n.d(o,"fromValues",function(){return w}),n.d(o,"set",function(){return E}),n.d(o,"transpose",function(){return C}),n.d(o,"invert",function(){return O}),n.d(o,"adjoint",function(){return k}),n.d(o,"determinant",function(){return T}),n.d(o,"multiply",function(){return L}),n.d(o,"rotate",function(){return A}),n.d(o,"scale",function(){return R}),n.d(o,"fromRotation",function(){return D}),n.d(o,"fromScaling",function(){return I}),n.d(o,"str",function(){return F}),n.d(o,"frob",function(){return U}),n.d(o,"LDU",function(){return P}),n.d(o,"add",function(){return q}),n.d(o,"subtract",function(){return G}),n.d(o,"exactEquals",function(){return N}),n.d(o,"equals",function(){return B}),n.d(o,"multiplyScalar",function(){return j}),n.d(o,"multiplyScalarAndAdd",function(){return V}),n.d(o,"mul",function(){return H}),n.d(o,"sub",function(){return z});var i={};n.r(i),n.d(i,"create",function(){return W}),n.d(i,"clone",function(){return Y}),n.d(i,"copy",function(){return X}),n.d(i,"identity",function(){return Q}),n.d(i,"fromValues",function(){return Z}),n.d(i,"set",function(){return $}),n.d(i,"invert",function(){return J}),n.d(i,"determinant",function(){return K}),n.d(i,"multiply",function(){return tt}),n.d(i,"rotate",function(){return et}),n.d(i,"scale",function(){return nt}),n.d(i,"translate",function(){return rt}),n.d(i,"fromRotation",function(){return ot}),n.d(i,"fromScaling",function(){return it}),n.d(i,"fromTranslation",function(){return at}),n.d(i,"str",function(){return st}),n.d(i,"frob",function(){return ut}),n.d(i,"add",function(){return ct}),n.d(i,"subtract",function(){return lt}),n.d(i,"multiplyScalar",function(){return ft}),n.d(i,"multiplyScalarAndAdd",function(){return ht}),n.d(i,"exactEquals",function(){return dt}),n.d(i,"equals",function(){return vt}),n.d(i,"mul",function(){return pt}),n.d(i,"sub",function(){return gt});var a={};n.r(a),n.d(a,"create",function(){return mt}),n.d(a,"fromMat4",function(){return yt}),n.d(a,"clone",function(){return xt}),n.d(a,"copy",function(){return bt}),n.d(a,"fromValues",function(){return Mt}),n.d(a,"set",function(){return _t}),n.d(a,"identity",function(){return St}),n.d(a,"transpose",function(){return wt}),n.d(a,"invert",function(){return Et}),n.d(a,"adjoint",function(){return Ct}),n.d(a,"determinant",function(){return Ot}),n.d(a,"multiply",function(){return kt}),n.d(a,"translate",function(){return Tt}),n.d(a,"rotate",function(){return Lt}),n.d(a,"scale",function(){return At}),n.d(a,"fromTranslation",function(){return Rt}),n.d(a,"fromRotation",function(){return Dt}),n.d(a,"fromScaling",function(){return It}),n.d(a,"fromMat2d",function(){return Ft}),n.d(a,"fromQuat",function(){return Ut}),n.d(a,"normalFromMat4",function(){return Pt}),n.d(a,"projection",function(){return qt}),n.d(a,"str",function(){return Gt}),n.d(a,"frob",function(){return Nt}),n.d(a,"add",function(){return Bt}),n.d(a,"subtract",function(){return jt}),n.d(a,"multiplyScalar",function(){return Vt}),n.d(a,"multiplyScalarAndAdd",function(){return Ht}),n.d(a,"exactEquals",function(){return zt}),n.d(a,"equals",function(){return Wt}),n.d(a,"mul",function(){return Yt}),n.d(a,"sub",function(){return Xt});var s={};n.r(s),n.d(s,"create",function(){return Qt}),n.d(s,"clone",function(){return Zt}),n.d(s,"copy",function(){return $t}),n.d(s,"fromValues",function(){return Jt}),n.d(s,"set",function(){return Kt}),n.d(s,"identity",function(){return te}),n.d(s,"transpose",function(){return ee}),n.d(s,"invert",function(){return ne}),n.d(s,"adjoint",function(){return re}),n.d(s,"determinant",function(){return oe}),n.d(s,"multiply",function(){return ie}),n.d(s,"translate",function(){return ae}),n.d(s,"scale",function(){return se}),n.d(s,"rotate",function(){return ue}),n.d(s,"rotateX",function(){return ce}),n.d(s,"rotateY",function(){return le}),n.d(s,"rotateZ",function(){return fe}),n.d(s,"fromTranslation",function(){return he}),n.d(s,"fromScaling",function(){return de}),n.d(s,"fromRotation",function(){return ve}),n.d(s,"fromXRotation",function(){return pe}),n.d(s,"fromYRotation",function(){return ge}),n.d(s,"fromZRotation",function(){return me}),n.d(s,"fromRotationTranslation",function(){return ye}),n.d(s,"fromQuat2",function(){return xe}),n.d(s,"getTranslation",function(){return be}),n.d(s,"getScaling",function(){return Me}),n.d(s,"getRotation",function(){return _e}),n.d(s,"fromRotationTranslationScale",function(){return Se}),n.d(s,"fromRotationTranslationScaleOrigin",function(){return we}),n.d(s,"fromQuat",function(){return Ee}),n.d(s,"frustum",function(){return Ce}),n.d(s,"perspective",function(){return Oe}),n.d(s,"perspectiveFromFieldOfView",function(){return ke}),n.d(s,"ortho",function(){return Te}),n.d(s,"lookAt",function(){return Le}),n.d(s,"targetTo",function(){return Ae}),n.d(s,"str",function(){return Re}),n.d(s,"frob",function(){return De}),n.d(s,"add",function(){return Ie}),n.d(s,"subtract",function(){return Fe}),n.d(s,"multiplyScalar",function(){return Ue}),n.d(s,"multiplyScalarAndAdd",function(){return Pe}),n.d(s,"exactEquals",function(){return qe}),n.d(s,"equals",function(){return Ge}),n.d(s,"mul",function(){return Ne}),n.d(s,"sub",function(){return Be});var u={};n.r(u),n.d(u,"create",function(){return je}),n.d(u,"clone",function(){return Ve}),n.d(u,"length",function(){return He}),n.d(u,"fromValues",function(){return ze}),n.d(u,"copy",function(){return We}),n.d(u,"set",function(){return Ye}),n.d(u,"add",function(){return Xe}),n.d(u,"subtract",function(){return Qe}),n.d(u,"multiply",function(){return Ze}),n.d(u,"divide",function(){return $e}),n.d(u,"ceil",function(){return Je}),n.d(u,"floor",function(){return Ke}),n.d(u,"min",function(){return tn}),n.d(u,"max",function(){return en}),n.d(u,"round",function(){return nn}),n.d(u,"scale",function(){return rn}),n.d(u,"scaleAndAdd",function(){return on}),n.d(u,"distance",function(){return an}),n.d(u,"squaredDistance",function(){return sn}),n.d(u,"squaredLength",function(){return un}),n.d(u,"negate",function(){return cn}),n.d(u,"inverse",function(){return ln}),n.d(u,"normalize",function(){return fn}),n.d(u,"dot",function(){return hn}),n.d(u,"cross",function(){return dn}),n.d(u,"lerp",function(){return vn}),n.d(u,"hermite",function(){return pn}),n.d(u,"bezier",function(){return gn}),n.d(u,"random",function(){return mn}),n.d(u,"transformMat4",function(){return yn}),n.d(u,"transformMat3",function(){return xn}),n.d(u,"transformQuat",function(){return bn}),n.d(u,"rotateX",function(){return Mn}),n.d(u,"rotateY",function(){return _n}),n.d(u,"rotateZ",function(){return Sn}),n.d(u,"angle",function(){return wn}),n.d(u,"zero",function(){return En}),n.d(u,"str",function(){return Cn}),n.d(u,"exactEquals",function(){return On}),n.d(u,"equals",function(){return kn}),n.d(u,"sub",function(){return Ln}),n.d(u,"mul",function(){return An}),n.d(u,"div",function(){return Rn}),n.d(u,"dist",function(){return Dn}),n.d(u,"sqrDist",function(){return In}),n.d(u,"len",function(){return Fn}),n.d(u,"sqrLen",function(){return Un}),n.d(u,"forEach",function(){return Pn});var c={};n.r(c),n.d(c,"create",function(){return qn}),n.d(c,"clone",function(){return Gn}),n.d(c,"fromValues",function(){return Nn}),n.d(c,"copy",function(){return Bn}),n.d(c,"set",function(){return jn}),n.d(c,"add",function(){return Vn}),n.d(c,"subtract",function(){return Hn}),n.d(c,"multiply",function(){return zn}),n.d(c,"divide",function(){return Wn}),n.d(c,"ceil",function(){return Yn}),n.d(c,"floor",function(){return Xn}),n.d(c,"min",function(){return Qn}),n.d(c,"max",function(){return Zn}),n.d(c,"round",function(){return $n}),n.d(c,"scale",function(){return Jn}),n.d(c,"scaleAndAdd",function(){return Kn}),n.d(c,"distance",function(){return tr}),n.d(c,"squaredDistance",function(){return er}),n.d(c,"length",function(){return nr}),n.d(c,"squaredLength",function(){return rr}),n.d(c,"negate",function(){return or}),n.d(c,"inverse",function(){return ir}),n.d(c,"normalize",function(){return ar}),n.d(c,"dot",function(){return sr}),n.d(c,"cross",function(){return ur}),n.d(c,"lerp",function(){return cr}),n.d(c,"random",function(){return lr}),n.d(c,"transformMat4",function(){return fr}),n.d(c,"transformQuat",function(){return hr}),n.d(c,"zero",function(){return dr}),n.d(c,"str",function(){return vr}),n.d(c,"exactEquals",function(){return pr}),n.d(c,"equals",function(){return gr}),n.d(c,"sub",function(){return mr}),n.d(c,"mul",function(){return yr}),n.d(c,"div",function(){return xr}),n.d(c,"dist",function(){return br}),n.d(c,"sqrDist",function(){return Mr}),n.d(c,"len",function(){return _r}),n.d(c,"sqrLen",function(){return Sr}),n.d(c,"forEach",function(){return wr});var l={};n.r(l),n.d(l,"create",function(){return Er}),n.d(l,"identity",function(){return Cr}),n.d(l,"setAxisAngle",function(){return Or}),n.d(l,"getAxisAngle",function(){return kr}),n.d(l,"multiply",function(){return Tr}),n.d(l,"rotateX",function(){return Lr}),n.d(l,"rotateY",function(){return Ar}),n.d(l,"rotateZ",function(){return Rr}),n.d(l,"calculateW",function(){return Dr}),n.d(l,"slerp",function(){return Ir}),n.d(l,"random",function(){return Fr}),n.d(l,"invert",function(){return Ur}),n.d(l,"conjugate",function(){return Pr}),n.d(l,"fromMat3",function(){return qr}),n.d(l,"fromEuler",function(){return Gr}),n.d(l,"str",function(){return Nr}),n.d(l,"clone",function(){return Yr}),n.d(l,"fromValues",function(){return Xr}),n.d(l,"copy",function(){return Qr}),n.d(l,"set",function(){return Zr}),n.d(l,"add",function(){return $r}),n.d(l,"mul",function(){return Jr}),n.d(l,"scale",function(){return Kr}),n.d(l,"dot",function(){return to}),n.d(l,"lerp",function(){return eo}),n.d(l,"length",function(){return no}),n.d(l,"len",function(){return ro}),n.d(l,"squaredLength",function(){return oo}),n.d(l,"sqrLen",function(){return io}),n.d(l,"normalize",function(){return ao}),n.d(l,"exactEquals",function(){return so}),n.d(l,"equals",function(){return uo}),n.d(l,"rotationTo",function(){return co}),n.d(l,"sqlerp",function(){return lo}),n.d(l,"setAxes",function(){return fo});var f={};n.r(f),n.d(f,"create",function(){return ho}),n.d(f,"clone",function(){return vo}),n.d(f,"fromValues",function(){return po}),n.d(f,"fromRotationTranslationValues",function(){return go}),n.d(f,"fromRotationTranslation",function(){return mo}),n.d(f,"fromTranslation",function(){return yo}),n.d(f,"fromRotation",function(){return xo}),n.d(f,"fromMat4",function(){return bo}),n.d(f,"copy",function(){return Mo}),n.d(f,"identity",function(){return _o}),n.d(f,"set",function(){return So}),n.d(f,"getReal",function(){return wo}),n.d(f,"getDual",function(){return Eo}),n.d(f,"setReal",function(){return Co}),n.d(f,"setDual",function(){return Oo}),n.d(f,"getTranslation",function(){return ko}),n.d(f,"translate",function(){return To}),n.d(f,"rotateX",function(){return Lo}),n.d(f,"rotateY",function(){return Ao}),n.d(f,"rotateZ",function(){return Ro}),n.d(f,"rotateByQuatAppend",function(){return Do}),n.d(f,"rotateByQuatPrepend",function(){return Io}),n.d(f,"rotateAroundAxis",function(){return Fo}),n.d(f,"add",function(){return Uo}),n.d(f,"multiply",function(){return Po}),n.d(f,"mul",function(){return qo}),n.d(f,"scale",function(){return Go}),n.d(f,"dot",function(){return No}),n.d(f,"lerp",function(){return Bo}),n.d(f,"invert",function(){return jo}),n.d(f,"conjugate",function(){return Vo}),n.d(f,"length",function(){return Ho}),n.d(f,"len",function(){return zo}),n.d(f,"squaredLength",function(){return Wo}),n.d(f,"sqrLen",function(){return Yo}),n.d(f,"normalize",function(){return Xo}),n.d(f,"str",function(){return Qo}),n.d(f,"exactEquals",function(){return Zo}),n.d(f,"equals",function(){return $o});var h={};n.r(h),n.d(h,"create",function(){return Jo}),n.d(h,"clone",function(){return Ko}),n.d(h,"fromValues",function(){return ti}),n.d(h,"copy",function(){return ei}),n.d(h,"set",function(){return ni}),n.d(h,"add",function(){return ri}),n.d(h,"subtract",function(){return oi}),n.d(h,"multiply",function(){return ii}),n.d(h,"divide",function(){return ai}),n.d(h,"ceil",function(){return si}),n.d(h,"floor",function(){return ui}),n.d(h,"min",function(){return ci}),n.d(h,"max",function(){return li}),n.d(h,"round",function(){return fi}),n.d(h,"scale",function(){return hi}),n.d(h,"scaleAndAdd",function(){return di}),n.d(h,"distance",function(){return vi}),n.d(h,"squaredDistance",function(){return pi}),n.d(h,"length",function(){return gi}),n.d(h,"squaredLength",function(){return mi}),n.d(h,"negate",function(){return yi}),n.d(h,"inverse",function(){return xi}),n.d(h,"normalize",function(){return bi}),n.d(h,"dot",function(){return Mi}),n.d(h,"cross",function(){return _i}),n.d(h,"lerp",function(){return Si}),n.d(h,"random",function(){return wi}),n.d(h,"transformMat2",function(){return Ei}),n.d(h,"transformMat2d",function(){return Ci}),n.d(h,"transformMat3",function(){return Oi}),n.d(h,"transformMat4",function(){return ki}),n.d(h,"rotate",function(){return Ti}),n.d(h,"angle",function(){return Li}),n.d(h,"zero",function(){return Ai}),n.d(h,"str",function(){return Ri}),n.d(h,"exactEquals",function(){return Di}),n.d(h,"equals",function(){return Ii}),n.d(h,"len",function(){return Fi}),n.d(h,"sub",function(){return Ui}),n.d(h,"mul",function(){return Pi}),n.d(h,"div",function(){return qi}),n.d(h,"dist",function(){return Gi}),n.d(h,"sqrDist",function(){return Ni}),n.d(h,"sqrLen",function(){return Bi}),n.d(h,"forEach",function(){return ji});var d=1e-6,v="undefined"!=typeof Float32Array?Float32Array:Array,p=Math.random;function g(t){v=t}var m=Math.PI/180;function y(t){return t*m}function x(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function b(){var t=new v(4);return v!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function M(t){var e=new v(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function _(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function S(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function w(t,e,n,r){var o=new v(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function E(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function C(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function O(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*i-o*r;return a?(a=1/a,t[0]=i*a,t[1]=-r*a,t[2]=-o*a,t[3]=n*a,t):null}function k(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function T(t){return t[0]*t[3]-t[2]*t[1]}function L(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+i*u,t[1]=o*s+a*u,t[2]=r*c+i*l,t[3]=o*c+a*l,t}function A(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=o*u+a*s,t[2]=r*-s+i*u,t[3]=o*-s+a*u,t}function R(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=o*s,t[2]=i*u,t[3]=a*u,t}function D(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function I(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function F(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function U(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function P(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function q(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function G(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function B(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=d*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=d*Math.max(1,Math.abs(i),Math.abs(c))}function j(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function V(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var H=L,z=G;function W(){var t=new v(6);return v!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Y(t){var e=new v(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function X(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Q(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Z(t,e,n,r,o,i){var a=new v(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=o,a[5]=i,a}function $(t,e,n,r,o,i,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t}function J(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=n*i-r*o;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*s-i*a)*u,t[5]=(r*a-n*s)*u,t):null}function K(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1],f=n[2],h=n[3],d=n[4],v=n[5];return t[0]=r*c+i*l,t[1]=o*c+a*l,t[2]=r*f+i*h,t[3]=o*f+a*h,t[4]=r*d+i*v+s,t[5]=o*d+a*v+u,t}function et(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*c,t[1]=o*l+a*c,t[2]=r*-c+i*l,t[3]=o*-c+a*l,t[4]=s,t[5]=u,t}function nt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=o*c,t[2]=i*l,t[3]=a*l,t[4]=s,t[5]=u,t}function rt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=r*c+i*l+s,t[5]=o*c+a*l+u,t}function ot(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function it(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function at(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function lt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function ft(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function vt(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=e[0],c=e[1],l=e[2],f=e[3],h=e[4],v=e[5];return Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-l)<=d*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-f)<=d*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=d*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-v)<=d*Math.max(1,Math.abs(s),Math.abs(v))}var pt=tt,gt=lt;function mt(){var t=new v(9);return v!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function xt(t){var e=new v(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function bt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Mt(t,e,n,r,o,i,a,s,u){var c=new v(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=s,c[8]=u,c}function _t(t,e,n,r,o,i,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function St(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function wt(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Et(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*a-s*c,h=-l*i+s*u,d=c*i-a*u,v=n*f+r*h+o*d;return v?(v=1/v,t[0]=f*v,t[1]=(-l*r+o*c)*v,t[2]=(s*r-o*a)*v,t[3]=h*v,t[4]=(l*n-o*u)*v,t[5]=(-s*n+o*i)*v,t[6]=d*v,t[7]=(-c*n+r*u)*v,t[8]=(a*n-r*i)*v,t):null}function Ct(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=o*c-r*l,t[2]=r*s-o*a,t[3]=s*u-i*l,t[4]=n*l-o*u,t[5]=o*i-n*s,t[6]=i*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*i,t}function Ot(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*i-a*u)+n*(-c*o+a*s)+r*(u*o-i*s)}function kt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1],v=n[2],p=n[3],g=n[4],m=n[5],y=n[6],x=n[7],b=n[8];return t[0]=h*r+d*a+v*c,t[1]=h*o+d*s+v*l,t[2]=h*i+d*u+v*f,t[3]=p*r+g*a+m*c,t[4]=p*o+g*s+m*l,t[5]=p*i+g*u+m*f,t[6]=y*r+x*a+b*c,t[7]=y*o+x*s+b*l,t[8]=y*i+x*u+b*f,t}function Tt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+d*a+c,t[7]=h*o+d*s+l,t[8]=h*i+d*u+f,t}function Lt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*o+h*s,t[2]=d*i+h*u,t[3]=d*a-h*r,t[4]=d*s-h*o,t[5]=d*u-h*i,t[6]=c,t[7]=l,t[8]=f,t}function At(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Rt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Dt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function It(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ft(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Ut(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,s=r+r,u=o+o,c=n*a,l=r*a,f=r*s,h=o*a,d=o*s,v=o*u,p=i*a,g=i*s,m=i*u;return t[0]=1-f-v,t[3]=l-m,t[6]=h+g,t[1]=l+m,t[4]=1-c-v,t[7]=d-p,t[2]=h-g,t[5]=d+p,t[8]=1-c-f,t}function Pt(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],m=e[15],y=n*s-r*a,x=n*u-o*a,b=n*c-i*a,M=r*u-o*s,_=r*c-i*s,S=o*c-i*u,w=l*p-f*v,E=l*g-h*v,C=l*m-d*v,O=f*g-h*p,k=f*m-d*p,T=h*m-d*g,L=y*T-x*k+b*O+M*C-_*E+S*w;return L?(L=1/L,t[0]=(s*T-u*k+c*O)*L,t[1]=(u*C-a*T-c*E)*L,t[2]=(a*k-s*C+c*w)*L,t[3]=(o*k-r*T-i*O)*L,t[4]=(n*T-o*C+i*E)*L,t[5]=(r*C-n*k-i*w)*L,t[6]=(p*S-g*_+m*M)*L,t[7]=(g*b-v*S-m*x)*L,t[8]=(v*_-p*b+m*y)*L,t):null}function qt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Gt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Nt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function Bt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function jt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Vt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function zt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Wt(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=e[0],h=e[1],v=e[2],p=e[3],g=e[4],m=e[5],y=e[6],x=e[7],b=e[8];return Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=d*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-v)<=d*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-p)<=d*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-g)<=d*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-m)<=d*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-y)<=d*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-x)<=d*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(l-b)<=d*Math.max(1,Math.abs(l),Math.abs(b))}var Yt=kt,Xt=jt;function Qt(){var t=new v(16);return v!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Zt(t){var e=new v(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function $t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,n,r,o,i,a,s,u,c,l,f,h,d,p,g){var m=new v(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=o,m[5]=i,m[6]=a,m[7]=s,m[8]=u,m[9]=c,m[10]=l,m[11]=f,m[12]=h,m[13]=d,m[14]=p,m[15]=g,m}function Kt(t,e,n,r,o,i,a,s,u,c,l,f,h,d,v,p,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=v,t[14]=p,t[15]=g,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],m=e[15],y=n*s-r*a,x=n*u-o*a,b=n*c-i*a,M=r*u-o*s,_=r*c-i*s,S=o*c-i*u,w=l*p-f*v,E=l*g-h*v,C=l*m-d*v,O=f*g-h*p,k=f*m-d*p,T=h*m-d*g,L=y*T-x*k+b*O+M*C-_*E+S*w;return L?(L=1/L,t[0]=(s*T-u*k+c*O)*L,t[1]=(o*k-r*T-i*O)*L,t[2]=(p*S-g*_+m*M)*L,t[3]=(h*_-f*S-d*M)*L,t[4]=(u*C-a*T-c*E)*L,t[5]=(n*T-o*C+i*E)*L,t[6]=(g*b-v*S-m*x)*L,t[7]=(l*S-h*b+d*x)*L,t[8]=(a*k-s*C+c*w)*L,t[9]=(r*C-n*k-i*w)*L,t[10]=(v*_-p*b+m*y)*L,t[11]=(f*b-l*_-d*y)*L,t[12]=(s*E-a*O-u*w)*L,t[13]=(n*O-r*E+o*w)*L,t[14]=(p*x-v*M-g*y)*L,t[15]=(l*M-f*x+h*y)*L,t):null}function re(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],g=e[14],m=e[15];return t[0]=s*(h*m-d*g)-f*(u*m-c*g)+p*(u*d-c*h),t[1]=-(r*(h*m-d*g)-f*(o*m-i*g)+p*(o*d-i*h)),t[2]=r*(u*m-c*g)-s*(o*m-i*g)+p*(o*c-i*u),t[3]=-(r*(u*d-c*h)-s*(o*d-i*h)+f*(o*c-i*u)),t[4]=-(a*(h*m-d*g)-l*(u*m-c*g)+v*(u*d-c*h)),t[5]=n*(h*m-d*g)-l*(o*m-i*g)+v*(o*d-i*h),t[6]=-(n*(u*m-c*g)-a*(o*m-i*g)+v*(o*c-i*u)),t[7]=n*(u*d-c*h)-a*(o*d-i*h)+l*(o*c-i*u),t[8]=a*(f*m-d*p)-l*(s*m-c*p)+v*(s*d-c*f),t[9]=-(n*(f*m-d*p)-l*(r*m-i*p)+v*(r*d-i*f)),t[10]=n*(s*m-c*p)-a*(r*m-i*p)+v*(r*c-i*s),t[11]=-(n*(s*d-c*f)-a*(r*d-i*f)+l*(r*c-i*s)),t[12]=-(a*(f*g-h*p)-l*(s*g-u*p)+v*(s*h-u*f)),t[13]=n*(f*g-h*p)-l*(r*g-o*p)+v*(r*h-o*f),t[14]=-(n*(s*g-u*p)-a*(r*g-o*p)+v*(r*u-o*s)),t[15]=n*(s*h-u*f)-a*(r*h-o*f)+l*(r*u-o*s),t}function oe(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],v=t[13],p=t[14],g=t[15];return(e*a-n*i)*(f*g-h*p)-(e*s-r*i)*(l*g-h*v)+(e*u-o*i)*(l*p-f*v)+(n*s-r*a)*(c*g-h*d)-(n*u-o*a)*(c*p-f*d)+(r*u-o*s)*(c*v-l*d)}function ie(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],p=e[12],g=e[13],m=e[14],y=e[15],x=n[0],b=n[1],M=n[2],_=n[3];return t[0]=x*r+b*s+M*f+_*p,t[1]=x*o+b*u+M*h+_*g,t[2]=x*i+b*c+M*d+_*m,t[3]=x*a+b*l+M*v+_*y,x=n[4],b=n[5],M=n[6],_=n[7],t[4]=x*r+b*s+M*f+_*p,t[5]=x*o+b*u+M*h+_*g,t[6]=x*i+b*c+M*d+_*m,t[7]=x*a+b*l+M*v+_*y,x=n[8],b=n[9],M=n[10],_=n[11],t[8]=x*r+b*s+M*f+_*p,t[9]=x*o+b*u+M*h+_*g,t[10]=x*i+b*c+M*d+_*m,t[11]=x*a+b*l+M*v+_*y,x=n[12],b=n[13],M=n[14],_=n[15],t[12]=x*r+b*s+M*f+_*p,t[13]=x*o+b*u+M*h+_*g,t[14]=x*i+b*c+M*d+_*m,t[15]=x*a+b*l+M*v+_*y,t}function ae(t,e,n){var r,o,i,a,s,u,c,l,f,h,d,v,p=n[0],g=n[1],m=n[2];return e===t?(t[12]=e[0]*p+e[4]*g+e[8]*m+e[12],t[13]=e[1]*p+e[5]*g+e[9]*m+e[13],t[14]=e[2]*p+e[6]*g+e[10]*m+e[14],t[15]=e[3]*p+e[7]*g+e[11]*m+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=d,t[11]=v,t[12]=r*p+s*g+f*m+e[12],t[13]=o*p+u*g+h*m+e[13],t[14]=i*p+c*g+d*m+e[14],t[15]=a*p+l*g+v*m+e[15]),t}function se(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,n,r){var o,i,a,s,u,c,l,f,h,v,p,g,m,y,x,b,M,_,S,w,E,C,O,k,T=r[0],L=r[1],A=r[2],R=Math.sqrt(T*T+L*L+A*A);return R<d?null:(T*=R=1/R,L*=R,A*=R,o=Math.sin(n),a=1-(i=Math.cos(n)),s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],v=e[6],p=e[7],g=e[8],m=e[9],y=e[10],x=e[11],b=T*T*a+i,M=L*T*a+A*o,_=A*T*a-L*o,S=T*L*a-A*o,w=L*L*a+i,E=A*L*a+T*o,C=T*A*a+L*o,O=L*A*a-T*o,k=A*A*a+i,t[0]=s*b+f*M+g*_,t[1]=u*b+h*M+m*_,t[2]=c*b+v*M+y*_,t[3]=l*b+p*M+x*_,t[4]=s*S+f*w+g*E,t[5]=u*S+h*w+m*E,t[6]=c*S+v*w+y*E,t[7]=l*S+p*w+x*E,t[8]=s*C+f*O+g*k,t[9]=u*C+h*O+m*k,t[10]=c*C+v*O+y*k,t[11]=l*C+p*O+x*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+c*r,t[5]=a*o+l*r,t[6]=s*o+f*r,t[7]=u*o+h*r,t[8]=c*o-i*r,t[9]=l*o-a*r,t[10]=f*o-s*r,t[11]=h*o-u*r,t}function le(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-c*r,t[1]=a*o-l*r,t[2]=s*o-f*r,t[3]=u*o-h*r,t[8]=i*r+c*o,t[9]=a*r+l*o,t[10]=s*r+f*o,t[11]=u*r+h*o,t}function fe(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+c*r,t[1]=a*o+l*r,t[2]=s*o+f*r,t[3]=u*o+h*r,t[4]=c*o-i*r,t[5]=l*o-a*r,t[6]=f*o-s*r,t[7]=h*o-u*r,t}function he(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e,n){var r,o,i,a=n[0],s=n[1],u=n[2],c=Math.sqrt(a*a+s*s+u*u);return c<d?null:(a*=c=1/c,s*=c,u*=c,r=Math.sin(e),i=1-(o=Math.cos(e)),t[0]=a*a*i+o,t[1]=s*a*i+u*r,t[2]=u*a*i-s*r,t[3]=0,t[4]=a*s*i-u*r,t[5]=s*s*i+o,t[6]=u*s*i+a*r,t[7]=0,t[8]=a*u*i+s*r,t[9]=s*u*i-a*r,t[10]=u*u*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function pe(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=r+r,u=o+o,c=i+i,l=r*s,f=r*u,h=r*c,d=o*u,v=o*c,p=i*c,g=a*s,m=a*u,y=a*c;return t[0]=1-(d+p),t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-(l+p),t[6]=v+g,t[7]=0,t[8]=h+m,t[9]=v-g,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function xe(t,e){var n=new v(3),r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=r*r+o*o+i*i+a*a;return f>0?(n[0]=2*(s*a+l*r+u*i-c*o)/f,n[1]=2*(u*a+l*o+c*r-s*i)/f,n[2]=2*(c*a+l*i+s*o-u*r)/f):(n[0]=2*(s*a+l*r+u*i-c*o),n[1]=2*(u*a+l*o+c*r-s*i),n[2]=2*(c*a+l*i+s*o-u*r)),ye(t,e,n),t}function be(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Me(t,e){var n=e[0],r=e[1],o=e[2],i=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+o*o),t[1]=Math.sqrt(i*i+a*a+s*s),t[2]=Math.sqrt(u*u+c*c+l*l),t}function _e(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function Se(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=e[3],u=o+o,c=i+i,l=a+a,f=o*u,h=o*c,d=o*l,v=i*c,p=i*l,g=a*l,m=s*u,y=s*c,x=s*l,b=r[0],M=r[1],_=r[2];return t[0]=(1-(v+g))*b,t[1]=(h+x)*b,t[2]=(d-y)*b,t[3]=0,t[4]=(h-x)*M,t[5]=(1-(f+g))*M,t[6]=(p+m)*M,t[7]=0,t[8]=(d+y)*_,t[9]=(p-m)*_,t[10]=(1-(f+v))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function we(t,e,n,r,o){var i=e[0],a=e[1],s=e[2],u=e[3],c=i+i,l=a+a,f=s+s,h=i*c,d=i*l,v=i*f,p=a*l,g=a*f,m=s*f,y=u*c,x=u*l,b=u*f,M=r[0],_=r[1],S=r[2],w=o[0],E=o[1],C=o[2],O=(1-(p+m))*M,k=(d+b)*M,T=(v-x)*M,L=(d-b)*_,A=(1-(h+m))*_,R=(g+y)*_,D=(v+x)*S,I=(g-y)*S,F=(1-(h+p))*S;return t[0]=O,t[1]=k,t[2]=T,t[3]=0,t[4]=L,t[5]=A,t[6]=R,t[7]=0,t[8]=D,t[9]=I,t[10]=F,t[11]=0,t[12]=n[0]+w-(O*w+L*E+D*C),t[13]=n[1]+E-(k*w+A*E+I*C),t[14]=n[2]+C-(T*w+R*E+F*C),t[15]=1,t}function Ee(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,s=r+r,u=o+o,c=n*a,l=r*a,f=r*s,h=o*a,d=o*s,v=o*u,p=i*a,g=i*s,m=i*u;return t[0]=1-f-v,t[1]=l+m,t[2]=h-g,t[3]=0,t[4]=l-m,t[5]=1-c-v,t[6]=d+p,t[7]=0,t[8]=h+g,t[9]=d-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ce(t,e,n,r,o,i,a){var s=1/(n-e),u=1/(o-r),c=1/(i-a);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+r)*u,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t}function Oe(t,e,n,r,o){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r),t}function ke(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(o+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(o-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Te(t,e,n,r,o,i,a){var s=1/(e-n),u=1/(r-o),c=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=(a+i)*c,t[15]=1,t}function Le(t,e,n,r){var o,i,a,s,u,c,l,f,h,v,p=e[0],g=e[1],m=e[2],y=r[0],x=r[1],b=r[2],M=n[0],_=n[1],S=n[2];return Math.abs(p-M)<d&&Math.abs(g-_)<d&&Math.abs(m-S)<d?te(t):(l=p-M,f=g-_,h=m-S,o=x*(h*=v=1/Math.sqrt(l*l+f*f+h*h))-b*(f*=v),i=b*(l*=v)-y*h,a=y*f-x*l,(v=Math.sqrt(o*o+i*i+a*a))?(o*=v=1/v,i*=v,a*=v):(o=0,i=0,a=0),s=f*a-h*i,u=h*o-l*a,c=l*i-f*o,(v=Math.sqrt(s*s+u*u+c*c))?(s*=v=1/v,u*=v,c*=v):(s=0,u=0,c=0),t[0]=o,t[1]=s,t[2]=l,t[3]=0,t[4]=i,t[5]=u,t[6]=f,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*p+i*g+a*m),t[13]=-(s*p+u*g+c*m),t[14]=-(l*p+f*g+h*m),t[15]=1,t)}function Ae(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=r[0],u=r[1],c=r[2],l=o-n[0],f=i-n[1],h=a-n[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);var v=u*h-c*f,p=c*l-s*h,g=s*f-u*l;return(d=v*v+p*p+g*g)>0&&(v*=d=1/Math.sqrt(d),p*=d,g*=d),t[0]=v,t[1]=p,t[2]=g,t[3]=0,t[4]=f*g-h*p,t[5]=h*v-l*g,t[6]=l*p-f*v,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t}function Re(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function De(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Ie(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Fe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Ue(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Pe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function qe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ge(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],v=t[11],p=t[12],g=t[13],m=t[14],y=t[15],x=e[0],b=e[1],M=e[2],_=e[3],S=e[4],w=e[5],E=e[6],C=e[7],O=e[8],k=e[9],T=e[10],L=e[11],A=e[12],R=e[13],D=e[14],I=e[15];return Math.abs(n-x)<=d*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(r-b)<=d*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-M)<=d*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-_)<=d*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(a-S)<=d*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(s-w)<=d*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(u-E)<=d*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-C)<=d*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(l-O)<=d*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(f-k)<=d*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(h-T)<=d*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(v-L)<=d*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(p-A)<=d*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(g-R)<=d*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(m-D)<=d*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(y-I)<=d*Math.max(1,Math.abs(y),Math.abs(I))}var Ne=ie,Be=Fe;function je(){var t=new v(3);return v!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ve(t){var e=new v(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function He(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function ze(t,e,n){var r=new v(3);return r[0]=t,r[1]=e,r[2]=n,r}function We(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ye(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Xe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Qe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ze(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function $e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Ke(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function en(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function rn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function on(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function an(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)}function sn(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function un(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ln(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function fn(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function hn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dn(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],u=n[2];return t[0]=o*u-i*s,t[1]=i*a-r*u,t[2]=r*s-o*a,t}function vn(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t}function pn(t,e,n,r,o,i){var a=i*i,s=a*(2*i-3)+1,u=a*(i-2)+i,c=a*(i-1),l=a*(3-2*i);return t[0]=e[0]*s+n[0]*u+r[0]*c+o[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+o[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+o[2]*l,t}function gn(t,e,n,r,o,i){var a=1-i,s=a*a,u=i*i,c=s*a,l=3*i*s,f=3*u*a,h=u*i;return t[0]=e[0]*c+n[0]*l+r[0]*f+o[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+o[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+o[2]*h,t}function mn(t,e){e=e||1;var n=2*p()*Math.PI,r=2*p()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}function yn(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t}function xn(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t}function bn(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=o*c-i*u,f=i*s-r*c,h=r*u-o*s,d=o*h-i*f,v=i*l-r*h,p=r*f-o*l,g=2*a;return l*=g,f*=g,h*=g,d*=2,v*=2,p*=2,t[0]=s+l+d,t[1]=u+f+v,t[2]=c+h+p,t}function Mn(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function _n(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Sn(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function wn(t,e){var n=ze(t[0],t[1],t[2]),r=ze(e[0],e[1],e[2]);fn(n,n),fn(r,r);var o=hn(n,r);return o>1?0:o<-1?Math.PI:Math.acos(o)}function En(t){return t[0]=0,t[1]=0,t[2]=0,t}function Cn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function On(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function kn(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],s=e[2];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=d*Math.max(1,Math.abs(o),Math.abs(s))}var Tn,Ln=Qe,An=Ze,Rn=$e,Dn=an,In=sn,Fn=He,Un=un,Pn=(Tn=je(),function(t,e,n,r,o,i){var a,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)Tn[0]=t[a],Tn[1]=t[a+1],Tn[2]=t[a+2],o(Tn,Tn,i),t[a]=Tn[0],t[a+1]=Tn[1],t[a+2]=Tn[2];return t});function qn(){var t=new v(4);return v!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Gn(t){var e=new v(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Nn(t,e,n,r){var o=new v(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function Bn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function jn(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function Vn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Hn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function zn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Wn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Yn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Xn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Qn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Zn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function $n(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Jn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Kn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tr(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(n*n+r*r+o*o+i*i)}function er(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i}function nr(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.sqrt(e*e+n*n+r*r+o*o)}function rr(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function or(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function ir(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function ar(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a,t}function sr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ur(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=e[0],f=e[1],h=e[2],d=e[3];return t[0]=f*c-h*u+d*s,t[1]=-l*c+h*a-d*i,t[2]=l*u-f*a+d*o,t[3]=-l*s+f*i-h*o,t}function cr(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function lr(t,e){var n,r,o,i,a,s;e=e||1;do{a=(n=2*p()-1)*n+(r=2*p()-1)*r}while(a>=1);do{s=(o=2*p()-1)*o+(i=2*p()-1)*i}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*o*u,t[3]=e*i*u,t}function fr(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t}function hr(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*i-u*o,f=c*o+u*r-a*i,h=c*i+a*o-s*r,d=-a*r-s*o-u*i;return t[0]=l*c+d*-a+f*-u-h*-s,t[1]=f*c+d*-s+h*-a-l*-u,t[2]=h*c+d*-u+l*-s-f*-a,t[3]=e[3],t}function dr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function vr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function pr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function gr(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=d*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=d*Math.max(1,Math.abs(i),Math.abs(c))}var mr=Hn,yr=zn,xr=Wn,br=tr,Mr=er,_r=nr,Sr=rr,wr=function(){var t=qn();return function(e,n,r,o,i,a){var s,u;for(n||(n=4),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],i(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Er(){var t=new v(4);return v!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Cr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Or(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function kr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>d?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Tr(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+o*c-i*u,t[1]=o*l+a*u+i*s-r*c,t[2]=i*l+a*c+r*u-o*s,t[3]=a*l-r*s-o*u-i*c,t}function Lr(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=o*u+i*s,t[2]=i*u-o*s,t[3]=a*u-r*s,t}function Ar(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-i*s,t[1]=o*u+a*s,t[2]=i*u+r*s,t[3]=a*u-o*s,t}function Rr(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=o*u-r*s,t[2]=i*u+a*s,t[3]=a*u-i*s,t}function Dr(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t}function Ir(t,e,n,r){var o,i,a,s,u,c=e[0],l=e[1],f=e[2],h=e[3],v=n[0],p=n[1],g=n[2],m=n[3];return(i=c*v+l*p+f*g+h*m)<0&&(i=-i,v=-v,p=-p,g=-g,m=-m),1-i>d?(o=Math.acos(i),a=Math.sin(o),s=Math.sin((1-r)*o)/a,u=Math.sin(r*o)/a):(s=1-r,u=r),t[0]=s*c+u*v,t[1]=s*l+u*p,t[2]=s*f+u*g,t[3]=s*h+u*m,t}function Fr(t){var e=p(),n=p(),r=p(),o=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function Ur(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-o*s,t[3]=i*s,t}function Pr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function qr(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+o]+e[3*o+i])*n,t[a]=(e[3*a+o]+e[3*o+a])*n}return t}function Gr(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var i=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=i*u*l-a*s*c,t[1]=a*s*l+i*u*c,t[2]=a*u*c-i*s*l,t[3]=a*u*l+i*s*c,t}function Nr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Br,jr,Vr,Hr,zr,Wr,Yr=Gn,Xr=Nn,Qr=Bn,Zr=jn,$r=Vn,Jr=Tr,Kr=Jn,to=sr,eo=cr,no=nr,ro=no,oo=rr,io=oo,ao=ar,so=pr,uo=gr,co=(Br=je(),jr=ze(1,0,0),Vr=ze(0,1,0),function(t,e,n){var r=hn(e,n);return r<-.999999?(dn(Br,jr,e),Fn(Br)<1e-6&&dn(Br,Vr,e),fn(Br,Br),Or(t,Br,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(dn(Br,e,n),t[0]=Br[0],t[1]=Br[1],t[2]=Br[2],t[3]=1+r,ao(t,t))}),lo=(Hr=Er(),zr=Er(),function(t,e,n,r,o,i){return Ir(Hr,e,o,i),Ir(zr,n,r,i),Ir(t,Hr,zr,2*i*(1-i)),t}),fo=(Wr=mt(),function(t,e,n,r){return Wr[0]=n[0],Wr[3]=n[1],Wr[6]=n[2],Wr[1]=r[0],Wr[4]=r[1],Wr[7]=r[2],Wr[2]=-e[0],Wr[5]=-e[1],Wr[8]=-e[2],ao(t,qr(t,Wr))});function ho(){var t=new v(8);return v!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function vo(t){var e=new v(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function po(t,e,n,r,o,i,a,s){var u=new v(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=o,u[5]=i,u[6]=a,u[7]=s,u}function go(t,e,n,r,o,i,a){var s=new v(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*o,c=.5*i,l=.5*a;return s[4]=u*r+c*n-l*e,s[5]=c*r+l*t-u*n,s[6]=l*r+u*e-c*t,s[7]=-u*t-c*e-l*n,s}function mo(t,e,n){var r=.5*n[0],o=.5*n[1],i=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+o*u-i*s,t[5]=o*c+i*a-r*u,t[6]=i*c+r*s-o*a,t[7]=-r*a-o*s-i*u,t}function yo(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function xo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function bo(t,e){var n=Er();_e(n,e);var r=new v(3);return be(r,e),mo(t,n,r),t}function Mo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function _o(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function So(t,e,n,r,o,i,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t}var wo=Qr;function Eo(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Co=Qr;function Oo(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function ko(t,e){var n=e[4],r=e[5],o=e[6],i=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+i*a+r*u-o*s),t[1]=2*(r*c+i*s+o*a-n*u),t[2]=2*(o*c+i*u+n*s-r*a),t}function To(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],l=e[4],f=e[5],h=e[6],d=e[7];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=a*s+o*c-i*u+l,t[5]=a*u+i*s-r*c+f,t[6]=a*c+r*u-o*s+h,t[7]=-r*s-o*u-i*c+d,t}function Lo(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*a+l*r+u*i-c*o,h=u*a+l*o+c*r-s*i,d=c*a+l*i+s*o-u*r,v=l*a-s*r-u*o-c*i;return Lr(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=f*a+v*r+h*i-d*o,t[5]=h*a+v*o+d*r-f*i,t[6]=d*a+v*i+f*o-h*r,t[7]=v*a-f*r-h*o-d*i,t}function Ao(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*a+l*r+u*i-c*o,h=u*a+l*o+c*r-s*i,d=c*a+l*i+s*o-u*r,v=l*a-s*r-u*o-c*i;return Ar(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=f*a+v*r+h*i-d*o,t[5]=h*a+v*o+d*r-f*i,t[6]=d*a+v*i+f*o-h*r,t[7]=v*a-f*r-h*o-d*i,t}function Ro(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*a+l*r+u*i-c*o,h=u*a+l*o+c*r-s*i,d=c*a+l*i+s*o-u*r,v=l*a-s*r-u*o-c*i;return Rr(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=f*a+v*r+h*i-d*o,t[5]=h*a+v*o+d*r-f*i,t[6]=d*a+v*i+f*o-h*r,t[7]=v*a-f*r-h*o-d*i,t}function Do(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=s*a+l*r+u*i-c*o,t[1]=u*a+l*o+c*r-s*i,t[2]=c*a+l*i+s*o-u*r,t[3]=l*a-s*r-u*o-c*i,s=e[4],u=e[5],c=e[6],l=e[7],t[4]=s*a+l*r+u*i-c*o,t[5]=u*a+l*o+c*r-s*i,t[6]=c*a+l*i+s*o-u*r,t[7]=l*a-s*r-u*o-c*i,t}function Io(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+o*c-i*u,t[1]=o*l+a*u+i*s-r*c,t[2]=i*l+a*c+r*u-o*s,t[3]=a*l-r*s-o*u-i*c,s=n[4],u=n[5],c=n[6],l=n[7],t[4]=r*l+a*s+o*c-i*u,t[5]=o*l+a*u+i*s-r*c,t[6]=i*l+a*c+r*u-o*s,t[7]=a*l-r*s-o*u-i*c,t}function Fo(t,e,n,r){if(Math.abs(r)<d)return Mo(t,e);var o=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);r*=.5;var i=Math.sin(r),a=i*n[0]/o,s=i*n[1]/o,u=i*n[2]/o,c=Math.cos(r),l=e[0],f=e[1],h=e[2],v=e[3];t[0]=l*c+v*a+f*u-h*s,t[1]=f*c+v*s+h*a-l*u,t[2]=h*c+v*u+l*s-f*a,t[3]=v*c-l*a-f*s-h*u;var p=e[4],g=e[5],m=e[6],y=e[7];return t[4]=p*c+y*a+g*u-m*s,t[5]=g*c+y*s+m*a-p*u,t[6]=m*c+y*u+p*s-g*a,t[7]=y*c-p*a-g*s-m*u,t}function Uo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Po(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[4],u=n[5],c=n[6],l=n[7],f=e[4],h=e[5],d=e[6],v=e[7],p=n[0],g=n[1],m=n[2],y=n[3];return t[0]=r*y+a*p+o*m-i*g,t[1]=o*y+a*g+i*p-r*m,t[2]=i*y+a*m+r*g-o*p,t[3]=a*y-r*p-o*g-i*m,t[4]=r*l+a*s+o*c-i*u+f*y+v*p+h*m-d*g,t[5]=o*l+a*u+i*s-r*c+h*y+v*g+d*p-f*m,t[6]=i*l+a*c+r*u-o*s+d*y+v*m+f*g-h*p,t[7]=a*l-r*s-o*u-i*c+v*y-f*p-h*g-d*m,t}var qo=Po;function Go(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var No=to;function Bo(t,e,n,r){var o=1-r;return No(e,n)<0&&(r=-r),t[0]=e[0]*o+n[0]*r,t[1]=e[1]*o+n[1]*r,t[2]=e[2]*o+n[2]*r,t[3]=e[3]*o+n[3]*r,t[4]=e[4]*o+n[4]*r,t[5]=e[5]*o+n[5]*r,t[6]=e[6]*o+n[6]*r,t[7]=e[7]*o+n[7]*r,t}function jo(t,e){var n=Wo(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Vo(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Ho=no,zo=Ho,Wo=oo,Yo=Wo;function Xo(t,e){var n=Wo(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,o=e[1]/n,i=e[2]/n,a=e[3]/n,s=e[4],u=e[5],c=e[6],l=e[7],f=r*s+o*u+i*c+a*l;t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=(s-r*f)/n,t[5]=(u-o*f)/n,t[6]=(c-i*f)/n,t[7]=(l-a*f)/n}return t}function Qo(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Zo(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function $o(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=e[0],f=e[1],h=e[2],v=e[3],p=e[4],g=e[5],m=e[6],y=e[7];return Math.abs(n-l)<=d*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-f)<=d*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-h)<=d*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-v)<=d*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(a-p)<=d*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-g)<=d*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-m)<=d*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-y)<=d*Math.max(1,Math.abs(c),Math.abs(y))}function Jo(){var t=new v(2);return v!=Float32Array&&(t[0]=0,t[1]=0),t}function Ko(t){var e=new v(2);return e[0]=t[0],e[1]=t[1],e}function ti(t,e){var n=new v(2);return n[0]=t,n[1]=e,n}function ei(t,e){return t[0]=e[0],t[1]=e[1],t}function ni(t,e,n){return t[0]=e,t[1]=n,t}function ri(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function oi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function ii(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function ai(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function si(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function ui(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function ci(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function li(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function fi(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function hi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function di(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function vi(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function pi(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function gi(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function mi(t){var e=t[0],n=t[1];return e*e+n*n}function yi(t,e){return t[0]=-e[0],t[1]=-e[1],t}function xi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function bi(t,e){var n=e[0],r=e[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function Mi(t,e){return t[0]*e[0]+t[1]*e[1]}function _i(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Si(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t}function wi(t,e){e=e||1;var n=2*p()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Ei(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t}function Ci(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}function Oi(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}function ki(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t}function Ti(t,e,n,r){var o=e[0]-n[0],i=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=o*s-i*a+n[0],t[1]=o*a+i*s+n[1],t}function Li(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));var s=o*o+i*i;s>0&&(s=1/Math.sqrt(s));var u=(n*o+r*i)*a*s;return u>1?0:u<-1?Math.PI:Math.acos(u)}function Ai(t){return t[0]=0,t[1]=0,t}function Ri(t){return"vec2("+t[0]+", "+t[1]+")"}function Di(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ii(t,e){var n=t[0],r=t[1],o=e[0],i=e[1];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=d*Math.max(1,Math.abs(r),Math.abs(i))}var Fi=gi,Ui=oi,Pi=ii,qi=ai,Gi=vi,Ni=pi,Bi=mi,ji=function(){var t=Jo();return function(e,n,r,o,i,a){var s,u;for(n||(n=2),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],i(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}();n.d(e,"glMatrix",function(){return r}),n.d(e,"mat2",function(){return o}),n.d(e,"mat2d",function(){return i}),n.d(e,"mat3",function(){return a}),n.d(e,"mat4",function(){return s}),n.d(e,"quat",function(){return l}),n.d(e,"quat2",function(){return f}),n.d(e,"vec2",function(){return h}),n.d(e,"vec3",function(){return u}),n.d(e,"vec4",function(){return c})},function(t,e,n){var r=n(24),o=n(25),i=n(26);t.exports=function(t){return r(t)||o(t)||i()}},function(t,e,n){var r=n(21),o=n(22),i=n(23);t.exports=function(t,e){return r(t)||o(t,e)||i()}},function(t,e,n){"use strict";n.r(e),n.d(e,"create",function(){return i}),n.d(e,"clone",function(){return o}),n.d(e,"copy",function(){return a}),n.d(e,"scaleAndAdd",function(){return s}),n.d(e,"dot",function(){return u});var r=n(0);function o(t){return[t[0],t[1]]}function i(){return[0,0]}n(0).glMatrix.setMatrixArrayType(Array);var a=r.vec2.copy,s=r.vec2.scaleAndAdd,u=r.vec2.dot},function(t,e,n){t.exports=n(27)},function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c}),n.d(e,"c",function(){return f});var r=n(1),o=n.n(r),i=n(8),a=n(12),s=n(10);function u(e,n){var r,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).offscreen,i=void 0===o||o;return"function"==typeof t.createCanvas?r=t.createCanvas(e,n,i):i&&"function"==typeof OffscreenCanvas?r=new OffscreenCanvas(e,n):((r=document.createElement("canvas")).width=e,r.height=n),r}function c(t,e){var n=t.canvas;t.save(),t.filter=e,t.drawImage(n,0,0,n.width,n.height),t.restore()}function l(t,e){var n=/rgba\((\d+),(\d+),(\d+),(\d+)\)/;t=t.match(n).slice(1,5).map(Number);for(var r=[],o=(e=e.match(n).slice(1,5).map(Number))[3],i=0;i<4;i++)r[i]=Object(s.b)(t[i],e[i],o);return"rgba(".concat(r.join(),")")}function f(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;e.save();var h=!1,d=!1;if(e.globalAlpha=t.uniforms.u_opacity,t.lineWidth){var v=t.gradient&&t.gradient.stroke;if(v){var p=v,g=p.vector,m=p.colors;6===g.length?(g=o()(g),v=e.createRadialGradient.apply(e,o()(g))):v=e.createLinearGradient.apply(e,o()(g)),m.forEach(function(t){var e=t.offset,n=t.color,r=Object(i.a)(n);s&&(r=l(r,s)),v.addColorStop(e,r)}),e.strokeStyle=v,h=!0}else t.strokeStyle&&(e.strokeStyle=s?l(t.strokeStyle,s):t.strokeStyle,h=!0)}h&&(e.lineWidth=t.lineWidth,e.lineJoin=t.lineJoin,e.lineCap=t.lineCap,e.miterLimit=t.miterLimit,t.lineDash&&(e.setLineDash(t.lineDash),t.lineDashOffset&&(e.lineDashOffset=t.lineDashOffset)));var y=t.gradient&&t.gradient.fill;if(y){var x=y,b=x.vector,M=x.colors;6===b.length?(b=o()(b),y=e.createRadialGradient.apply(e,o()(b))):y=e.createLinearGradient.apply(e,o()(b)),M.forEach(function(t){var e=t.offset,n=t.color,r=Object(i.a)(n);s&&(r=l(r,s)),y.addColorStop(e,r)}),e.fillStyle=y,d=!0}else t.fillStyle&&(e.fillStyle=r?l(t.fillStyle,r):t.fillStyle,d=!0);f&&e.transform.apply(e,o()(f)),e.transform.apply(e,o()(t.transformMatrix));var _=t.contours.length;if(t.contours.forEach(function(n,r){var i=n.closed,s=n.length,c=r===_-1&&t.texture;if(n&&s>0){if(d||h||c){e.beginPath(),e.moveTo.apply(e,o()(n[0]));for(var l=1;l<s;l++)l===s-1&&i?e.closePath():e.lineTo.apply(e,o()(n[l]))}if(d&&e.fill(),c){e.clip();var f=t.texture,v=f.image,p=f.options;if(u&&(v=u),p.repeat&&console.warn("Context 2D not supported image repeat yet."),v.font){p.scale&&console.warn("Context 2D not supported text scale yet."),p.srcRect&&console.warn("Context 2D not supported text srcRect yet.");var g=v,m=g.font,y=g.fillColor,x=g.strokeColor,b=g.text;y||x||(y="#000"),e.font=m;var M=e.measureText(b).width,S=Object(a.a)(m).pxLineHeight;e.textAlign="center",e.textBaseline="middle",y&&(e.fillStyle=y),x&&(e.strokeStyle=x);var w=p.rect,E=w[0]+S/2,C=w[1]+M/2;e.scale(w[2]/M,w[3]/S),e.fillText(b,C,E)}else{var O=p.rect,k=p.srcRect;p.scale&&(O=[0,0,e.canvas.width,e.canvas.height]),k?(O=O||[0,0,k[2],k[3]],e.drawImage.apply(e,[v].concat(o()(k),o()(O)))):O?e.drawImage.apply(e,[v].concat(o()(O))):e.drawImage(v,0,0)}}h&&e.stroke()}}),e.restore(),n){var S=t.filter;S&&c(e,S)}}n(0).glMatrix.setMatrixArrayType(Array)}).call(this,n(17))},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return"rgba(".concat(t.map(function(t,e){return e<3?Math.round(255*t):t}).join(),")")}n.d(e,"a",function(){return r}),n(0).glMatrix.setMatrixArrayType(Array)},function(t,e){function n(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function s(t){n(a,o,i,s,u,"next",t)}function u(t){n(a,o,i,s,u,"throw",t)}s(void 0)})}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s});var r=n(2),o=n.n(r);function i(t,e,n){if(e>n){var r=[n,e];e=r[0],n=r[1]}return t<e?e:t>n?n:t}function a(t,e,n){return t*(1-n)+e*n}function s(t,e){var n=o()(t,2),r=n[0],i=n[1];return[r*e[0]+i*e[2]+e[4],r*e[1]+i*e[3]+e[5]]}n(0).glMatrix.setMatrixArrayType(Array)},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";function r(t,e){if("string"==typeof t){var n=t.trim().match(/^([\d.]+)(px|pt|pc|in|cm|mm|em|ex|rem|q|vw|vh|vmax|vmin|%)$/);t=n?{size:parseFloat(n[1]),unit:n[2]}:{size:parseInt(t,10),unit:"px"}}var o=t,i=o.size,a=o.unit;if("pt"===a)i/=.75;else if("pc"===a)i*=16;else if("in"===a)i*=96;else if("cm"===a)i*=96/2.54;else if("mm"===a)i*=96/25.4;else if("em"===a||"rem"===a||"ex"===a){if(!e&&"function"==typeof getComputedStyle&&"undefined"!=typeof document)e=r(getComputedStyle(document.documentElement).fontSize,16);i*=e,"ex"===a&&(i/=2)}else if("q"===a)i*=96/25.4/4;else if("vw"===a||"vh"===a){if("undefined"!=typeof document)i*=("vw"===a?document.documentElement.clientWidth:document.documentElement.clientHeight)/100}else if(("vmax"===a||"vmin"===a)&&"undefined"!=typeof document){var s=document.documentElement.clientWidth,u=document.documentElement.clientHeight;i*="vmax"===a?Math.max(s,u)/100:Math.min(s,u)/100}return i}n.d(e,"a",function(){return f}),n(0).glMatrix.setMatrixArrayType(Array);var o="px|pt|pc|in|cm|mm|em|ex|rem|q|vw|vh|vmax|vmin|%",i="'([^']+)'|\"([^\"]+)\"|([\\w-]|[一-龥])+",a=new RegExp("(".concat("bold|bolder|lighter|[1-9]00",") +"),"i"),s=new RegExp("(".concat("italic|oblique",") +"),"i"),u=new RegExp("(".concat("small-caps",") +"),"i"),c=new RegExp("(".concat("ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",") +"),"i"),l=new RegExp("([\\d\\.]+)("+o+")(?:\\/([\\d\\.]+)("+o+"))? *((?:"+i+")( *, *(?:"+i+"))*)");function f(t,e){var n=l.exec(t);if(n){var o=parseFloat(n[3]),i={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(n[1]),unit:n[2],lineHeight:Number.isFinite(o)?o:void 0,lineHeightUnit:n[4],family:n[5].replace(/ *, */g,",")},f=t.substring(0,n.index),h=a.exec(f),d=s.exec(f),v=u.exec(f),p=c.exec(f);return h&&(i.weight=h[1]),d&&(i.style=d[1]),v&&(i.variant=v[1]),p&&(i.stretch=p[1]),i.pxHeight=r({size:i.size,unit:i.unit},e),i.pxLineHeight=r({size:i.lineHeight||i.size,unit:i.lineHeightUnit||i.unit},e),i}}},function(t,e,n){"use strict";t.exports=function(t){var e=t.length;if(0===e)return[[],[]];for(var n=t[0].length,r=t[0].slice(),o=t[0].slice(),i=1;i<e;++i)for(var a=t[i],s=0;s<n;++s){var u=a[s];r[s]=Math.min(r[s],u),o[s]=Math.max(o[s],u)}return[r,o]}},function(t,e,n){n(0).glMatrix.setMatrixArrayType(Array);var r=n(37),o=n(3),i=n(39);function a(t,e,n){return t[0]=e,t[1]=n,t}var s=[0,0],u=[0,0],c=[0,0];t.exports=function(t,e,n){var l=[],f=[],h=[0,0];return t.forEach(function(t,n,i){if("M"===t[0])o.copy(h,t.slice(1)),f.length>0&&(l.push(f),f=[]);else{if("C"!==t[0])throw new Error("illegal type in SVG: "+t[0]);!function(t,e,n,o){r(n,a(s,o[1],o[2]),a(u,o[3],o[4]),a(c,o[5],o[6]),e,t)}(f,e,h,t),a(h,t[5],t[6])}}),f.length>0&&l.push(f),l.map(function(t){return i(t,n||0)})}},function(t,e){t.exports=function(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}},function(t,e){t.exports=function(t){var e=[];return t.replace(r,function(t,r,i){var a=r.toLowerCase();for(i=function(t){var e=t.match(o);return e?e.map(Number):[]}(i),"m"==a&&i.length>2&&(e.push([r].concat(i.splice(0,2))),a="l",r="m"==r?"l":"L");;){if(i.length==n[a])return i.unshift(r),e.push(i);if(i.length<n[a])throw new Error("malformed path data");e.push([r].concat(i.splice(0,n[a])))}}),e};var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){n(0).glMatrix.setMatrixArrayType(Array);var r=n(34),o=n(36);t.exports=function(t,e){if(e=e||{},0===(t=t.filter(function(t){return t.length>2})).length)return{positions:[],cells:[]};"number"!=typeof e.vertexSize&&(e.vertexSize=t[0][0].length),t=t.map(function(t){return t.reduce(function(t,e){return t.concat(e)})});for(var n=r.tesselate(o({contours:t,windingRule:r.WINDING_ODD,elementType:r.POLYGONS,polySize:3,vertexSize:2},e)),i=[],a=0;a<n.vertices.length;a+=e.vertexSize){var s=n.vertices.slice(a,a+e.vertexSize);i.push(s)}var u=[];for(a=0;a<n.elements.length;a+=3){var c=n.elements[a],l=n.elements[a+1],f=n.elements[a+2];u.push([c,l,f])}return{positions:i,cells:u}}},function(t,e,n){"use strict";var r=n(42),o=n(46),i=n(48);t.exports=function(t){var e,n=r(t);return n.space?((e=Array(3))[0]=i(n.values[0],0,255),e[1]=i(n.values[1],0,255),e[2]=i(n.values[2],0,255),"h"===n.space[0]&&(e=o.rgb(e)),e.push(i(n.alpha,0,1)),e):[]}},function(t,e){t.exports=function(t){var e=0,n=0,r=0,o=0;return t.map(function(t){var i=(t=t.slice())[0],a=i.toUpperCase();if(i!=a)switch(t[0]=a,i){case"a":t[6]+=r,t[7]+=o;break;case"v":t[1]+=o;break;case"h":t[1]+=r;break;default:for(var s=1;s<t.length;)t[s++]+=r,t[s++]+=o}switch(a){case"Z":r=e,o=n;break;case"H":r=t[1];break;case"V":o=t[1];break;case"M":r=e=t[1],o=n=t[2];break;default:r=t[t.length-2],o=t[t.length-1]}return t})}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,n,r){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r=l;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?d:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,a),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",d="completed",v={};function p(){}function g(){}function m(){}var y={};y[i]=function(){return this};var x=Object.getPrototypeOf,b=x&&x(x(k([])));b&&b!==n&&r.call(b,i)&&(y=b);var M=m.prototype=p.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(n,o){function i(){return new Promise(function(e,i){!function e(n,o,i,a){var s=c(t[n],t,o);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(l).then(function(t){u.value=t,i(u)},function(t){return e("throw",t,i,a)})}a(s.arg)}(n,o,e,i)})}return e=e?e.then(i,i):i()}}function w(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=c(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function k(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:e,done:!0}}return g.prototype=M.constructor=m,m.constructor=g,m[s]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(M),t},t.awrap=function(t){return{__await:t}},_(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,o){var i=new S(u(e,n,r,o));return t.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},_(M),M[s]="Generator",M[i]=function(){return this},M.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(29),o=n(30),i=n(31),a=n(32),s=n(33),u=[0,0];t.exports.computeMiter=function(t,e,n,a,c){return r(t,n,a),i(t,t),o(e,-t[1],t[0]),o(u,-n[1],n[0]),c/s(e,u)},t.exports.normal=function(t,e){return o(t,-e[1],e[0]),t},t.exports.direction=function(t,e,n){return a(t,e,n),i(t,t),t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e,t[1]=n,t}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o);return t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]}},function(t,e,n){t.exports=n(35)},function(t,e,n){"use strict";var r={};t.exports=r,r.WINDING_ODD=0,r.WINDING_NONZERO=1,r.WINDING_POSITIVE=2,r.WINDING_NEGATIVE=3,r.WINDING_ABS_GEQ_TWO=4,r.POLYGONS=0,r.CONNECTED_POLYGONS=1,r.BOUNDARY_CONTOURS=2,r.tesselate=function(t){for(var e=t.debug||!1,n=new m,o=0;o<t.contours.length;o++)n.addContour(t.vertexSize||2,t.contours[o]);return n.tesselate(t.windingRule||r.WINDING_ODD,t.elementType||r.POLYGONS,t.polySize||3,t.vertexSize||2,t.normal||[0,0,1]),{vertices:n.vertices,vertexIndices:n.vertexIndices,vertexCount:n.vertexCount,elements:n.elements,elementCount:n.elementCount,mesh:e?n.mesh:void 0}};var o=function(t){if(!t)throw"Assertion Failed!"};function i(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}function a(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}function s(t){this.next=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Org=null,this.Lface=null,this.activeRegion=null,this.winding=0,this.side=t}function u(){var t=new i,e=new a,n=new s(0),r=new s(1);t.next=t.prev=t,t.anEdge=null,e.next=e.prev=e,e.anEdge=null,e.trail=null,e.marked=!1,e.inside=!1,n.next=n,n.Sym=r,n.Onext=null,n.Lnext=null,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,r.next=r,r.Sym=n,r.Onext=null,r.Lnext=null,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,this.vHead=t,this.fHead=e,this.eHead=n,this.eHeadSym=r}s.prototype={get Rface(){return this.Sym.Lface},set Rface(t){this.Sym.Lface=t},get Dst(){return this.Sym.Org},set Dst(t){this.Sym.Org=t},get Oprev(){return this.Sym.Lnext},set Oprev(t){this.Sym.Lnext=t},get Lprev(){return this.Onext.Sym},set Lprev(t){this.Onext.Sym=t},get Dprev(){return this.Lnext.Sym},set Dprev(t){this.Lnext.Sym=t},get Rprev(){return this.Sym.Onext},set Rprev(t){this.Sym.Onext=t},get Dnext(){return this.Sym.Onext.Sym},set Dnext(t){this.Sym.Onext.Sym=t},get Rnext(){return this.Sym.Lnext.Sym},set Rnext(t){this.Sym.Lnext.Sym=t}},u.prototype={makeEdge_:function(t){var e=new s(0),n=new s(1);t.Sym.side<t.side&&(t=t.Sym);var r=t.Sym.next;return n.next=r,r.Sym.next=e,e.next=t,t.Sym.next=n,e.Sym=n,e.Onext=e,e.Lnext=n,e.Org=null,e.Lface=null,e.winding=0,e.activeRegion=null,n.Sym=e,n.Onext=n,n.Lnext=e,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,e},splice_:function(t,e){var n=t.Onext,r=e.Onext;n.Sym.Lnext=e,r.Sym.Lnext=t,t.Onext=r,e.Onext=n},makeVertex_:function(t,e,n){var r=t;o(null!==r);var i=n.prev;r.prev=i,i.next=r,r.next=n,n.prev=r,r.anEdge=e;var a=e;do{a.Org=r,a=a.Onext}while(a!==e)},makeFace_:function(t,e,n){var r=t;o(null!==r);var i=n.prev;r.prev=i,i.next=r,r.next=n,n.prev=r,r.anEdge=e,r.trail=null,r.marked=!1,r.inside=n.inside;var a=e;do{a.Lface=r,a=a.Lnext}while(a!==e)},killEdge_:function(t){t.Sym.side<t.side&&(t=t.Sym);var e=t.next,n=t.Sym.next;e.Sym.next=n,n.Sym.next=e},killVertex_:function(t,e){var n=t.anEdge,r=n;do{r.Org=e,r=r.Onext}while(r!==n);var o=t.prev,i=t.next;i.prev=o,o.next=i},killFace_:function(t,e){var n=t.anEdge,r=n;do{r.Lface=e,r=r.Lnext}while(r!==n);var o=t.prev,i=t.next;i.prev=o,o.next=i},makeEdge:function(){var t=new i,e=new i,n=new a,r=this.makeEdge_(this.eHead);return this.makeVertex_(t,r,this.vHead),this.makeVertex_(e,r.Sym,this.vHead),this.makeFace_(n,r,this.fHead),r},splice:function(t,e){var n=!1,r=!1;if(t!==e){if(e.Org!==t.Org&&(r=!0,this.killVertex_(e.Org,t.Org)),e.Lface!==t.Lface&&(n=!0,this.killFace_(e.Lface,t.Lface)),this.splice_(e,t),!r){var o=new i;this.makeVertex_(o,e,t.Org),t.Org.anEdge=t}if(!n){var s=new a;this.makeFace_(s,e,t.Lface),t.Lface.anEdge=t}}},delete:function(t){var e=t.Sym,n=!1;if(t.Lface!==t.Rface&&(n=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!n){var r=new a;this.makeFace_(r,t,t.Lface)}e.Onext===e?(this.killVertex_(e.Org,null),this.killFace_(e.Lface,null)):(t.Lface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev)),this.killEdge_(t)},addEdgeVertex:function(t){var e=this.makeEdge_(t),n=e.Sym;this.splice_(e,t.Lnext),e.Org=t.Dst;var r=new i;return this.makeVertex_(r,n,e.Org),e.Lface=n.Lface=t.Lface,e},splitEdge:function(t,e){var n=this.addEdgeVertex(t).Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,n),t.Dst=n.Org,n.Dst.anEdge=n.Sym,n.Rface=t.Rface,n.winding=t.winding,n.Sym.winding=t.Sym.winding,n},connect:function(t,e){var n=!1,r=this.makeEdge_(t),o=r.Sym;if(e.Lface!==t.Lface&&(n=!0,this.killFace_(e.Lface,t.Lface)),this.splice_(r,t.Lnext),this.splice_(o,e),r.Org=t.Dst,o.Org=e.Org,r.Lface=o.Lface=t.Lface,t.Lface.anEdge=o,!n){var i=new a;this.makeFace_(i,r,t.Lface)}return r},zapFace:function(t){var e,n,r,o,i,a=t.anEdge;n=a.Lnext;do{n=(e=n).Lnext,e.Lface=null,null===e.Rface&&(e.Onext===e?this.killVertex_(e.Org,null):(e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev)),(r=e.Sym).Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(e))}while(e!=a);o=t.prev,(i=t.next).prev=o,o.next=i},countFaceVerts_:function(t){var e=t.anEdge,n=0;do{n++,e=e.Lnext}while(e!==t.anEdge);return n},mergeConvexFaces:function(t){var e,n,r,o,i;for(e=this.fHead.next;e!==this.fHead;e=e.next)if(e.inside)for(i=(n=e.anEdge).Org;r=n.Lnext,(o=n.Sym)&&o.Lface&&o.Lface.inside&&this.countFaceVerts_(e)+this.countFaceVerts_(o.Lface)-2<=t&&c.vertCCW(n.Lprev.Org,n.Org,o.Lnext.Lnext.Org)&&c.vertCCW(o.Lprev.Org,o.Org,n.Lnext.Lnext.Org)&&(r=o.Lnext,this.delete(o),n=null,o=null),!n||n.Lnext.Org!==i;)n=r;return!0},check:function(){var t,e,n,r,i,a,s=this.fHead,u=this.vHead,c=this.eHead;for(e=s,e=s;(t=e.next)!==s;e=t){o(t.prev===e),i=t.anEdge;do{o(i.Sym!==i),o(i.Sym.Sym===i),o(i.Lnext.Onext.Sym===i),o(i.Onext.Sym.Lnext===i),o(i.Lface===t),i=i.Lnext}while(i!==t.anEdge)}for(o(t.prev===e&&null===t.anEdge),r=u,r=u;(n=r.next)!==u;r=n){o(n.prev===r),i=n.anEdge;do{o(i.Sym!==i),o(i.Sym.Sym===i),o(i.Lnext.Onext.Sym===i),o(i.Onext.Sym.Lnext===i),o(i.Org===n),i=i.Onext}while(i!==n.anEdge)}for(o(n.prev===r&&null===n.anEdge),a=c,a=c;(i=a.next)!==c;a=i)o(i.Sym.next===a.Sym),o(i.Sym!==i),o(i.Sym.Sym===i),o(null!==i.Org),o(null!==i.Dst),o(i.Lnext.Onext.Sym===i),o(i.Onext.Sym.Lnext===i);o(i.Sym.next===a.Sym&&i.Sym===this.eHeadSym&&i.Sym.Sym===i&&null===i.Org&&null===i.Dst&&null===i.Lface&&null===i.Rface)}};var c={};function l(){this.key=null,this.next=null,this.prev=null}function f(t,e){this.head=new l,this.head.next=this.head,this.head.prev=this.head,this.frame=t,this.leq=e}function h(){this.handle=null}function d(){this.key=null,this.node=null}function v(t,e){this.size=0,this.max=t,this.nodes=[],this.nodes.length=t+1;for(var n=0;n<this.nodes.length;n++)this.nodes[n]=new h;this.handles=[],this.handles.length=t+1;for(n=0;n<this.handles.length;n++)this.handles[n]=new d;this.initialized=!1,this.freeList=0,this.leq=e,this.nodes[1].handle=1,this.handles[1].key=null}function p(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}c.vertEq=function(t,e){return t.s===e.s&&t.t===e.t},c.vertLeq=function(t,e){return t.s<e.s||t.s===e.s&&t.t<=e.t},c.transLeq=function(t,e){return t.t<e.t||t.t===e.t&&t.s<=e.s},c.edgeGoesLeft=function(t){return c.vertLeq(t.Dst,t.Org)},c.edgeGoesRight=function(t){return c.vertLeq(t.Org,t.Dst)},c.vertL1dist=function(t,e){return Math.abs(t.s-e.s)+Math.abs(t.t-e.t)},c.edgeEval=function(t,e,n){o(c.vertLeq(t,e)&&c.vertLeq(e,n));var r=e.s-t.s,i=n.s-e.s;return r+i>0?r<i?e.t-t.t+(t.t-n.t)*(r/(r+i)):e.t-n.t+(n.t-t.t)*(i/(r+i)):0},c.edgeSign=function(t,e,n){o(c.vertLeq(t,e)&&c.vertLeq(e,n));var r=e.s-t.s,i=n.s-e.s;return r+i>0?(e.t-n.t)*r+(e.t-t.t)*i:0},c.transEval=function(t,e,n){o(c.transLeq(t,e)&&c.transLeq(e,n));var r=e.t-t.t,i=n.t-e.t;return r+i>0?r<i?e.s-t.s+(t.s-n.s)*(r/(r+i)):e.s-n.s+(n.s-t.s)*(i/(r+i)):0},c.transSign=function(t,e,n){o(c.transLeq(t,e)&&c.transLeq(e,n));var r=e.t-t.t,i=n.t-e.t;return r+i>0?(e.s-n.s)*r+(e.s-t.s)*i:0},c.vertCCW=function(t,e,n){return t.s*(e.t-n.t)+e.s*(n.t-t.t)+n.s*(t.t-e.t)>=0},c.interpolate=function(t,e,n,r){return(t=t<0?0:t)<=(n=n<0?0:n)?0==n?(e+r)/2:e+t/(t+n)*(r-e):r+n/(t+n)*(e-r)},c.intersect=function(t,e,n,r,o){var i,a,s;c.vertLeq(t,e)||(s=t,t=e,e=s),c.vertLeq(n,r)||(s=n,n=r,r=s),c.vertLeq(t,n)||(s=t,t=n,n=s,s=e,e=r,r=s),c.vertLeq(n,e)?c.vertLeq(e,r)?((i=c.edgeEval(t,n,e))+(a=c.edgeEval(n,e,r))<0&&(i=-i,a=-a),o.s=c.interpolate(i,n.s,a,e.s)):((i=c.edgeSign(t,n,e))+(a=-c.edgeSign(t,r,e))<0&&(i=-i,a=-a),o.s=c.interpolate(i,n.s,a,r.s)):o.s=(n.s+e.s)/2,c.transLeq(t,e)||(s=t,t=e,e=s),c.transLeq(n,r)||(s=n,n=r,r=s),c.transLeq(t,n)||(s=t,t=n,n=s,s=e,e=r,r=s),c.transLeq(n,e)?c.transLeq(e,r)?((i=c.transEval(t,n,e))+(a=c.transEval(n,e,r))<0&&(i=-i,a=-a),o.t=c.interpolate(i,n.t,a,e.t)):((i=c.transSign(t,n,e))+(a=-c.transSign(t,r,e))<0&&(i=-i,a=-a),o.t=c.interpolate(i,n.t,a,r.t)):o.t=(n.t+e.t)/2},f.prototype={min:function(){return this.head.next},max:function(){return this.head.prev},insert:function(t){return this.insertBefore(this.head,t)},search:function(t){var e=this.head;do{e=e.next}while(null!==e.key&&!this.leq(this.frame,t,e.key));return e},insertBefore:function(t,e){do{t=t.prev}while(null!==t.key&&!this.leq(this.frame,t.key,e));var n=new l;return n.key=e,n.next=t.next,t.next.prev=n,n.prev=t,t.next=n,n},delete:function(t){t.next.prev=t.prev,t.prev.next=t.next}},v.prototype={floatDown_:function(t){var e,n,r,i=this.nodes,a=this.handles;for(e=i[t].handle;;){if((r=t<<1)<this.size&&this.leq(a[i[r+1].handle].key,a[i[r].handle].key)&&++r,o(r<=this.max),n=i[r].handle,r>this.size||this.leq(a[e].key,a[n].key)){i[t].handle=e,a[e].node=t;break}i[t].handle=n,a[n].node=t,t=r}},floatUp_:function(t){var e,n,r,o=this.nodes,i=this.handles;for(e=o[t].handle;;){if(n=o[r=t>>1].handle,0==r||this.leq(i[n].key,i[e].key)){o[t].handle=e,i[e].node=t;break}o[t].handle=n,i[n].node=t,t=r}},init:function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},min:function(){return this.handles[this.nodes[1].handle].key},isEmpty:function(){this.size},insert:function(t){var e,n;if(2*(e=++this.size)>this.max){var r;this.max*=2,r=this.nodes.length,this.nodes.length=this.max+1;for(var o=r;o<this.nodes.length;o++)this.nodes[o]=new h;r=this.handles.length,this.handles.length=this.max+1;for(o=r;o<this.handles.length;o++)this.handles[o]=new d}return 0===this.freeList?n=e:(n=this.freeList,this.freeList=this.handles[n].node),this.nodes[e].handle=n,this.handles[n].node=e,this.handles[n].key=t,this.initialized&&this.floatUp_(e),n},extractMin:function(){var t=this.nodes,e=this.handles,n=t[1].handle,r=e[n].key;return this.size>0&&(t[1].handle=t[this.size].handle,e[t[1].handle].node=1,e[n].key=null,e[n].node=this.freeList,this.freeList=n,--this.size,this.size>0&&this.floatDown_(1)),r},delete:function(t){var e,n=this.nodes,r=this.handles;o(t>=1&&t<=this.max&&null!==r[t].key),n[e=r[t].node].handle=n[this.size].handle,r[n[e].handle].node=e,--this.size,e<=this.size&&(e<=1||this.leq(r[n[e>>1].handle].key,r[n[e].handle].key)?this.floatDown_(e):this.floatUp_(e)),r[t].key=null,r[t].node=this.freeList,this.freeList=t}};var g={};function m(){this.mesh=null,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=r.WINDING_ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}g.regionBelow=function(t){return t.nodeUp.prev.key},g.regionAbove=function(t){return t.nodeUp.next.key},g.debugEvent=function(t){},g.addWinding=function(t,e){t.winding+=e.winding,t.Sym.winding+=e.Sym.winding},g.edgeLeq=function(t,e,n){var r=t.event,o=e.eUp,i=n.eUp;return o.Dst===r?i.Dst===r?c.vertLeq(o.Org,i.Org)?c.edgeSign(i.Dst,o.Org,i.Org)<=0:c.edgeSign(o.Dst,i.Org,o.Org)>=0:c.edgeSign(i.Dst,r,i.Org)<=0:i.Dst===r?c.edgeSign(o.Dst,r,o.Org)>=0:c.edgeEval(o.Dst,r,o.Org)>=c.edgeEval(i.Dst,r,i.Org)},g.deleteRegion=function(t,e){e.fixUpperEdge&&o(0===e.eUp.winding),e.eUp.activeRegion=null,t.dict.delete(e.nodeUp)},g.fixUpperEdge=function(t,e,n){o(e.fixUpperEdge),t.mesh.delete(e.eUp),e.fixUpperEdge=!1,e.eUp=n,n.activeRegion=e},g.topLeftRegion=function(t,e){var n,r=e.eUp.Org;do{e=g.regionAbove(e)}while(e.eUp.Org===r);if(e.fixUpperEdge){if(null===(n=t.mesh.connect(g.regionBelow(e).eUp.Sym,e.eUp.Lnext)))return null;g.fixUpperEdge(t,e,n),e=g.regionAbove(e)}return e},g.topRightRegion=function(t){var e=t.eUp.Dst;t=null;do{t=g.regionAbove(t)}while(t.eUp.Dst===e);return t},g.addRegionBelow=function(t,e,n){var r=new p;return r.eUp=n,r.nodeUp=t.dict.insertBefore(e.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,n.activeRegion=r,r},g.isWindingInside=function(t,e){switch(t.windingRule){case r.WINDING_ODD:return 0!=(1&e);case r.WINDING_NONZERO:return 0!=e;case r.WINDING_POSITIVE:return e>0;case r.WINDING_NEGATIVE:return e<0;case r.WINDING_ABS_GEQ_TWO:return e>=2||e<=-2}return o(!1),!1},g.computeWinding=function(t,e){e.windingNumber=g.regionAbove(e).windingNumber+e.eUp.winding,e.inside=g.isWindingInside(t,e.windingNumber)},g.finishRegion=function(t,e){var n=e.eUp,r=n.Lface;r.inside=e.inside,r.anEdge=n,g.deleteRegion(t,e)},g.finishLeftRegions=function(t,e,n){for(var r,o=null,i=e,a=e.eUp;i!==n;){if(i.fixUpperEdge=!1,(r=(o=g.regionBelow(i)).eUp).Org!=a.Org){if(!o.fixUpperEdge){g.finishRegion(t,i);break}r=t.mesh.connect(a.Lprev,r.Sym),g.fixUpperEdge(t,o,r)}a.Onext!==r&&(t.mesh.splice(r.Oprev,r),t.mesh.splice(a,r)),g.finishRegion(t,i),a=o.eUp,i=o}return a},g.addRightEdges=function(t,e,n,r,i,a){var s,u,l,f,h=!0;l=n;do{o(c.vertLeq(l.Org,l.Dst)),g.addRegionBelow(t,e,l.Sym),l=l.Onext}while(l!==r);for(null===i&&(i=g.regionBelow(e).eUp.Rprev),u=e,f=i;(l=(s=g.regionBelow(u)).eUp.Sym).Org===f.Org;)l.Onext!==f&&(t.mesh.splice(l.Oprev,l),t.mesh.splice(f.Oprev,l)),s.windingNumber=u.windingNumber-l.winding,s.inside=g.isWindingInside(t,s.windingNumber),u.dirty=!0,!h&&g.checkForRightSplice(t,u)&&(g.addWinding(l,f),g.deleteRegion(t,u),t.mesh.delete(f)),h=!1,u=s,f=l;u.dirty=!0,o(u.windingNumber-l.winding===s.windingNumber),a&&g.walkDirtyRegions(t,u)},g.spliceMergeVertices=function(t,e,n){t.mesh.splice(e,n)},g.vertexWeights=function(t,e,n){var r=c.vertL1dist(e,t),o=c.vertL1dist(n,t),i=.5*o/(r+o),a=.5*r/(r+o);t.coords[0]+=i*e.coords[0]+a*n.coords[0],t.coords[1]+=i*e.coords[1]+a*n.coords[1],t.coords[2]+=i*e.coords[2]+a*n.coords[2]},g.getIntersectData=function(t,e,n,r,o,i){e.coords[0]=e.coords[1]=e.coords[2]=0,e.idx=-1,g.vertexWeights(e,n,r),g.vertexWeights(e,o,i)},g.checkForRightSplice=function(t,e){var n=g.regionBelow(e),r=e.eUp,o=n.eUp;if(c.vertLeq(r.Org,o.Org)){if(c.edgeSign(o.Dst,r.Org,o.Org)>0)return!1;c.vertEq(r.Org,o.Org)?r.Org!==o.Org&&(t.pq.delete(r.Org.pqHandle),g.spliceMergeVertices(t,o.Oprev,r)):(t.mesh.splitEdge(o.Sym),t.mesh.splice(r,o.Oprev),e.dirty=n.dirty=!0)}else{if(c.edgeSign(r.Dst,o.Org,r.Org)<0)return!1;g.regionAbove(e).dirty=e.dirty=!0,t.mesh.splitEdge(r.Sym),t.mesh.splice(o.Oprev,r)}return!0},g.checkForLeftSplice=function(t,e){var n,r=g.regionBelow(e),i=e.eUp,a=r.eUp;if(o(!c.vertEq(i.Dst,a.Dst)),c.vertLeq(i.Dst,a.Dst)){if(c.edgeSign(i.Dst,a.Dst,i.Org)<0)return!1;g.regionAbove(e).dirty=e.dirty=!0,n=t.mesh.splitEdge(i),t.mesh.splice(a.Sym,n),n.Lface.inside=e.inside}else{if(c.edgeSign(a.Dst,i.Dst,a.Org)>0)return!1;e.dirty=r.dirty=!0,n=t.mesh.splitEdge(a),t.mesh.splice(i.Lnext,a.Sym),n.Rface.inside=e.inside}return!0},g.checkForIntersect=function(t,e){var n,r,a=g.regionBelow(e),s=e.eUp,u=a.eUp,l=s.Org,f=u.Org,h=s.Dst,d=u.Dst,v=new i;if(o(!c.vertEq(d,h)),o(c.edgeSign(h,t.event,l)<=0),o(c.edgeSign(d,t.event,f)>=0),o(l!==t.event&&f!==t.event),o(!e.fixUpperEdge&&!a.fixUpperEdge),l===f)return!1;if(Math.min(l.t,h.t)>Math.max(f.t,d.t))return!1;if(c.vertLeq(l,f)){if(c.edgeSign(d,l,f)>0)return!1}else if(c.edgeSign(h,f,l)<0)return!1;return g.debugEvent(t),c.intersect(h,l,d,f,v),o(Math.min(l.t,h.t)<=v.t),o(v.t<=Math.max(f.t,d.t)),o(Math.min(d.s,h.s)<=v.s),o(v.s<=Math.max(f.s,l.s)),c.vertLeq(v,t.event)&&(v.s=t.event.s,v.t=t.event.t),n=c.vertLeq(l,f)?l:f,c.vertLeq(n,v)&&(v.s=n.s,v.t=n.t),c.vertEq(v,l)||c.vertEq(v,f)?(g.checkForRightSplice(t,e),!1):!c.vertEq(h,t.event)&&c.edgeSign(h,t.event,v)>=0||!c.vertEq(d,t.event)&&c.edgeSign(d,t.event,v)<=0?d===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(u.Sym,s),e=g.topLeftRegion(t,e),s=g.regionBelow(e).eUp,g.finishLeftRegions(t,g.regionBelow(e),a),g.addRightEdges(t,e,s.Oprev,s,s,!0),TRUE):h===t.event?(t.mesh.splitEdge(u.Sym),t.mesh.splice(s.Lnext,u.Oprev),a=e,e=g.topRightRegion(e),r=g.regionBelow(e).eUp.Rprev,a.eUp=u.Oprev,u=g.finishLeftRegions(t,a,null),g.addRightEdges(t,e,u.Onext,s.Rprev,r,!0),!0):(c.edgeSign(h,t.event,v)>=0&&(g.regionAbove(e).dirty=e.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),c.edgeSign(d,t.event,v)<=0&&(e.dirty=a.dirty=!0,t.mesh.splitEdge(u.Sym),u.Org.s=t.event.s,u.Org.t=t.event.t),!1):(t.mesh.splitEdge(s.Sym),t.mesh.splitEdge(u.Sym),t.mesh.splice(u.Oprev,s),s.Org.s=v.s,s.Org.t=v.t,s.Org.pqHandle=t.pq.insert(s.Org),g.getIntersectData(t,s.Org,l,h,f,d),g.regionAbove(e).dirty=e.dirty=a.dirty=!0,!1)},g.walkDirtyRegions=function(t,e){for(var n,r,o=g.regionBelow(e);;){for(;o.dirty;)e=o,o=g.regionBelow(o);if(!e.dirty&&(o=e,null==(e=g.regionAbove(e))||!e.dirty))return;if(e.dirty=!1,n=e.eUp,r=o.eUp,n.Dst!==r.Dst&&g.checkForLeftSplice(t,e)&&(o.fixUpperEdge?(g.deleteRegion(t,o),t.mesh.delete(r),r=(o=g.regionBelow(e)).eUp):e.fixUpperEdge&&(g.deleteRegion(t,e),t.mesh.delete(n),n=(e=g.regionAbove(o)).eUp)),n.Org!==r.Org)if(n.Dst===r.Dst||e.fixUpperEdge||o.fixUpperEdge||n.Dst!==t.event&&r.Dst!==t.event)g.checkForRightSplice(t,e);else if(g.checkForIntersect(t,e))return;n.Org===r.Org&&n.Dst===r.Dst&&(g.addWinding(r,n),g.deleteRegion(t,e),t.mesh.delete(n),e=g.regionAbove(o))}},g.connectRightVertex=function(t,e,n){var r,o=n.Onext,i=g.regionBelow(e),a=e.eUp,s=i.eUp,u=!1;a.Dst!==s.Dst&&g.checkForIntersect(t,e),c.vertEq(a.Org,t.event)&&(t.mesh.splice(o.Oprev,a),e=g.topLeftRegion(t,e),o=g.regionBelow(e).eUp,g.finishLeftRegions(t,g.regionBelow(e),i),u=!0),c.vertEq(s.Org,t.event)&&(t.mesh.splice(n,s.Oprev),n=g.finishLeftRegions(t,i,null),u=!0),u?g.addRightEdges(t,e,n.Onext,o,o,!0):(r=c.vertLeq(s.Org,a.Org)?s.Oprev:a,r=t.mesh.connect(n.Lprev,r),g.addRightEdges(t,e,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,g.walkDirtyRegions(t,e))},g.connectLeftDegenerate=function(t,e,n){var r,i,a,s,u;return r=e.eUp,c.vertEq(r.Org,n)?(o(!1),void g.spliceMergeVertices(t,r,n.anEdge)):c.vertEq(r.Dst,n)?(o(!1),e=g.topRightRegion(e),i=s=(a=(u=g.regionBelow(e)).eUp.Sym).Onext,u.fixUpperEdge&&(o(i!==a),g.deleteRegion(t,u),t.mesh.delete(a),a=i.Oprev),t.mesh.splice(n.anEdge,a),c.edgeGoesLeft(i)||(i=null),void g.addRightEdges(t,e,a.Onext,s,i,!0)):(t.mesh.splitEdge(r.Sym),e.fixUpperEdge&&(t.mesh.delete(r.Onext),e.fixUpperEdge=!1),t.mesh.splice(n.anEdge,r),void g.sweepEvent(t,n))},g.connectLeftVertex=function(t,e){var n,r,o,i,a,s,u=new p;if(u.eUp=e.anEdge.Sym,n=t.dict.search(u).key,r=g.regionBelow(n))if(i=n.eUp,a=r.eUp,0!==c.edgeSign(i.Dst,e,i.Org))if(o=c.vertLeq(a.Dst,i.Dst)?n:r,n.inside||o.fixUpperEdge){if(o===n)s=t.mesh.connect(e.anEdge.Sym,i.Lnext);else s=t.mesh.connect(a.Dnext,e.anEdge).Sym;o.fixUpperEdge?g.fixUpperEdge(t,o,s):g.computeWinding(t,g.addRegionBelow(t,n,s)),g.sweepEvent(t,e)}else g.addRightEdges(t,n,e.anEdge,e.anEdge,null,!0);else g.connectLeftDegenerate(t,n,e)},g.sweepEvent=function(t,e){t.event=e,g.debugEvent(t);for(var n=e.anEdge;null===n.activeRegion;)if((n=n.Onext)==e.anEdge)return void g.connectLeftVertex(t,e);var r=g.topLeftRegion(t,n.activeRegion);o(null!==r);var i=g.regionBelow(r),a=i.eUp,s=g.finishLeftRegions(t,i,null);s.Onext===a?g.connectRightVertex(t,r,s):g.addRightEdges(t,r,s.Onext,a,a,!0)},g.addSentinel=function(t,e,n,r){var o=new p,i=t.mesh.makeEdge();i.Org.s=n,i.Org.t=r,i.Dst.s=e,i.Dst.t=r,t.event=i.Dst,o.eUp=i,o.windingNumber=0,o.inside=!1,o.fixUpperEdge=!1,o.sentinel=!0,o.dirty=!1,o.nodeUp=t.dict.insert(o)},g.initEdgeDict=function(t){t.dict=new f(t,g.edgeLeq);var e=t.bmax[0]-t.bmin[0],n=t.bmax[1]-t.bmin[1],r=t.bmin[0]-e,o=t.bmax[0]+e,i=t.bmin[1]-n,a=t.bmax[1]+n;g.addSentinel(t,r,o,i),g.addSentinel(t,r,o,a)},g.doneEdgeDict=function(t){for(var e,n=0;null!==(e=t.dict.min().key);)e.sentinel||(o(e.fixUpperEdge),o(1==++n)),o(0==e.windingNumber),g.deleteRegion(t,e)},g.removeDegenerateEdges=function(t){var e,n,r,o=t.mesh.eHead;for(e=o.next;e!==o;e=n)n=e.next,r=e.Lnext,c.vertEq(e.Org,e.Dst)&&e.Lnext.Lnext!==e&&(g.spliceMergeVertices(t,r,e),t.mesh.delete(e),r=(e=r).Lnext),r.Lnext===e&&(r!==e&&(r!==n&&r!==n.Sym||(n=n.next),t.mesh.delete(r)),e!==n&&e!==n.Sym||(n=n.next),t.mesh.delete(e))},g.initPriorityQ=function(t){var e,n,r,o=0;for(n=(r=t.mesh.vHead).next;n!==r;n=n.next)o++;for(o+=8,e=t.pq=new v(o,c.vertLeq),n=(r=t.mesh.vHead).next;n!==r;n=n.next)n.pqHandle=e.insert(n);return n===r&&(e.init(),!0)},g.donePriorityQ=function(t){t.pq=null},g.removeDegenerateFaces=function(t,e){var n,r,i;for(n=e.fHead.next;n!==e.fHead;n=r)r=n.next,i=n.anEdge,o(i.Lnext!==i),i.Lnext.Lnext===i&&(g.addWinding(i.Onext,i),t.mesh.delete(i));return!0},g.computeInterior=function(t){var e,n;if(g.removeDegenerateEdges(t),!g.initPriorityQ(t))return!1;for(g.initEdgeDict(t);null!==(e=t.pq.extractMin());){for(;null!==(n=t.pq.min())&&c.vertEq(n,e);)n=t.pq.extractMin(),g.spliceMergeVertices(t,e.anEdge,n.anEdge);g.sweepEvent(t,e)}return t.event=t.dict.min().key.eUp.Org,g.debugEvent(t),g.doneEdgeDict(t),g.donePriorityQ(t),!!g.removeDegenerateFaces(t,t.mesh)&&(t.mesh.check(),!0)},m.prototype={dot_:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},normalize_:function(t){var e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];o(e>0),e=Math.sqrt(e),t[0]/=e,t[1]/=e,t[2]/=e},longAxis_:function(t){var e=0;return Math.abs(t[1])>Math.abs(t[0])&&(e=1),Math.abs(t[2])>Math.abs(t[e])&&(e=2),e},computeNormal_:function(t){var e,n,r,o,i,a,s,u=[0,0,0],c=[0,0,0],l=[0,0,0],f=[0,0,0],h=[0,0,0],d=[null,null,null],v=[null,null,null],p=this.mesh.vHead;for(e=p.next,s=0;s<3;++s)o=e.coords[s],c[s]=o,v[s]=e,u[s]=o,d[s]=e;for(e=p.next;e!==p;e=e.next)for(s=0;s<3;++s)(o=e.coords[s])<c[s]&&(c[s]=o,v[s]=e),o>u[s]&&(u[s]=o,d[s]=e);if(s=0,u[1]-c[1]>u[0]-c[0]&&(s=1),u[2]-c[2]>u[s]-c[s]&&(s=2),c[s]>=u[s])return t[0]=0,t[1]=0,void(t[2]=1);for(a=0,n=v[s],r=d[s],l[0]=n.coords[0]-r.coords[0],l[1]=n.coords[1]-r.coords[1],l[2]=n.coords[2]-r.coords[2],e=p.next;e!==p;e=e.next)f[0]=e.coords[0]-r.coords[0],f[1]=e.coords[1]-r.coords[1],f[2]=e.coords[2]-r.coords[2],h[0]=l[1]*f[2]-l[2]*f[1],h[1]=l[2]*f[0]-l[0]*f[2],h[2]=l[0]*f[1]-l[1]*f[0],(i=h[0]*h[0]+h[1]*h[1]+h[2]*h[2])>a&&(a=i,t[0]=h[0],t[1]=h[1],t[2]=h[2]);a<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(l)]=1)},checkOrientation_:function(){var t,e,n,r,o=this.mesh.fHead,i=this.mesh.vHead;for(t=0,e=o.next;e!==o;e=e.next)if(!((r=e.anEdge).winding<=0))do{t+=(r.Org.s-r.Dst.s)*(r.Org.t+r.Dst.t),r=r.Lnext}while(r!==e.anEdge);if(t<0){for(n=i.next;n!==i;n=n.next)n.t=-n.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},projectPolygon_:function(){var t,e,n,r,o,i=this.mesh.vHead,a=[0,0,0],s=!1;for(a[0]=this.normal[0],a[1]=this.normal[1],a[2]=this.normal[2],0===a[0]&&0===a[1]&&0===a[2]&&(this.computeNormal_(a),s=!0),e=this.sUnit,n=this.tUnit,e[r=this.longAxis_(a)]=0,e[(r+1)%3]=1,e[(r+2)%3]=0,n[r]=0,n[(r+1)%3]=0,n[(r+2)%3]=a[r]>0?1:-1,t=i.next;t!==i;t=t.next)t.s=this.dot_(t.coords,e),t.t=this.dot_(t.coords,n);for(s&&this.checkOrientation_(),o=!0,t=i.next;t!==i;t=t.next)o?(this.bmin[0]=this.bmax[0]=t.s,this.bmin[1]=this.bmax[1]=t.t,o=!1):(t.s<this.bmin[0]&&(this.bmin[0]=t.s),t.s>this.bmax[0]&&(this.bmax[0]=t.s),t.t<this.bmin[1]&&(this.bmin[1]=t.t),t.t>this.bmax[1]&&(this.bmax[1]=t.t))},addWinding_:function(t,e){t.winding+=e.winding,t.Sym.winding+=e.Sym.winding},tessellateMonoRegion_:function(t,e){var n,r;for(n=e.anEdge,o(n.Lnext!==n&&n.Lnext.Lnext!==n);c.vertLeq(n.Dst,n.Org);n=n.Lprev);for(;c.vertLeq(n.Org,n.Dst);n=n.Lnext);for(r=n.Lprev;n.Lnext!==r;)if(c.vertLeq(n.Dst,r.Org)){for(;r.Lnext!==n&&(c.edgeGoesLeft(r.Lnext)||c.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);){r=t.connect(r.Lnext,r).Sym}r=r.Lprev}else{for(;r.Lnext!=n&&(c.edgeGoesRight(n.Lprev)||c.edgeSign(n.Dst,n.Org,n.Lprev.Org)>=0);){n=t.connect(n,n.Lprev).Sym}n=n.Lnext}for(o(r.Lnext!==n);r.Lnext.Lnext!==n;){r=t.connect(r.Lnext,r).Sym}return!0},tessellateInterior_:function(t){var e,n;for(e=t.fHead.next;e!==t.fHead;e=n)if(n=e.next,e.inside&&!this.tessellateMonoRegion_(t,e))return!1;return!0},discardExterior_:function(t){var e,n;for(e=t.fHead.next;e!==t.fHead;e=n)n=e.next,e.inside||t.zapFace(e)},setWindingNumber_:function(t,e,n){var r,o;for(r=t.eHead.next;r!==t.eHead;r=o)o=r.next,r.Rface.inside!==r.Lface.inside?r.winding=r.Lface.inside?e:-e:n?t.delete(r):r.winding=0},getNeighbourFace_:function(t){return t.Rface&&t.Rface.inside?t.Rface.n:-1},outputPolymesh_:function(t,e,n,i){var a,s,u,c,l,f=0,h=0;for(n>3&&t.mergeConvexFaces(n),a=t.vHead.next;a!==t.vHead;a=a.next)a.n=-1;for(s=t.fHead.next;s!=t.fHead;s=s.next)if(s.n=-1,s.inside){u=s.anEdge,c=0;do{-1===(a=u.Org).n&&(a.n=h,h++),c++,u=u.Lnext}while(u!==s.anEdge);o(c<=n),s.n=f,++f}for(this.elementCount=f,e==r.CONNECTED_POLYGONS&&(f*=2),this.elements=[],this.elements.length=f*n,this.vertexCount=h,this.vertices=[],this.vertices.length=h*i,this.vertexIndices=[],this.vertexIndices.length=h,a=t.vHead.next;a!==t.vHead;a=a.next)if(-1!=a.n){var d=a.n*i;this.vertices[d+0]=a.coords[0],this.vertices[d+1]=a.coords[1],i>2&&(this.vertices[d+2]=a.coords[2]),this.vertexIndices[a.n]=a.idx}var v=0;for(s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){u=s.anEdge,c=0;do{a=u.Org,this.elements[v++]=a.n,c++,u=u.Lnext}while(u!==s.anEdge);for(l=c;l<n;++l)this.elements[v++]=-1;if(e==r.CONNECTED_POLYGONS){u=s.anEdge;do{this.elements[v++]=this.getNeighbourFace_(u),u=u.Lnext}while(u!==s.anEdge);for(l=c;l<n;++l)this.elements[v++]=-1}}},outputContours_:function(t,e){var n,r,o,i=0,a=0;for(this.vertexCount=0,this.elementCount=0,n=t.fHead.next;n!==t.fHead;n=n.next)if(n.inside){o=r=n.anEdge;do{this.vertexCount++,r=r.Lnext}while(r!==o);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*e,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var s=0,u=0,c=0;for(i=0,n=t.fHead.next;n!==t.fHead;n=n.next)if(n.inside){a=0,o=r=n.anEdge;do{this.vertices[s++]=r.Org.coords[0],this.vertices[s++]=r.Org.coords[1],e>2&&(this.vertices[s++]=r.Org.coords[2]),this.vertexIndices[u++]=r.Org.idx,a++,r=r.Lnext}while(r!==o);this.elements[c++]=i,this.elements[c++]=a,i+=a}},addContour:function(t,e){var n,r;for(null===this.mesh&&(this.mesh=new u),t<2&&(t=2),t>3&&(t=3),n=null,r=0;r<e.length;r+=t)null==n?(n=this.mesh.makeEdge(),this.mesh.splice(n,n.Sym)):(this.mesh.splitEdge(n),n=n.Lnext),n.Org.coords[0]=e[r+0],n.Org.coords[1]=e[r+1],n.Org.coords[2]=t>2?e[r+2]:0,n.Org.idx=this.vertexIndexCounter++,n.winding=1,n.Sym.winding=-1},tesselate:function(t,e,n,o,i){if(this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,i&&(this.normal[0]=i[0],this.normal[1]=i[1],this.normal[2]=i[2]),this.windingRule=t,o<2&&(o=2),o>3&&(o=3),!this.mesh)return!1;this.projectPolygon_(),g.computeInterior(this);var a=this.mesh;return e==r.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),a.check(),e==r.BOUNDARY_CONTOURS?this.outputContours_(a,o):this.outputPolymesh_(a,e,n,o),!0}}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t};var n=Object.prototype.hasOwnProperty},function(t,e,n){t.exports=n(38)()},function(t,e){function n(t){return[t[0],t[1]]}function r(t,e){return[t,e]}t.exports=function(t){var e="number"==typeof(t=t||{}).recursion?t.recursion:8,o="number"==typeof t.epsilon?t.epsilon:1.1920929e-7,i="number"==typeof t.pathEpsilon?t.pathEpsilon:1,a="number"==typeof t.angleEpsilon?t.angleEpsilon:.01,s=t.angleTolerance||0,u=t.cuspLimit||0;return function(t,c,l,f,h,d){d||(d=[]);var v=i/(h="number"==typeof h?h:1);return function(t,i,c,l,f,h){f.push(n(t));var d=t[0],v=t[1],p=i[0],g=i[1],m=c[0],y=c[1],x=l[0],b=l[1];(function t(n,i,c,l,f,h,d,v,p,g,m){if(m>e)return;var y=Math.PI;var x=(n+c)/2;var b=(i+l)/2;var M=(c+f)/2;var _=(l+h)/2;var S=(f+d)/2;var w=(h+v)/2;var E=(x+M)/2;var C=(b+_)/2;var O=(M+S)/2;var k=(_+w)/2;var T=(E+O)/2;var L=(C+k)/2;if(m>0){var A,R,D=d-n,I=v-i,F=Math.abs((c-d)*I-(l-v)*D),U=Math.abs((f-d)*I-(h-v)*D);if(F>o&&U>o){if((F+U)*(F+U)<=g*(D*D+I*I)){if(s<a)return void p.push(r(T,L));var P=Math.atan2(h-l,f-c);if(A=Math.abs(P-Math.atan2(l-i,c-n)),R=Math.abs(Math.atan2(v-h,d-f)-P),A>=y&&(A=2*y-A),R>=y&&(R=2*y-R),A+R<s)return void p.push(r(T,L));if(0!==u){if(A>u)return void p.push(r(c,l));if(R>u)return void p.push(r(f,h))}}}else if(F>o){if(F*F<=g*(D*D+I*I)){if(s<a)return void p.push(r(T,L));if((A=Math.abs(Math.atan2(h-l,f-c)-Math.atan2(l-i,c-n)))>=y&&(A=2*y-A),A<s)return p.push(r(c,l)),void p.push(r(f,h));if(0!==u&&A>u)return void p.push(r(c,l))}}else if(U>o){if(U*U<=g*(D*D+I*I)){if(s<a)return void p.push(r(T,L));if((A=Math.abs(Math.atan2(v-h,d-f)-Math.atan2(h-l,f-c)))>=y&&(A=2*y-A),A<s)return p.push(r(c,l)),void p.push(r(f,h));if(0!==u&&A>u)return void p.push(r(f,h))}}else if((D=T-(n+d)/2)*D+(I=L-(i+v)/2)*I<=g)return void p.push(r(T,L))}t(n,i,x,b,E,C,T,L,p,g,m+1);t(T,L,O,k,S,w,d,v,p,g,m+1)})(d,v,p,g,m,y,x,b,f,h,0),f.push(n(l))}(t,c,l,f,d,v*=v),d}}},function(t,e,n){var r=n(40),o=n(41);t.exports=function(t,e){return t=r(t,e),t=o(t,e)},t.exports.radialDistance=r,t.exports.douglasPeucker=o},function(t,e){t.exports=function(t,e){if(t.length<=1)return t;for(var n,r,o,i,a,s=(e="number"==typeof e?e:1)*e,u=t[0],c=[u],l=1,f=t.length;l<f;l++)n=t[l],o=u,i=void 0,a=void 0,i=(r=n)[0]-o[0],a=r[1]-o[1],i*i+a*a>s&&(c.push(n),u=n);return u!==n&&c.push(n),c}},function(t,e){function n(t,e,n){var r=e[0],o=e[1],i=n[0]-r,a=n[1]-o;if(0!==i||0!==a){var s=((t[0]-r)*i+(t[1]-o)*a)/(i*i+a*a);s>1?(r=n[0],o=n[1]):s>0&&(r+=i*s,o+=a*s)}return(i=t[0]-r)*i+(a=t[1]-o)*a}t.exports=function(t,e){if(t.length<=1)return t;var r=(e="number"==typeof e?e:1)*e,o=t.length-1,i=[t[0]];return function t(e,r,o,i,a){for(var s,u=i,c=r+1;c<o;c++){var l=n(e[c],e[r],e[o]);l>u&&(s=c,u=l)}u>i&&(s-r>1&&t(e,r,s,i,a),a.push(e[s]),o-s>1&&t(e,s,o,i,a))}(t,0,o,r,i),i.push(t[o]),i}},function(t,e,n){"use strict";(function(e){var r=n(43),o=n(44),i=n(45);t.exports=function(t){var n,s,u=[],c=1;if("string"==typeof t)if(r[t])u=r[t].slice(),s="rgb";else if("transparent"===t)c=0,s="rgb",u=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var l=t.slice(1),f=l.length,h=f<=4;c=1,h?(u=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],4===f&&(c=parseInt(l[3]+l[3],16)/255)):(u=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],8===f&&(c=parseInt(l[6]+l[7],16)/255)),u[0]||(u[0]=0),u[1]||(u[1]=0),u[2]||(u[2]=0),s="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var d=n[1],v="rgb"===d,l=d.replace(/a$/,"");s=l;var f="cmyk"===l?4:"gray"===l?1:3;u=n[2].trim().split(/\s*,\s*/).map(function(t,e){if(/%$/.test(t))return e===f?parseFloat(t)/100:"rgb"===l?255*parseFloat(t)/100:parseFloat(t);if("h"===l[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==a[t])return a[t]}return parseFloat(t)}),d===l&&u.push(1),c=v?1:void 0===u[f]?1:u[f],u=u.slice(0,f)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(u=t.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),s=t.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(t))if(o(t)){var p=i(t.r,t.red,t.R,null);null!==p?(s="rgb",u=[p,i(t.g,t.green,t.G),i(t.b,t.blue,t.B)]):(s="hsl",u=[i(t.h,t.hue,t.H),i(t.s,t.saturation,t.S),i(t.l,t.lightness,t.L,t.b,t.brightness)]),c=i(t.a,t.alpha,t.opacity,1),null!=t.opacity&&(c/=100)}else(Array.isArray(t)||e.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(u=[t[0],t[1],t[2]],s="rgb",c=4===t.length?t[3]:1);else s="rgb",u=[t>>>16,(65280&t)>>>8,255&t];return{space:s,values:u,alpha:c}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,n(17))},function(t,e,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===r.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},function(t,e){t.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},function(t,e,n){"use strict";var r=n(47);t.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,n,r,o,i,a=t[0]/360,s=t[1]/100,u=t[2]/100;if(0===s)return[i=255*u,i,i];e=2*u-(n=u<.5?u*(1+s):u+s-u*s),o=[0,0,0];for(var c=0;c<3;c++)(r=a+1/3*-(c-1))<0?r++:r>1&&r--,i=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,o[c]=255*i;return o}},r.hsl=function(t){var e,n,r=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),u=s-a;return s===a?e=0:r===s?e=(o-i)/u:o===s?e=2+(i-r)/u:i===s&&(e=4+(r-o)/u),(e=Math.min(60*e,360))<0&&(e+=360),n=(a+s)/2,[e,100*(s===a?0:n<=.5?u/(s+a):u/(2-s-a)),100*n]}},function(t,e,n){"use strict";t.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},function(t,e){t.exports=function(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t}},function(t,e,n){"use strict";n.r(e);var r=n(2),o=n.n(r),i=n(1),a=n.n(i),s=n(7),u=n.n(s),c=n(6),l=n.n(c),f=n(4),h=n.n(f),d=n(11),v=n.n(d),p=n(9),g=n.n(p);function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float32Array,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n&&!(n instanceof e))throw new TypeError("Wrong buffer type.");if(null==t)return t;if(t instanceof e)return t;if(null==t[0]||null==t[0].length){if(n){for(var r=0;r<t.length;r++)n[r]=t[r];return n}return new e(t)}var o=t[0].length,i=t.length;n||(n=new e(o*i));for(var a=0,s=0;s<i;s++)for(var u=0;u<o;u++)n[a++]=t[s][u];return n}n(0).glMatrix.setMatrixArrayType(Array);var y={};function x(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!y[t]){if("function"!=typeof Image)return fetch(t,{method:"GET",mode:"cors",cache:"default"}).then(function(t){return t.blob()}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY"}).then(function(e){return y[t]=e,e})});var n=new Image;n.crossOrigin="anonymous",y[t]=new Promise(function(r){n.onload=function(){e&&"function"==typeof createImageBitmap?createImageBitmap(n,{imageOrientation:"flipY"}).then(function(e){y[t]=e,r(e)}):(y[t]=n,r(n))},n.src=t})}return Promise.resolve(y[t])}var b="#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvoid main() {\n  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.1);\n}";n(0).glMatrix.setMatrixArrayType(Array);var M={},_=Symbol("renderFrameID"),S={};function w(t){return E.apply(this,arguments)}function E(){return(E=g()(h.a.mark(function t(e){var n,r;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!S[e]){t.next=2;break}return t.abrupt("return",S[e]);case 2:return t.next=4,fetch(e);case 4:if(!((n=t.sent).status>=200&&n.status<300)){t.next=11;break}return t.next=8,n.text();case 8:return r=t.sent,S[e]=r,t.abrupt("return",r);case 11:return t.abrupt("return",null);case 12:case"end":return t.stop()}},t)}))).apply(this,arguments)}function C(t,e,n){return t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,e),e}var O={int:"1i",ivec2:"2i",ivec3:"3i",ivec4:"4i",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",mat2:"Matrix2fv",mat3:"Matrix3fv",mat4:"Matrix4fv",sampler2D:"sampler2D"},k=function(){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u()(this,t),this.options=Object.assign({},t.defaultOptions,r),this.canvas=e,this.options.webgl2?n=e.getContext("webgl2",this.options):(n=function(t,e){var n=function(t,e){for(var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],r=null,o=0;o<n.length;++o){try{r=t.getContext(n[o],e)}catch(t){}if(r)break}return r}(t,e);if(!n)throw new Error("Sorry, your browser doesn't support WebGL.");return n}(e,this.options),this.aia_ext=n.getExtension("ANGLE_instanced_arrays")),this.gl=n,n.viewport(0,0,e.width,e.height),n.clearColor(0,0,0,0),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),this.programs=[],this._events={}}var e,n,r;return l()(t,null,[{key:"addLibs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(M,t)}},{key:"FLOAT",value:function(t,e){return m(t,Float32Array,e)}},{key:"UNSIGNED_BYTE",value:function(t,e){return m(t,Uint8Array,e)}},{key:"UNSIGNED_SHORT",value:function(t,e){return m(t,Uint16Array,e)}},{key:"BYTE",value:function(t,e){return m(t,Int8Array,e)}},{key:"SHORT",value:function(t,e){return m(t,Int16Array,e)}}]),l()(t,[{key:"_declareUniform",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1f",o=this.gl,i=o.getUniformLocation(t,e),s=this;if("sampler2D"===r){var u=t._samplerMap,c=t._bindTextures;Object.defineProperty(t.uniforms,e,{get:function(){return n},set:function(t){n=t;var r=null!=u[e]?u[e]:c.length;c[r]=t,C(o,t,r),u[e]||(u[e]=r,o.uniform1i(i,r)),s.options.autoUpdate&&s.update()},configurable:!1,enumerable:!0})}else{var l=0===r.indexOf("Matrix"),f=!l&&/v$/.test(r),h=o["uniform".concat(r)].bind(o);Object.defineProperty(t.uniforms,e,{get:function(){return n},set:function(t){n=t,"number"==typeof t&&(t=[t]),l?h(i,!1,t):f?h(i,t):h.apply(void 0,[i].concat(a()(t))),s.options.autoUpdate&&s.update()},configurable:!1,enumerable:!0})}}},{key:"_draw",value:function(){var e=this,n=this.program;n.meshData.forEach(function(r,i){var a=r.positions,s=r.cells,u=r.instanceCount,c=r.cellsCount,l=r.attributes,f=r.uniforms,h=r.textureCoord,d=r.enableBlend,v=e.gl;if(d?v.enable(v.BLEND):v.disable(v.BLEND),v.bindBuffer(v.ARRAY_BUFFER,n._buffers.verticesBuffer),v.bufferData(v.ARRAY_BUFFER,a,v.STATIC_DRAW),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,n._buffers.cellsBuffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,s,v.STATIC_DRAW),l&&Object.values(l).forEach(function(t){var r=t.name,o=t.data,i=t.divisor;if(v.bindBuffer(v.ARRAY_BUFFER,n._buffers[r]),v.bufferData(v.ARRAY_BUFFER,o,v.STATIC_DRAW),null!=i){var a=v.getAttribLocation(n,r);v.enableVertexAttribArray(a),v.vertexAttribDivisor?v.vertexAttribDivisor(a,i):e.aia_ext&&e.aia_ext.vertexAttribDivisorANGLE(a,i)}}),f&&Object.entries(f).forEach(function(t){var n=o()(t,2),r=n[0],i=n[1];e.uniforms[r]=i}),n._enableTextures&&n._buffers.texCoordBuffer){var p=h||function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=[],r=t.length,o=0;o<r;o++)o%e<2&&n.push(.5*(t[o]+1));return n}(a,n._dimension);v.bindBuffer(v.ARRAY_BUFFER,n._buffers.texCoordBuffer),v.bufferData(v.ARRAY_BUFFER,t.FLOAT(p),v.STATIC_DRAW)}null!=u?v.drawElementsInstanced?v.drawElementsInstanced(v.TRIANGLES,c,v.UNSIGNED_SHORT,0,u):e.aia_ext&&e.aia_ext.drawElementsInstancedANGLE(v.TRIANGLES,c,v.UNSIGNED_SHORT,0,u):v.drawElements(v.TRIANGLES,c,v.UNSIGNED_SHORT,0)})}},{key:"deleteProgram",value:function(t){var e=this.gl;this.program===t&&(this.startRender=!1,this[_]&&(cancelAnimationFrame(this[_]),delete this[_]),e.useProgram(null));var n=this.programs.indexOf(t);n>=0&&this.programs.splice(n,1),function(t,e){var n=e._buffers;Object.values(n).forEach(function(e){t.deleteBuffer(e)}),e._buffers={}}(e,t),e.deleteProgram(t)}},{key:"setMeshData",value:function(e){var n=this;Array.isArray(e)||(e=[e]);var r=this.program;r.meshData=e.map(function(e){var i=e.positions,a=e.instanceCount,s=e.cells,u=e.cellsCount,c=e.attributes,l=e.uniforms,f=e.textureCoord,h=e.enableBlend,d={positions:t.FLOAT(i),cells:t.USHORT(s),uniforms:l,enableBlend:!!h,textureCoord:t.FLOAT(f)};if(d.cellsCount=u||d.cells.length,null!=a){if(!n.isWebGL2&&!n.aia_ext)throw new Error("Cannot use instanceCount in this rendering context, use webgl2 context instead.");d.instanceCount=a}if(c){var v={};Object.entries(c).forEach(function(e){var i=o()(e,2),a=i[0],s=i[1];if(r._attribute[a]){if("ignored"!==r._attribute[a]){var u=r._attribute[a],c=u.name,l=u.type,f=s.data||s;if(Array.isArray(f)&&(f=t[l](f)),v[a]={name:c,data:f},null!=s.divisor){if(!n.isWebGL2&&!n.aia_ext)throw new Error("Cannot use divisor in this rendering context, use webgl2 context instead.");v[a].divisor=s.divisor}}}else r._attribute[a]="ignored"}),d.attributes=v}return d}),this.options.autoUpdate&&this.update()}},{key:"createProgram",value:function(t,e){var n=this,r=/^\s*uniform\s+sampler2D/gm.test(t);null==t&&(t=b),null==e&&(e=r?"attribute vec4 a_vertexPosition;\nattribute vec2 a_vertexTextureCoord;\nvarying vec2 vTextureCoord;\n\nvoid main() {\n  gl_PointSize = 1.0;\n  gl_Position = a_vertexPosition;\n  vTextureCoord = a_vertexTextureCoord;\n}":"attribute vec3 a_vertexPosition;\n\nvoid main() {\n  gl_PointSize = 1.0;\n  gl_Position = vec4(a_vertexPosition, 1);\n}");var i=this.gl,a=function(t,e,n){var r=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var o="Vertex shader failed to compile.  The error log is:".concat(t.getShaderInfoLog(r));return console.error(o),-1}var i=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var a="Fragment shader failed to compile.  The error log is:".concat(t.getShaderInfoLog(i));return console.error(a),-1}var s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,i),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS)){var u="Shader program failed to link.  The error log is:".concat(t.getProgramInfoLog(s));return console.error(u),-1}return t.deleteShader(r),t.deleteShader(i),s}(i,e,t);a.shaderText={vertexShader:e,fragmentShader:t},a._buffers={},a._attribute={},a.uniforms={},a._samplerMap={},a._bindTextures=[],a._enableTextures=r;var s=new RegExp("attribute vec(\\d) ".concat(this.options.vertexPosition),"im"),u=e.match(s);u&&(a._dimension=Number(u[1]));if(u=e.match(/^\s*attribute (\w+?)(\d*) (\w+)/gim))for(var c=0;c<u.length;c++){var l=u[c].match(/^\s*attribute (\w+?)(\d*) (\w+)/im);if(l&&l[3]!==this.options.vertexPosition&&l[3]!==this.options.vertexTextureCoord){var f=o()(l,4),h=f[1],d=f[2],v=f[3];"mat"===h&&(d=Math.pow(d,2)),a._buffers[v]=i.createBuffer(),a._attribute[v]={name:v,type:h,size:Number(d)||1}}}var p=/^\s*uniform\s+(\w+)\s+(\w+)(\[\d+\])?/gm;return(u=(u=e.match(p)||[]).concat(t.match(p)||[])).forEach(function(t){var e=t.match(/^\s*uniform\s+(\w+)\s+(\w+)(\[\d+\])?/).slice(1),r=o()(e,3),i=r[0],s=r[1],u=r[2];u=!!u,0!==(i=O[i]).indexOf("Matrix")&&u&&(i+="v"),n._declareUniform(a,s,i)}),a._buffers.verticesBuffer=i.createBuffer(),a._buffers.cellsBuffer=i.createBuffer(),a._enableTextures&&(a._buffers.texCoordBuffer=i.createBuffer()),this.programs.push(a),a}},{key:"useProgram",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.startRender=!1,this[_]&&(cancelAnimationFrame(this[_]),delete this[_]);var n=this.gl;n.useProgram(t),this.program=t;var r=t._dimension;n.bindBuffer(n.ARRAY_BUFFER,t._buffers.verticesBuffer);var i=n.getAttribLocation(t,this.options.vertexPosition);if(n.vertexAttribPointer(i,r,n.FLOAT,!1,0,0),n.enableVertexAttribArray(i),t._enableTextures){n.bindBuffer(n.ARRAY_BUFFER,t._buffers.texCoordBuffer);var a=n.getAttribLocation(t,this.options.vertexTextureCoord);n.vertexAttribPointer(a,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(a)}if(Object.entries(t._attribute).forEach(function(r){var i=o()(r,2),a=i[0],s=i[1];if("ignored"!==s){var u=s.size,c=e[a]||{},l=!!c.normalize,f=c.type||"FLOAT",h=c.key||a;"UBYTE"===f&&(f="UNSIGNED_BYTE"),"USHORT"===f&&(f="UNSIGNED_SHORT"),s.type=f,h&&h!==a&&(t._attribute[h]=s),n.bindBuffer(n.ARRAY_BUFFER,t._buffers[a]);var d=n.getAttribLocation(t,a);n.vertexAttribPointer(d,u,n[f],l,0,0),n.enableVertexAttribArray(d)}}),!t.meshData){var s=[[-1,-1,0,1].slice(0,r),[1,-1,0,1].slice(0,r),[1,1,0,1].slice(0,r),[-1,1,0,1].slice(0,r)],u=[[0,1,3],[3,1,2]];this.setMeshData({positions:s,cells:u})}return t}},{key:"compileSync",value:function(t,e){var n={};function r(t){var e=[],o=(t=t.replace(/^\s*/gm,"")).match(/^#pragma\s+include\s+.*/gm);if(o){for(var i=0;i<o.length;i++){var a=o[i].match(/(?:<|")(.*)(?:>|")/);if(a){var s=0===a[0].indexOf("<")?"lib":"link",u=a[1];if("graph"===u&&(u="graphics"),n[u])e.push("/* included ".concat(u," */"));else if(n[u]=!0,"lib"===s){var c=r(M[u]);e.push(c)}else if("link"===s)throw new Error("Cannot load external links synchronously. Use compile instead of compileSync.")}}e.forEach(function(e){t=t.replace(/^#pragma\s+include\s+.*/m,e)})}return t}var o=r(t=t||b),i=e?r(e):null;return this.createProgram(o,i)}},{key:"compile",value:(r=g()(h.a.mark(function t(e,n){var r,o,i,a,s,u;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(){return(i=g()(h.a.mark(function t(e){var n,i,a,s,u,c,l,f,d;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e.replace(/^\s*/gm,""),n=[],!(i=e.match(/^#pragma\s+include\s+.*/gm))){t.next=36;break}a=0;case 5:if(!(a<i.length)){t.next=35;break}if(s=i[a],!(u=s.match(/(?:<|")(.*)(?:>|")/))){t.next=32;break}if(c=0===u[0].indexOf("<")?"lib":"link","graph"===(l=u[1])&&(l="graphics"),r[l]){t.next=31;break}if(r[l]=!0,"lib"!==c){t.next=21;break}return t.next=17,o(M[l]);case 17:f=t.sent,n.push(f),t.next=29;break;case 21:if("link"!==c){t.next=29;break}return t.next=24,w(l);case 24:return d=t.sent,t.next=27,o(d);case 27:d=t.sent,n.push(d);case 29:t.next=32;break;case 31:n.push("/* included ".concat(l," */"));case 32:a++,t.next=5;break;case 35:n.forEach(function(t){e=e.replace(/^#pragma\s+include\s+.*/m,t)});case 36:return t.abrupt("return",e);case 37:case"end":return t.stop()}},t)}))).apply(this,arguments)},o=function(t){return i.apply(this,arguments)},e=e||b,r={},t.next=6,o(e);case 6:if(a=t.sent,!n){t.next=13;break}return t.next=10,o(n);case 10:t.t0=t.sent,t.next=14;break;case 13:t.t0=null;case 14:return s=t.t0,u=this.createProgram(a,s),t.abrupt("return",u);case 17:case"end":return t.stop()}},t,this)})),function(t,e){return r.apply(this,arguments)})},{key:"load",value:(n=g()(h.a.mark(function t(e){var n,r=arguments;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:null,t.next=3,w(e);case 3:if(e=t.sent,!n){t.next=8;break}return t.next=7,w(n);case 7:n=t.sent;case 8:return t.abrupt("return",this.compile(e,n));case 9:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"createTexture",value:function(t){var e=this,n=this.gl;n.activeTexture(n.TEXTURE15);var r=n.createTexture();return n.bindTexture(n.TEXTURE_2D,r),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r._img=t,r.delete=function(){e.deleteTexture(r)},r}},{key:"deleteTexture",value:function(t){var e=t._img;this.gl.deleteTexture(t),"function"==typeof e.close&&e.close()}},{key:"loadTexture",value:(e=g()(h.a.mark(function t(e){var n,r,o,i,a=arguments;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=n.useImageBitmap,o=void 0===r||r,t.next=3,x(e,o);case 3:return i=t.sent,t.abrupt("return",this.createTexture(i));case 5:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearBuffer,n=void 0===e||e;this.startRender=!0;var r=this.gl,o=this.program;o||(o=this.createProgram(),this.useProgram(o)),n&&r.clear(r.COLOR_BUFFER_BIT);var i=this[_];this._draw(),this[_]===i&&(this[_]=null)}},{key:"update",value:function(){this.startRender&&null==this[_]&&(this[_]=requestAnimationFrame(this.render.bind(this)))}},{key:"isWebGL2",get:function(){return"undefined"!=typeof WebGL2RenderingContext&&this.gl instanceof WebGL2RenderingContext}},{key:"enableTextures",get:function(){return this.program&&this.program._enableTextures}},{key:"uniforms",get:function(){var t=this.program;if(!t||!t.uniforms)throw Error("No avaliable program.");return t.uniforms}}]),t}();v()(k,"defaultOptions",{preserveDrawingBuffer:!0,autoUpdate:!0,vertexPosition:"a_vertexPosition",vertexTextureCoord:"a_vertexTextureCoord",webgl2:!1}),v()(k,"UBYTE",k.UNSIGNED_BYTE),v()(k,"USHORT",k.UNSIGNED_SHORT),v()(k,"fetchShader",w),n(0).glMatrix.setMatrixArrayType(Array);var T=k,L=n(0),A=n(5);n(0).glMatrix.setMatrixArrayType(Array);var R=Symbol("transform"),D=function(){function t(e,n){u()(this,t),this.context=e.getContext("2d"),this.options=n,this[R]=[1,0,0,1,0,0]}var e;return l()(t,[{key:"createTexture",value:function(t){return{_img:t}}},{key:"loadTexture",value:(e=g()(h.a.mark(function t(e){var n;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e,!1);case 2:return n=t.sent,t.abrupt("return",this.createTexture(n));case 4:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"deleteTexture",value:function(t){return t}},{key:"clear",value:function(t,e,n,r){var o=this.context;t=t||0,e=e||0,n=n||o.canvas.width-t,r=r||o.canvas.height-e,o.clearRect(t,e,n,r)}},{key:"drawMeshes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clear,i=void 0!==r&&r,s=this.context;i&&s.clearRect(0,0,s.canvas.width,s.canvas.height);var u=null,c=s.canvas,l=c.width,f=c.height,h=t.length;t.forEach(function(t,n){var r,i,c,d,v;if(t._cloudOptions){var p=o()(t._cloudOptions,5);r=p[0],i=p[1],c=p[2],d=p[3],v=p[4],t=t.mesh}var g,m=t.filter;(v&&(m=m?"".concat(m," ").concat(v):v),u&&u!==m&&(Object(A.a)(e.filterBuffer,u),s.drawImage(e.filterBuffer.canvas,0,0,l,f),e.filterBuffer.clearRect(0,0,l,f),u=null),m)?(e.filterBuffer=e.filterBuffer||Object(A.b)(l,f).getContext("2d"),e.filterBuffer.save(),(g=e.filterBuffer).transform.apply(g,a()(e[R])),Object(A.c)(t,e.filterBuffer,!1,r,i,c,d),e.filterBuffer.restore(),n===h-1?(Object(A.a)(e.filterBuffer,m),s.drawImage(e.filterBuffer.canvas,0,0,l,f),e.filterBuffer.clearRect(0,0,l,f)):u=m):(s.save(),s.transform.apply(s,a()(e[R])),Object(A.c)(t,s,!1,r,i,c,d),s.restore())})}},{key:"setTransform",value:function(t){this[R]=t}}]),t}();function I(t){var e=[],n=[],r=[],o=[],i=0,s=t[0]&&t[0].uniforms||{};t.forEach(function(t){t&&(e.push.apply(e,a()(t.positions)),r.push.apply(r,a()(t.cells.map(function(t){return t.map(function(t){return t+i})}))),o.push.apply(o,a()(t.attributes.a_color)),t.textureCoord&&n.push.apply(n,a()(t.textureCoord)),i+=t.positions.length)});var u={positions:e,cells:r,attributes:{a_color:o},uniforms:s};return n.length&&(u.textureCoord=n),u}n(0).glMatrix.setMatrixArrayType(Array),n(0).glMatrix.setMatrixArrayType(Array);var F=h.a.mark(G);function U(t,e){var n=t.uniforms||{},r=e.uniforms||{},o=Object.keys(n),i=Object.keys(r);return o.length===i.length&&o.every(function(t){var e=n[t],o=r[t];if(e===o)return!0;if(e.length&&o.length&&e.length===o.length){for(var i=0;i<e.length;i++)if(e[i]!==o[i])return!1;return!0}return!1})}var P={};function q(t,e){if(t.length){var n=I(t),r=n.positions.length*n.positions[0].length;!P.positions||P.positions.length<r?(P.positions=T.FLOAT(n.positions),n.positions=P.positions):n.positions=T.FLOAT(n.positions,P.positions);var o=n.cells.length*n.cells[0].length;!P.cells||P.cells.length<o?(P.cells=T.USHORT(n.cells),n.cells=P.cells):(n.cellsCount=o,n.cells=T.USHORT(n.cells,P.cells));var i=n.textureCoord.length*n.textureCoord[0].length;n.textureCoord&&(!P.textureCoord||P.textureCoord.length<i?(P.textureCoord=T.FLOAT(n.textureCoord),n.textureCoord=P.textureCoord):n.textureCoord=T.FLOAT(n.textureCoord,P.textureCoord)),n.enableBlend=e,t[0].filterCanvas&&(n.filterCanvas=!0);var a=n.attributes.a_color.length*n.attributes.a_color[0].length;return!P.a_color||P.a_color.length<a?(P.a_color=T.UBYTE(n.attributes.a_color),n.attributes.a_color={data:P.a_color}):n.attributes.a_color={data:T.UBYTE(n.attributes.a_color,P.a_color)},n.packIndex=t[0].packIndex,n.packLength=t.length,t.length=0,n}}function G(t,e){var n,r,o,i,a,s,u,c,l,f=arguments;return h.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:n=f.length>2&&void 0!==f[2]?f[2]:t.options.bufferSize,r=[],o=0,i=!1,a=0;case 5:if(!(a<e.length)){h.next=41;break}if(s=e[a].meshData,u=0,!s||!s.positions.length){h.next=31;break}if(s.packIndex=a,(c=e[a].filterCanvas)&&(s.filterCanvas=!0),u=s.positions.length,!(c||o+u>n)){h.next=21;break}if(!r.length){h.next=17;break}return h.next=17,q(r,i);case 17:o=0,i=!1,h.next=29;break;case 21:if(!o){h.next=29;break}if(l=e[a-1].meshData,!e[a-1].filterCanvas&&U(l,s)){h.next=29;break}if(!r.length){h.next=27;break}return h.next=27,q(r,i);case 27:o=0,i=!1;case 29:r.push(s),i=i||s.enableBlend;case 31:if(a!==e.length-1){h.next=37;break}if(!r.length){h.next=35;break}return h.next=35,q(r,i);case 35:h.next=38;break;case 37:o+=u;case 38:a++,h.next=5;break;case 41:case"end":return h.stop()}},F)}var N=n(12),B=n(8);n(0).glMatrix.setMatrixArrayType(Array);var j={};function V(t,e){var n=e.font,r=e.fillColor,o=e.strokeColor,i=[t,n,String(r),String(o)].join("###"),s=j[i];if(s)return s;var u=(s=Object(A.b)(1,1)).getContext("2d");u.save(),u.font=n;var c=u.measureText(t).width;u.restore();var l=Object(N.a)(n).pxLineHeight;r||o||(r="#000");var f=u.canvas;f.width=Math.ceil(c),f.height=Math.ceil(l),u.save(),u.font=n,u.textAlign="center",u.textBaseline="middle";var h=f.height/2,d=f.width/2;if(r){if(Array.isArray(r))r=Object(B.a)(r);else if(r.vector){var v,p=r,g=p.vector,m=p.colors;v=6===g.length?u.createRadialGradient.apply(u,a()(g)):u.createLinearGradient.apply(u,a()(g)),m.forEach(function(t){var e=t.offset,n=t.color;v.addColorStop(e,n)}),r=v}u.fillStyle=r,u.fillText(t,d,h)}if(o){if(Array.isArray(o))o=Object(B.a)(o);else if(o.vector){var y,x=o,b=x.vector,M=x.colors;y=6===b.length?u.createRadialGradient.apply(u,a()(b)):u.createLinearGradient.apply(u,a()(b)),M.forEach(function(t){var e=t.offset,n=t.color;y.addColorStop(e,n)}),o=y}u.strokeStyle=o,u.strokeText(t,d,h)}return u.restore(),j[i]=s,s}var H=n(13),z=n.n(H),W=n(15),Y=n.n(W),X=n(3);n(0).glMatrix.setMatrixArrayType(Array);var Q=X.create(),Z=X.create(),$=X.create(),J=X.create(),K=X.create(),tt=X.create(),et=n(28),nt=et.computeMiter,rt=et.normal,ot=et.direction;function it(t){if(!(this instanceof it))return new it(t);t=t||{},this.miterLimit=Y()(t.miterLimit,10),this.thickness=Y()(t.thickness,1),this.join=t.join||"miter",this.cap=t.cap||"butt",this._normal=null,this._lastFlip=-1,this._started=!1}function at(t,e,n,r){var o=t.positions;X.scaleAndAdd(Q,e,n,-r),o.push(X.clone(Q)),X.scaleAndAdd(Q,e,n,r),o.push(X.clone(Q))}it.prototype.mapThickness=function(t,e,n){return this.thickness},it.prototype.build=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={positions:[],cells:[]};if((t=a()(t)).length<=1)return n;var r=null;if(e){var i=t,s=o()(i,2),u=s[0],c=s[1],l=[c[0]-u[0],c[1]-u[1]];r=X.scaleAndAdd(X.create(),u,l,1e-7),t.unshift(a()(t[t.length-2]))}var f=t.length;this._lastFlip=-1,this._started=!1,this._normal=null;for(var h=1,d=0;h<f;h++){var v=t[h-1],p=t[h],g=h<t.length-1?t[h+1]:null,m=this.mapThickness(p,h,t),y=this._seg(n,d,v,p,g,m/2,e,r);d+=y}return e&&(n.positions=n.positions.slice(2),n.cells=n.cells.slice(2).map(function(t){var e=o()(t,3);return[e[0]-2,e[1]-2,e[2]-2]})),n},it.prototype._seg=function(t,e,n,r,o,i,a,s){var u=0,c=t.cells,l=t.positions,f="square"===this.cap,h="bevel"===this.join;if(ot($,r,n),this._normal||(this._normal=X.create(),rt(this._normal,$)),this._started||(this._started=!0,f&&(X.scaleAndAdd(Z,n,$,-i),n=Z),at(t,n,this._normal,i)),c.push([e+0,e+1,e+2]),a||o){ot(J,o||s,r);var d=nt(K,tt,$,J,i);d=Math.min(d,1e20);var v=X.dot(K,this._normal)<0?-1:1,p=h;if(!p&&"miter"===this.join)d/i>this.miterLimit&&(d=this.miterLimit*i,p=!0);p?(X.scaleAndAdd(Q,r,this._normal,-i*v),l.push(X.clone(Q)),X.scaleAndAdd(Q,r,tt,d*v),l.push(X.clone(Q)),c.push(this._lastFlip!==-v?[e,e+2,e+3]:[e+2,e+1,e+3]),o&&(rt(Q,J),X.copy(this._normal,Q),X.scaleAndAdd(Q,r,Q,-i*v),l.push(X.clone(Q)),c.push([e+2,e+3,e+4]),u++),u+=2):(at(t,r,tt,d),c.push(1===this._lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3]),v=-1,X.copy(this._normal,tt),u+=2),this._lastFlip=v}else rt(this._normal,$),f&&(X.scaleAndAdd(Z,r,$,i),r=Z),at(t,r,this._normal,i),c.push(1===this._lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3]),u+=2;return u};var st=it;function ut(t,e,n,r){var i=o()(t,3),a=i[0],s=i[1],u=i[2];return a=2*a/e-1,s=1-2*s/n,Number.isFinite(r)?[a,s,u=2*u/r-1]:[a,s]}function ct(t,e){var n=o()(t,3),r=n[0],i=n[1],a=n[2],s=void 0===a?0:a,u=o()(e,3),c=u[0],l=u[1],f=u[2],h=void 0===f?0:f;return Math.hypot(c-r,l-i,h-s)}n(0).glMatrix.setMatrixArrayType(Array);var lt=n(10);function ft(t,e){var n=[],r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],v=t[11],p=t[12],g=t[13],m=t[14],y=t[15],x=t[16],b=t[17],M=t[18],_=t[19],S=e[0],w=e[1],E=e[2],C=e[3],O=e[4];return n[0]=S*r+w*u+E*d+C*y,n[1]=S*o+w*c+E*v+C*x,n[2]=S*i+w*l+E*p+C*b,n[3]=S*a+w*f+E*g+C*M,n[4]=S*s+w*h+E*m+C*_+O,S=e[5],w=e[6],E=e[7],C=e[8],O=e[9],n[5]=S*r+w*u+E*d+C*y,n[6]=S*o+w*c+E*v+C*x,n[7]=S*i+w*l+E*p+C*b,n[8]=S*a+w*f+E*g+C*M,n[9]=S*s+w*h+E*m+C*_+O,S=e[10],w=e[11],E=e[12],C=e[13],O=e[14],n[10]=S*r+w*u+E*d+C*y,n[11]=S*o+w*c+E*v+C*x,n[12]=S*i+w*l+E*p+C*b,n[13]=S*a+w*f+E*g+C*M,n[14]=S*s+w*h+E*m+C*_+O,S=e[15],w=e[16],E=e[17],C=e[18],O=e[19],n[15]=S*r+w*u+E*d+C*y,n[16]=S*o+w*c+E*v+C*x,n[17]=S*i+w*l+E*p+C*b,n[18]=S*a+w*f+E*g+C*M,n[19]=S*s+w*h+E*m+C*_+O,n}function ht(t){var e=.212*(t=Object(lt.a)(0,1,t)),n=.714*t,r=.074*t;return[e+1-t,n,r,0,0,e,n+1-t,r,0,0,e,n,r+1-t,0,0,0,0,0,1,0]}function dt(t){return[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0]}function vt(t){var e=.212*(1-(t=Object(lt.a)(0,1,t))),n=.714*(1-t),r=.074*(1-t);return[e+t,n,r,0,0,e,n+t,r,0,0,e,n,r+t,0,0,0,0,0,1,0]}function pt(t){var e=.5*(1-t);return[t,0,0,0,e,0,t,0,0,e,0,0,t,0,e,0,0,0,1,0]}function gt(t){var e=1-2*t;return[e,0,0,0,t,0,e,0,0,t,0,0,e,0,t,0,0,0,1,0]}function mt(t){return[1-.607*t,.769*t,.189*t,0,0,.349*t,1-.314*t,.168*t,0,0,.272*t,.534*t,1-.869*t,0,0,0,0,0,1,0]}function yt(t){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,t,0]}function xt(t){var e=t/180*Math.PI,n=Math.cos(e),r=Math.sin(e);return[.213+.787*n+-.213*r,.715+-.715*n+-.715*r,.072+-.072*n+.928*r,0,0,.213+-.213*n+.143*r,.715+n*(1-.715)+.14*r,.072+-.072*n+-.283*r,0,0,.213+-.213*n+-.787*r,.715+-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,0,1,0]}function bt(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}function Mt(t){if(null!=t.totalLength)return t.totalLength;var e=0;return t.forEach(function(t){for(var n=t[0],r=1;r<t.length;r++){var o=t[r];e+=ct(n,o),n=o}}),t.totalLength=e,e}function _t(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e=Number(e),!Number.isFinite(e))throw new TypeError("Failed to execute 'getPointAtLength' on figure: The provided float value is non-finite.");if(e<=0)throw new TypeError("Length must > 0");if(e>=Mt(t)){var r=t[t.length-1],o=r[r.length-2],i=r[r.length-1],s=Math.atan2(i[1]-o[1],i[0]-o[0]);return{current:t.map(function(t){return a()(t)}),point:{x:i[0],y:i[1],angle:s}}}for(var u=[],c=0;c<t.length;c++){u[c]=[];for(var l=t[c],f=l[0],h=1;h<l.length;h++){var d=l[h],v=ct(f,d);if(e<v){var p=e/v,g=Math.atan2(d[1]-f[1],d[0]-f[0]),m={x:f[0]*(1-p)+d[0]*p,y:f[1]*(1-p)+d[1]*p,angle:g};if(u[c].push(f),e>0&&u[c].push([m.x,m.y]),!n)return{current:u,point:m};for(var y=[],x=c;c<t.length;c++){for(y[c-x]=[],c===x&&y[0].push([m.x,m.y]);h<l.length;h++)y[c-x].push(l[h]);h=0}return{current:u,point:m,rest:y}}e-=v,u[c].push(f),f=d}}}function St(t,e){if(e=Number(e),!Number.isFinite(e))throw new TypeError("Failed to execute 'getPointAtLength' on figure: The provided float value is non-finite.");if(e<=0){var n=t[0][0],r=t[0][1],o=Math.atan2(r[1]-n[1],r[0]-n[0]);return{x:n[0],y:n[1],angle:o}}return _t(t,e,!1).point}n(0).glMatrix.setMatrixArrayType(Array),n(0).glMatrix.setMatrixArrayType(Array),n(0).glMatrix.setMatrixArrayType(Array);var wt=n(18),Et=n.n(wt),Ct=n(14),Ot=n.n(Ct),kt=n(19),Tt=n.n(kt);function Lt(t){var e=Tt()(t);if(!e||!e.length)throw new TypeError("Invalid color value.");return[e[0]/255,e[1]/255,e[2]/255,e[3]]}n(0).glMatrix.setMatrixArrayType(Array),n(0).glMatrix.setMatrixArrayType(Array);var At=Symbol("mesh"),Rt=Symbol("contours"),Dt=Symbol("stroke"),It=Symbol("fill"),Ft=Symbol("bound"),Ut=Symbol("strokeColor"),Pt=Symbol("fillColor"),qt=Symbol("transform"),Gt=Symbol("uniforms"),Nt=Symbol("texOptions"),Bt=Symbol("blend"),jt=Symbol("applyTexture"),Vt=Symbol("applyTransform"),Ht=Symbol("gradient"),zt=Symbol("filter");function Wt(t,e){for(var n=o()(e[1],2),r=n[0],i=n[1],a=0;a<t.length;a++){var s=t[a];s[0]=2*s[0]/r-1,s[1]=2*s[1]/i-1}}function Yt(t,e,n,r,i){var a=function(t,e,n,r){var i=o()(t,3),a=i[0],s=i[1],u=i[2];return a=.5*(a+1)*e,s=.5*(1-s)*n,Number.isFinite(r)?[a,s,u=.5*(u+1)*r]:[a,s]}(t,n,r),s=o()(a,2),u=s[0],c=s[1];return t[0]=u*e[0]+c*e[2]+e[4],t[1]=u*e[1]+c*e[3]+e[5],i&&(t[1]=r-t[1]),t}function Xt(t,e,n){var r=o()(t,2),i=r[0],a=r[1],s=o()(e,4),u=s[0],c=s[1],l=s[2],f=s[3],h=n.scale;n.repeat;return h||(i/=l,a=1-(1-a)/f,i-=u,a+=c),[i,a]}var Qt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:300,height:150},r=n.width,o=n.height;u()(this,t),this[Dt]=null,this[It]=null,this[Ft]=[[0,0],[r,o]],this[qt]=[1,0,0,1,0,0],this[Gt]={u_opacity:1},this[zt]=[],this[Bt]=null,this.contours=e.contours}return l()(t,[{key:"getPointAtLength",value:function(t){return St(this[Rt],t)}},{key:"getTotalLength",value:function(){return Mt(this[Rt])}},{key:Vt,value:function(t,e){for(var n=t.positions,r=o()(this[Ft][1],2),i=r[0],a=r[1],s=0;s<n.length;s++){Yt(n[s],e,i,a,!0)}var u=this[Gt].u_radialGradientVector;if(u){var c=o()(u,5),l=c[0],f=c[1],h=c[3],d=c[4];f=a-f,d=a-d,u[0]=l*e[0]+f*e[2]+e[4],u[1]=a-(l*e[1]+f*e[3]+e[5]),u[3]=h*e[0]+d*e[2]+e[4],u[4]=a-(h*e[1]+d*e[3]+e[5]),this[Gt].u_radialGradientVector=u}Wt(n,this[Ft])}},{key:jt,value:function(t,e,n){var r=this,i=this[Gt].u_texSampler;if(i){var a=i._img,s=a.width,u=a.height,c=this[qt],l=e.srcRect,f=e.rect||[0,0];null==f[2]&&(f[2]=l?l[2]:s),null==f[3]&&(f[3]=l?l[3]:u);var h=o()(this[Ft][1],2),d=h[0],v=h[1];if(n&&!bt(c)){var p=L.mat2d.invert(Array.of(0,0,0,0,0,0),c);t.textureCoord=t.positions.map(function(t){var e=o()(t,3),n=e[0],i=e[1];if(e[2]>0){var a=Yt([n,i],p,d,v,!0),s=o()(a,2);n=s[0],i=s[1];var u=[n/d,i/v];return Xt([n=u[0],i=u[1]],[f[0]/f[2],f[1]/f[3],f[2]/d,f[3]/v],r[Nt])}return[0,0]})}else t.textureCoord=t.positions.map(function(t){var e=o()(t,3),n=e[0],i=e[1];if(e[2]>0){var a=[.5*(n+1),.5*(i+1)];return Xt([n=a[0],i=a[1]],[f[0]/f[2],f[1]/f[3],f[2]/d,f[3]/v],r[Nt])}return[0,0]});if(l){var g=[l[0]/s,l[1]/u,l[2]/s,l[3]/u];this[Gt].u_srcRect=g}e.repeat?this[Gt].u_repeat=1:this[Gt].u_repeat=0}}},{key:"accurate",value:function(t){if(this.contours&&this.contours.path){var e=this.contours.simplify,n=function(t,e,n){var r=Ot()(t,e,n);return r.path=t,r.simplify=n,r.scale=e,r}(this.contours.path,t,e);this[At]=null,this[Rt]=n}}},{key:"setResolution",value:function(t){var e=t.width,n=t.height;this[At]=null,this[Ft][1][0]=e,this[Ft][1][1]=n}},{key:"setStroke",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.thickness,n=void 0===e?1:e,r=t.cap,o=void 0===r?"butt":r,i=t.join,a=void 0===i?"miter":i,s=t.miterLimit,u=void 0===s?10:s,c=t.color,l=void 0===c?[0,0,0,0]:c,f=t.lineDash,h=void 0===f?null:f,d=t.lineDashOffset,v=void 0===d?0:d;return this[At]=null,this[Dt]=st({thickness:n,cap:o,join:a,miterLimit:u}),"string"==typeof l&&(l=Lt(l)),this[Ut]=l,this[Dt].lineDash=h,this[Dt].lineDashOffset=v,this}},{key:"setFill",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.delaunay,n=void 0===e||e,r=t.clean,o=void 0===r||r,i=t.randomization,a=void 0===i?0:i,s=t.color,u=void 0===s?[0,0,0,0]:s;return this[At]=null,this[It]={delaunay:n,clean:o,randomization:a},"string"==typeof u&&(u=Lt(u)),this[Pt]=u,this}},{key:"setTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this[It]||this.setFill(),this.setUniforms({u_texFlag:1,u_texSampler:t}),this[Nt]=e,this[At]&&this[jt](this[At],e,!0),this}},{key:"setLinearGradient",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vector,n=t.colors,r=t.type,o=void 0===r?"fill":r;if(4!==e.length)throw new TypeError("Invalid linearGradient.");this.setGradient({vector:e,colors:n,type:o})}},{key:"setRadialGradient",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vector,n=t.colors,r=t.type,o=void 0===r?"fill":r;if(6!==e.length)throw new TypeError("Invalid radialGradient.");this.setGradient({vector:e,colors:n,type:o})}},{key:"setGradient",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vector,n=t.colors,r=t.type,i=void 0===r?"fill":r;n=n.map(function(t){var e=t.offset,n=t.color;return"string"==typeof n&&(n=Lt(n)),{offset:e,color:n}}),this[Ht]=this[Ht]||{},this[Ht][i]={vector:e,colors:n},n.sort(function(t,e){return t.offset-e.offset});var s,u=[];n.forEach(function(t){var e=t.offset,n=t.color;u.push.apply(u,[e].concat(a()(n)))}),s=4===e.length?[e[0],e[1],0,e[2],e[3],0]:a()(e);var c=o()(this[Ft][1],2),l=c[1];return s[1]=l-s[1],s[4]=l-s[4],this[Gt].u_radialGradientVector=s,this[Gt].u_colorSteps=u,"fill"===i&&(this[Gt].u_gradientType=1),this}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this[Gt],t),this}},{key:"setTransform",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this[qt];if(!L.mat2d.equals(e,r)){this[qt]=e;var o=this.transformScale/this.contours.scale;(o>1.5||o<.67)&&this.accurate(this.transformScale),this[At]&&(e=L.mat2d.multiply(Array.of(0,0,0,0,0,0),e,L.mat2d.invert(Array.of(0,0,0,0,0,0),r)),this[Vt](this[At],e))}return this}},{key:"transform",value:function(){for(var t=this[qt],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this[qt]=L.mat2d.multiply(Array.of(0,0,0,0,0,0),n,t);var o=this.transformScale/this.contours.scale;return(o>1.5||o<.67)&&this.accurate(this.transformScale),this[At]&&this[Vt](this[At],n),this}},{key:"translate",value:function(t,e){var n=L.mat2d.create();return n=L.mat2d.translate(Array.of(0,0,0,0,0,0),n,[t,e]),this.transform.apply(this,a()(n))}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=o()(e,2),r=n[0],i=n[1],s=L.mat2d.create();return s=L.mat2d.translate(Array.of(0,0,0,0,0,0),s,[r,i]),s=L.mat2d.rotate(Array.of(0,0,0,0,0,0),s,t),s=L.mat2d.translate(Array.of(0,0,0,0,0,0),s,[-r,-i]),this.transform.apply(this,a()(s))}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=o()(n,2),i=r[0],s=r[1],u=L.mat2d.create();return u=L.mat2d.translate(Array.of(0,0,0,0,0,0),u,[i,s]),u=L.mat2d.scale(Array.of(0,0,0,0,0,0),u,[t,e]),u=L.mat2d.translate(Array.of(0,0,0,0,0,0),u,[-i,-s]),this.transform.apply(this,a()(u))}},{key:"skew",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=o()(n,2),i=r[0],s=r[1],u=L.mat2d.create();return u=L.mat2d.translate(Array.of(0,0,0,0,0,0),u,[i,s]),u=L.mat2d.multiply(Array.of(0,0,0,0,0,0),u,L.mat2d.fromValues(1,Math.tan(e),Math.tan(t),1,0,0)),u=L.mat2d.translate(Array.of(0,0,0,0,0,0),u,[-i,-s]),this.transform.apply(this,a()(u))}},{key:"clearFilter",value:function(){return this.setColorTransform(null),this[zt].length=0,this}},{key:"setColorTransform",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return null===e[0]?this.setUniforms({u_filterFlag:0,u_colorMatrix:0}):this.setUniforms({u_filterFlag:1,u_colorMatrix:e}),this}},{key:"transformColor",value:function(){for(var t=this.uniforms.u_colorMatrix,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=t?ft(t,n):n,this.setColorTransform.apply(this,a()(t)),this}},{key:"blur",value:function(t){return this[zt].push("blur(".concat(t,"px)")),this}},{key:"brightness",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this[zt].push("brightness(".concat(100*t,"%)")),this.transformColor.apply(this,a()(dt(t)))}},{key:"contrast",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this[zt].push("contrast(".concat(100*t,"%)")),this.transformColor.apply(this,a()(pt(t)))}},{key:"dropShadow",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0,1];return Array.isArray(r)&&(r=Object(B.a)(r)),this[zt].push("drop-shadow(".concat(t,"px ").concat(e,"px ").concat(n,"px ").concat(r,")")),this}},{key:"grayscale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this[zt].push("grayscale(".concat(100*t,"%)")),this.transformColor.apply(this,a()(ht(t)))}},{key:"hueRotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this[zt].push("hue-rotate(".concat(t,"deg)")),this.transformColor.apply(this,a()(xt(t)))}},{key:"invert",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this[zt].push("invert(".concat(100*t,"%)")),this.transformColor.apply(this,a()(gt(t)))}},{key:"opacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this[zt].push("opacity(".concat(100*t,"%)")),this.transformColor.apply(this,a()(yt(t)))}},{key:"saturate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this[zt].push("saturate(".concat(100*t,"%)")),this.transformColor.apply(this,a()(vt(t)))}},{key:"sepia",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this[zt].push("sepia(".concat(100*t,"%)")),this.transformColor.apply(this,a()(mt(t)))}},{key:"url",value:function(t){return this[zt].push("url(".concat(t,")")),this}},{key:"isPointCollision",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"both",r=o()(this[Ft][1],2),i=r[0],a=r[1],s=ut([t,e],i,a),u=o()(s,2);t=u[0],e=u[1];var c=this.meshData,l=c.positions,f=c.cells;function h(t,e,n){var r=o()(t,2),i=r[0],a=r[1],s=o()(e,2),u=s[0],c=s[1],l=o()(n,2),f=l[0]-u,h=l[1]-c,d=((i-u)*f+(a-c)*h)/(Math.pow(f,2)+Math.pow(h,2));return d>=0&&d<=1}for(var d=0;d<f.length;d++){var v=f[d];if("fill"===n&&v[0]>=c.fillPointCount)break;if(!("stroke"===n&&v[0]<c.fillPointCount)){var p=v.map(function(t){return l[t]}),g=o()(p,3),m=o()(g[0],2),y=m[0],x=m[1],b=o()(g[1],2),M=b[0],_=b[1],S=o()(g[2],2),w=S[0],E=S[1],C=Math.sign((t-y)*(_-x)-(M-y)*(e-x));if(0===C&&h([t,e],[y,x],[M,_]))return!0;var O=Math.sign((t-M)*(E-_)-(w-M)*(e-_));if(0===O&&h([t,e],[M,_],[w,E]))return!0;var k=Math.sign((t-w)*(x-E)-(y-w)*(e-E));if(0===k&&h([t,e],[w,E],[y,x]))return!0;if(1===C&&1===O&&1===k||-1===C&&-1===O&&-1===k)return!0}}return!1}},{key:"isPointInPath",value:function(t,e){return this.isPointCollision(t,e,"fill")}},{key:"isPointInStroke",value:function(t,e){return this.isPointCollision(t,e,"stroke")}},{key:"width",get:function(){return this[Ft][1][0]}},{key:"height",get:function(){return this[Ft][1][1]}},{key:"contours",get:function(){return this[Rt]},set:function(t){this[At]=null,this[Rt]=t;var e=t.scale,n=this.transformScale/e;(n>1.5||n<.67)&&this.accurate(this.transformScale)}},{key:"blend",get:function(){return null==this[Bt]?"auto":this[Bt]},set:function(t){this[Bt]=t}},{key:"boundingBox",get:function(){if(this[At]&&this[At].boundingBox)return this[At].boundingBox;var t=this.meshData;if(t){var e=t.positions,n=L.mat2d.invert(Array.of(0,0,0,0,0,0),this[qt]),r=o()(this[Ft][1],2),i=r[0],a=r[1];return e=e.map(function(t){var e=o()(t,2);return Yt([e[0],e[1]],n,i,a,!1)}),t.boundingBox=z()(e),t.boundingBox}return null}},{key:"boundingCenter",get:function(){var t=this.boundingBox;return t?[.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])]:null}},{key:"lineWidth",get:function(){return this[Dt]?this[Dt].thickness:0}},{key:"lineCap",get:function(){return this[Dt]?this[Dt].cap:""}},{key:"lineJoin",get:function(){return this[Dt]?this[Dt].join:""}},{key:"miterLimit",get:function(){return this[Dt]?this[Dt].miterLimit:0}},{key:"strokeStyle",get:function(){return this[Ut]&&0!==this[Ut][3]?Object(B.a)(this[Ut]):""}},{key:"lineDash",get:function(){return this[Dt]?this[Dt].lineDash:null}},{key:"lineDashOffset",get:function(){return this[Dt]?this[Dt].lineDashOffset:0}},{key:"fillStyle",get:function(){return this[Pt]&&0!==this[Pt][3]?Object(B.a)(this[Pt]):""}},{key:"gradient",get:function(){return this[Ht]}},{key:"texture",get:function(){return this[Gt].u_texSampler?{image:this[Gt].u_texSampler._img,options:this[Nt]}:null}},{key:"enableBlend",get:function(){return!0===this[Bt]||!1===this[Bt]?this[Bt]:this[Gt].u_opacity<1||null!=this[Ut]&&this[Ut][3]<1||null!=this[Pt]&&this[Pt][3]<1||null!=this[Gt].u_colorMatrix&&this[Gt].u_colorMatrix[18]<1||this[Ht]}},{key:"filterCanvas",get:function(){return/blur|drop-shadow|url/.test(this.filter)}},{key:"filter",get:function(){return this[zt].join(" ")}},{key:"transformMatrix",get:function(){return this[qt]}},{key:"transformScale",get:function(){var t=this[qt];return Math.max(Math.hypot(t[0],t[1]),Math.hypot(t[2],t[3]))}},{key:"uniforms",get:function(){return this[Gt]}},{key:"meshData",get:function(){var t=this;if(this[At])return this[At];this[It]||this[Dt]||this.setFill();var e=this[Rt],n={};if(e&&e.length){if(this[It])try{var r=Et()(e);r.positions=r.positions.map(function(e){return e[1]=t[Ft][1][1]-e[1],e.push(1),e}),r.attributes={a_color:Array.from({length:r.positions.length}).map(function(){return t[Pt].map(function(t){return Math.round(255*t)})})},n.fill=r}catch(t){}if(this[Dt]){var o=this[Dt].lineDash,i=e;if(o)i=function(t,e,n){var r=0,o=e[0],i=t,s=[],u=e.length;if(n>0){do{n-=e[r%u],r++}while(n>0);n<0&&(o=-n,r--)}else if(n<0){r=-1;do{n+=e[r%u+u],r--}while(n<0);n>0&&(o=e[++r%u+u]-n)}do{var c=_t(i,o);i=c.rest,++r%2&&s.push.apply(s,a()(c.current));var l=r%u;l<0&&(l+=u),o=e[l]}while(i);return s}(e,o,this[Dt].lineDashOffset);var s=i.map(function(e,n){var r=e.length>1&&L.vec2.equals(e[0],e[e.length-1]);return t[Dt].build(e,r)});s.forEach(function(e){e.positions=e.positions.map(function(e){return e[1]=t[Ft][1][1]-e[1],e.push(0),e}),e.attributes={a_color:Array.from({length:e.positions.length}).map(function(){return t[Ut].map(function(t){return Math.round(255*t)})})}}),n.stroke=I(s)}}var u=I([n.fill,n.stroke]);u.fillPointCount=n.fill?n.fill.positions.length:0,u.enableBlend=this.enableBlend,Wt(u.positions,this[Ft]),this[Gt].u_texSampler?this[jt](u,this[Nt],!1):u.textureCoord=u.positions.map(function(){return[0,0]}),u.uniforms=this[Gt],this[At]=u;var c=this[qt];return bt(c)||this[Vt](u,c),this[At]}}]),t}(),Zt="attribute vec3 a_vertexPosition;\nattribute vec4 a_color;\nvarying vec4 vColor;\nvarying float flagBackground;\n\n#ifdef TEXTURE\nattribute vec2 a_vertexTextureCoord;\nvarying vec2 vTextureCoord;\n#endif\n\n#ifdef GRADIENT\nuniform float u_radialGradientVector[6];\nvarying vec3 vGradientVector1;\nvarying vec3 vGradientVector2;\n#endif\n\n#ifdef GLOBALTRANSFORM\nuniform float u_globalTransform[8];\n\nvoid transformPoint(inout vec2 p) {\n  vec3 m0 = vec3(u_globalTransform[0], u_globalTransform[2], u_globalTransform[5]);\n  vec3 m1 = vec3(u_globalTransform[1], u_globalTransform[4], u_globalTransform[6]);\n  float w = u_globalTransform[3];\n  float h = u_globalTransform[7];\n  float x = p.x;\n  float y = p.y;\n  x = (x + 1.0) * 0.5 * w;\n  y = (1.0 - y) * 0.5 * h;\n  p.x = x * m0.x + y * m0.y + m0.z;\n  p.y = x * m1.x + y * m1.y + m1.z;\n  p.x = 2.0 * (p.x / w - 0.5);\n  p.y = 2.0 * (0.5 - p.y / h);\n}\n#endif\n\nvoid main() {\n  gl_PointSize = 1.0;\n  gl_Position = vec4(a_vertexPosition.xy, 1.0, 1.0);\n  \n#ifdef GRADIENT\n  vGradientVector1 = vec3(u_radialGradientVector[0], u_radialGradientVector[1], u_radialGradientVector[2]);\n  vGradientVector2 = vec3(u_radialGradientVector[3], u_radialGradientVector[4], u_radialGradientVector[5]);\n#endif\n\n#ifdef GLOBALTRANSFORM\n  vec2 xy = a_vertexPosition.xy;\n  transformPoint(xy);\n  gl_Position = vec4(xy, 1.0, 1.0);\n#ifdef GRADIENT\n  vec2 vg1 = vGradientVector1.xy;\n  vec2 vg2 = vGradientVector2.xy;\n  float h = u_globalTransform[7];\n  float y1 = h - vg1.y;\n  float y2 = h - vg2.y;\n\n  vGradientVector1.x = vg1.x * u_globalTransform[0] + y1 * u_globalTransform[2] + u_globalTransform[5];\n  vGradientVector1.y = h - (vg1.x * u_globalTransform[1] + y1 * u_globalTransform[4] + u_globalTransform[6]);\n\n  vGradientVector2.x = vg2.x * u_globalTransform[0] + y2 * u_globalTransform[2] + u_globalTransform[5];\n  vGradientVector2.y = h - (vg2.x * u_globalTransform[1] + y2 * u_globalTransform[4] + u_globalTransform[6]);\n#endif\n#endif\n  \n  flagBackground = a_vertexPosition.z;\n  vColor = a_color;\n\n#ifdef TEXTURE\n  vTextureCoord = a_vertexTextureCoord;\n#endif\n}",$t="precision mediump float;\n\nvarying vec4 vColor;\nvarying float flagBackground;\nuniform float u_opacity;\n\n#ifdef TEXTURE\nuniform int u_texFlag;\nuniform int u_repeat;\nuniform vec4 u_srcRect;\nvarying vec2 vTextureCoord;\n#endif\n\n#ifdef FILTER\nuniform int u_filterFlag;\nuniform float u_colorMatrix[20];\n#endif\n\n#ifdef GRADIENT\nvarying vec3 vGradientVector1;\nvarying vec3 vGradientVector2;\nuniform float u_colorSteps[40];\nuniform int u_gradientType;\n// uniform float u_radialGradientVector[6];\n\nvoid linear_gradient(inout vec4 color, vec3 gv1, vec3 gv2, float colorSteps[40]) {\n  vec2 v1 = gl_FragCoord.xy - gv1.xy;\n  vec2 v2 = gv2.xy - gv1.xy;\n\n  float t = (v1.x * v2.x + v1.y * v2.y) / (v2.x * v2.x + v2.y * v2.y);\n\n  vec4 colors[8];\n  colors[0] = vec4(colorSteps[1], colorSteps[2], colorSteps[3], colorSteps[4]);\n  colors[1] = vec4(colorSteps[6], colorSteps[7], colorSteps[8], colorSteps[9]);\n  colors[2] = vec4(colorSteps[11], colorSteps[12], colorSteps[13], colorSteps[14]);\n  colors[3] = vec4(colorSteps[16], colorSteps[17], colorSteps[18], colorSteps[19]);\n  colors[4] = vec4(colorSteps[21], colorSteps[22], colorSteps[23], colorSteps[24]);\n  colors[5] = vec4(colorSteps[26], colorSteps[27], colorSteps[28], colorSteps[29]);\n  colors[6] = vec4(colorSteps[31], colorSteps[32], colorSteps[33], colorSteps[34]);\n  colors[7] = vec4(colorSteps[36], colorSteps[37], colorSteps[38], colorSteps[39]);\n  \n  float steps[8];\n  steps[0] = colorSteps[0];\n  steps[1] = colorSteps[5];\n  steps[2] = colorSteps[10];\n  steps[3] = colorSteps[15];\n  steps[4] = colorSteps[20];\n  steps[5] = colorSteps[25];\n  steps[6] = colorSteps[30];\n  steps[7] = colorSteps[35];\n  \n  color = colors[0];\n  for (int i = 1; i < 8; i++) {\n    if (steps[i] > 1.0) {\n      break;\n    }\n    if(steps[i] == steps[i - 1]) {\n      color = colors[i];\n    } else {\n      color = mix(color, colors[i], clamp((t - steps[i - 1]) / (steps[i] - steps[i - 1]), 0.0, 1.0));\n    }\n    if (steps[i] >= t) {\n      break;\n    }\n  }\n}\n\nvoid radial_gradient(inout vec4 color, vec3 v1, vec3 v2, float colorSteps[40]) {\n  // center circle\n  float cx = v1.x;\n  float cy = v1.y;\n  float cr = v1.z;\n  \n  // focal circle\n  float fx = v2.x;\n  float fy = v2.y;\n  float fr = v2.z;\n\n  vec2 center = vec2(cx, cy);\n  vec2 focal = vec2(fx, fy);\n\n  float x = focal.x - gl_FragCoord.x;\n  float y = focal.y - gl_FragCoord.y;\n  float dx = focal.x - center.x;\n  float dy = focal.y - center.y;\n  float dr = cr - fr;\n  \n  float a = dx * dx + dy * dy - dr * dr;\n  float b = -2.0 * (y * dy + x * dx + fr * dr);\n  float c = x * x + y * y - fr * fr;\n  float t = 0.5 * (1.0 / a) * (-b + sqrt(b * b - 4.0 * a * c));\n  t = 1.0 - t;\n  \n  vec4 colors[8];\n  colors[0] = vec4(colorSteps[1], colorSteps[2], colorSteps[3], colorSteps[4]);\n  colors[1] = vec4(colorSteps[6], colorSteps[7], colorSteps[8], colorSteps[9]);\n  colors[2] = vec4(colorSteps[11], colorSteps[12], colorSteps[13], colorSteps[14]);\n  colors[3] = vec4(colorSteps[16], colorSteps[17], colorSteps[18], colorSteps[19]);\n  colors[4] = vec4(colorSteps[21], colorSteps[22], colorSteps[23], colorSteps[24]);\n  colors[5] = vec4(colorSteps[26], colorSteps[27], colorSteps[28], colorSteps[29]);\n  colors[6] = vec4(colorSteps[31], colorSteps[32], colorSteps[33], colorSteps[34]);\n  colors[7] = vec4(colorSteps[36], colorSteps[37], colorSteps[38], colorSteps[39]);\n  \n  float steps[8];\n  steps[0] = colorSteps[0];\n  steps[1] = colorSteps[5];\n  steps[2] = colorSteps[10];\n  steps[3] = colorSteps[15];\n  steps[4] = colorSteps[20];\n  steps[5] = colorSteps[25];\n  steps[6] = colorSteps[30];\n  steps[7] = colorSteps[35];\n  \n  color = colors[0];\n  for (int i = 1; i < 8; i++) {\n    if (steps[i] > 1.0) {\n      break;\n    }\n    if(steps[i] == steps[i - 1]) {\n      color = colors[i];\n    } else {\n      color = mix(color, colors[i], clamp((t - steps[i - 1]) / (steps[i] - steps[i - 1]), 0.0, 1.0));\n    }\n    if (steps[i] >= t) {\n      break;\n    }\n  }\n}\n#endif\n\n#ifdef FILTER\nvoid transformColor(inout vec4 color, in float colorMatrix[20]) {\n  float r = color.r, g = color.g, b = color.b, a = color.a;\n  color[0] = colorMatrix[0] * r + colorMatrix[1] * g + colorMatrix[2] * b + colorMatrix[3] * a + colorMatrix[4];\n  color[1] = colorMatrix[5] * r + colorMatrix[6] * g + colorMatrix[7] * b + colorMatrix[8] * a + colorMatrix[9];\n  color[2] = colorMatrix[10] * r + colorMatrix[11] * g + colorMatrix[12] * b + colorMatrix[13] * a + colorMatrix[14];\n  color[3] = colorMatrix[15] * r + colorMatrix[16] * g + colorMatrix[17] * b + colorMatrix[18] * a + colorMatrix[19];\n}\n#endif\n\nvoid main() {\n  vec4 color = vColor;\n\n#ifdef GRADIENT\n  if(u_gradientType > 0 && flagBackground > 0.0 || u_gradientType == 0 && flagBackground <= 0.0) {\n    if (vGradientVector1.z > 0.0 || vGradientVector2.z > 0.0) {\n      radial_gradient(color, vGradientVector1, vGradientVector2, u_colorSteps);\n    } \n    else {\n      linear_gradient(color, vGradientVector1, vGradientVector2, u_colorSteps);\n    }\n  }\n#endif\n\n  if(u_opacity < 1.0) {\n    color.a *= u_opacity;\n  }\n\n#ifdef TEXTURE\n  if(u_texFlag > 0 && flagBackground > 0.0) {\n    vec2 texCoord = vTextureCoord;\n\n    if(u_repeat == 1) {\n      texCoord = fract(texCoord);\n    }\n\n    if(texCoord.x <= 1.0 && texCoord.x >= 0.0\n      && texCoord.y <= 1.0 && texCoord.y >= 0.0) {\n      if(u_srcRect.z > 0.0) {\n        texCoord.x = u_srcRect.x + texCoord.x * u_srcRect.z;\n        texCoord.y = 1.0 - (u_srcRect.y + (1.0 - texCoord.y) * u_srcRect.w);\n      }\n      vec4 texColor = texture2D(u_texSampler, texCoord);\n      float alpha = texColor.a;\n      if(u_opacity < 1.0) {\n        texColor.a *= u_opacity;\n        alpha *= mix(0.465, 1.0, u_opacity);\n      }\n      // color = mix(color, texColor, texColor.a);\n      color.rgb = mix(texColor.rgb, color.rgb, 1.0 - alpha);\n      color.a = texColor.a + (1.0 - texColor.a) * color.a;\n    }\n  }\n#endif\n\n#ifdef FILTER\n  if(u_filterFlag > 0) {\n    transformColor(color, u_colorMatrix);\n  }\n#endif\n\n  gl_FragColor = color;\n}",Jt="attribute vec3 a_vertexPosition;\nattribute vec4 a_color;\nvarying vec4 vColor;\nvarying float flagBackground;\nattribute vec4 a_transform0;\nattribute vec4 a_transform1;\n\n#ifdef TEXTURE\nattribute vec2 a_vertexTextureCoord;\nvarying vec2 vTextureCoord;\nattribute float a_frameIndex;\nvarying float frameIndex;\n#endif\n\n#ifdef CLOUDFILTER\nattribute vec4 a_colorCloud0;\nattribute vec4 a_colorCloud1;\nattribute vec4 a_colorCloud2;\nattribute vec4 a_colorCloud3;\nattribute vec4 a_colorCloud4;\nvarying vec4 colorCloud0;\nvarying vec4 colorCloud1;\nvarying vec4 colorCloud2;\nvarying vec4 colorCloud3;\nvarying vec4 colorCloud4;\n#endif\n\n#ifdef CLOUDCOLOR\nattribute vec4 a_fillCloudColor;\nattribute vec4 a_strokeCloudColor;\n#endif\n\n#ifdef GRADIENT\nuniform float u_radialGradientVector[6];\nvarying vec3 vGradientVector1;\nvarying vec3 vGradientVector2;\n#endif\n\n#ifdef GLOBALTRANSFORM\nuniform float u_globalTransform[8];\n#endif\n\nvoid transformPoint(inout vec2 p, vec3 m0, vec3 m1, float w, float h) {\n  float x = p.x;\n  float y = p.y;\n  x = (x + 1.0) * 0.5 * w;\n  y = (1.0 - y) * 0.5 * h;\n  p.x = x * m0.x + y * m0.y + m0.z;\n  p.y = x * m1.x + y * m1.y + m1.z;\n  p.x = 2.0 * (p.x / w - 0.5);\n  p.y = 2.0 * (0.5 - p.y / h);\n}\n\nvoid main() {\n  gl_PointSize = 1.0;\n\n  vec3 m0 = vec3(a_transform0.x, a_transform0.z, a_transform1.y);\n  vec3 m1 = vec3(a_transform0.y, a_transform1.x, a_transform1.z);\n\n  vec2 xy = a_vertexPosition.xy;\n  transformPoint(xy, m0, m1, a_transform0.w, a_transform1.w);\n  gl_Position = vec4(xy, 1.0, 1.0);\n\n#ifdef GRADIENT\n  vGradientVector1 = vec3(u_radialGradientVector[0], u_radialGradientVector[1], u_radialGradientVector[2]);\n  vGradientVector2 = vec3(u_radialGradientVector[3], u_radialGradientVector[4], u_radialGradientVector[5]);\n#endif\n\n#ifdef GLOBALTRANSFORM\n  vec3 m3 = vec3(u_globalTransform[0], u_globalTransform[2], u_globalTransform[5]);\n  vec3 m4 = vec3(u_globalTransform[1], u_globalTransform[4], u_globalTransform[6]);\n  float width = u_globalTransform[3];\n  float height = u_globalTransform[7];\n  transformPoint(xy, m3, m4, width, height);\n  gl_Position = vec4(xy, 1.0, 1.0);\n#ifdef GRADIENT\n  vec2 vg1 = vGradientVector1.xy;\n  vec2 vg2 = vGradientVector2.xy;\n  float h = u_globalTransform[7];\n  float y1 = h - vg1.y;\n  float y2 = h - vg2.y;\n\n  vGradientVector1.x = vg1.x * u_globalTransform[0] + y1 * u_globalTransform[2] + u_globalTransform[5];\n  vGradientVector1.y = h - (vg1.x * u_globalTransform[1] + y1 * u_globalTransform[4] + u_globalTransform[6]);\n\n  vGradientVector2.x = vg2.x * u_globalTransform[0] + y2 * u_globalTransform[2] + u_globalTransform[5];\n  vGradientVector2.y = h - (vg2.x * u_globalTransform[1] + y2 * u_globalTransform[4] + u_globalTransform[6]);\n#endif\n#endif\n  \n  flagBackground = a_vertexPosition.z;\n\n#ifdef CLOUDCOLOR\n  if(flagBackground > 0.0) {\n    vColor = mix(a_color, a_fillCloudColor, a_fillCloudColor.a);\n  } else {\n    vColor = mix(a_color, a_strokeCloudColor, a_strokeCloudColor.a);\n  }\n#else\n  vColor = a_color;\n#endif\n\n#ifdef TEXTURE\n  vTextureCoord = a_vertexTextureCoord;\n  frameIndex = a_frameIndex;\n#endif\n\n#ifdef CLOUDFILTER\n  colorCloud0 = a_colorCloud0;\n  colorCloud1 = a_colorCloud1;\n  colorCloud2 = a_colorCloud2;\n  colorCloud3 = a_colorCloud3;\n  colorCloud4 = a_colorCloud4;\n#endif\n}",Kt="precision mediump float;\n\nvarying vec4 vColor;\nvarying float flagBackground;\nuniform float u_opacity;\n\n#ifdef TEXTURE\nvarying float frameIndex;\nvarying vec2 vTextureCoord;\nuniform int u_texFlag;\nuniform int u_repeat;\nuniform vec4 u_srcRect;\n#endif\n\n#ifdef FILTER\nuniform int u_filterFlag;\nuniform float u_colorMatrix[20];\n#endif\n\n#ifdef CLOUDFILTER\nuniform int u_cloudFilterFlag;\nvarying vec4 colorCloud0;\nvarying vec4 colorCloud1;\nvarying vec4 colorCloud2;\nvarying vec4 colorCloud3;\nvarying vec4 colorCloud4;\n#endif\n\n#ifdef GRADIENT\nvarying vec3 vGradientVector1;\nvarying vec3 vGradientVector2;\nuniform float u_colorSteps[40];\nuniform int u_gradientType;\n\nvoid linear_gradient(inout vec4 color, vec3 gv1, vec3 gv2, float colorSteps[40]) {\n  vec2 v1 = gl_FragCoord.xy - gv1.xy;\n  vec2 v2 = gv2.xy - gv1.xy;\n\n  float t = (v1.x * v2.x + v1.y * v2.y) / (v2.x * v2.x + v2.y * v2.y);\n\n  vec4 colors[8];\n  colors[0] = vec4(colorSteps[1], colorSteps[2], colorSteps[3], colorSteps[4]);\n  colors[1] = vec4(colorSteps[6], colorSteps[7], colorSteps[8], colorSteps[9]);\n  colors[2] = vec4(colorSteps[11], colorSteps[12], colorSteps[13], colorSteps[14]);\n  colors[3] = vec4(colorSteps[16], colorSteps[17], colorSteps[18], colorSteps[19]);\n  colors[4] = vec4(colorSteps[21], colorSteps[22], colorSteps[23], colorSteps[24]);\n  colors[5] = vec4(colorSteps[26], colorSteps[27], colorSteps[28], colorSteps[29]);\n  colors[6] = vec4(colorSteps[31], colorSteps[32], colorSteps[33], colorSteps[34]);\n  colors[7] = vec4(colorSteps[36], colorSteps[37], colorSteps[38], colorSteps[39]);\n  \n  float steps[8];\n  steps[0] = colorSteps[0];\n  steps[1] = colorSteps[5];\n  steps[2] = colorSteps[10];\n  steps[3] = colorSteps[15];\n  steps[4] = colorSteps[20];\n  steps[5] = colorSteps[25];\n  steps[6] = colorSteps[30];\n  steps[7] = colorSteps[35];\n  \n  color = colors[0];\n  for (int i = 1; i < 8; i++) {\n    if (steps[i] > 1.0) {\n      break;\n    }\n    if(steps[i] == steps[i - 1]) {\n      color = colors[i];\n    } else {\n      color = mix(color, colors[i], clamp((t - steps[i - 1]) / (steps[i] - steps[i - 1]), 0.0, 1.0));\n    }\n    if (steps[i] >= t) {\n      break;\n    }\n  }\n}\n\nvoid radial_gradient(inout vec4 color, vec3 v1, vec3 v2, float colorSteps[40]) {\n  // center circle\n  float cx = v1.x;\n  float cy = v1.y;\n  float cr = v1.z;\n  \n  // focal circle\n  float fx = v2.x;\n  float fy = v2.y;\n  float fr = v2.z;\n\n  vec2 center = vec2(cx, cy);\n  vec2 focal = vec2(fx, fy);\n\n  float x = focal.x - gl_FragCoord.x;\n  float y = focal.y - gl_FragCoord.y;\n  float dx = focal.x - center.x;\n  float dy = focal.y - center.y;\n  float dr = cr - fr;\n  \n  float a = dx * dx + dy * dy - dr * dr;\n  float b = -2.0 * (y * dy + x * dx + fr * dr);\n  float c = x * x + y * y - fr * fr;\n  float t = 0.5 * (1.0 / a) * (-b + sqrt(b * b - 4.0 * a * c));\n  t = 1.0 - t;\n  \n  vec4 colors[8];\n  colors[0] = vec4(colorSteps[1], colorSteps[2], colorSteps[3], colorSteps[4]);\n  colors[1] = vec4(colorSteps[6], colorSteps[7], colorSteps[8], colorSteps[9]);\n  colors[2] = vec4(colorSteps[11], colorSteps[12], colorSteps[13], colorSteps[14]);\n  colors[3] = vec4(colorSteps[16], colorSteps[17], colorSteps[18], colorSteps[19]);\n  colors[4] = vec4(colorSteps[21], colorSteps[22], colorSteps[23], colorSteps[24]);\n  colors[5] = vec4(colorSteps[26], colorSteps[27], colorSteps[28], colorSteps[29]);\n  colors[6] = vec4(colorSteps[31], colorSteps[32], colorSteps[33], colorSteps[34]);\n  colors[7] = vec4(colorSteps[36], colorSteps[37], colorSteps[38], colorSteps[39]);\n  \n  float steps[8];\n  steps[0] = colorSteps[0];\n  steps[1] = colorSteps[5];\n  steps[2] = colorSteps[10];\n  steps[3] = colorSteps[15];\n  steps[4] = colorSteps[20];\n  steps[5] = colorSteps[25];\n  steps[6] = colorSteps[30];\n  steps[7] = colorSteps[35];\n  \n  color = colors[0];\n  for (int i = 1; i < 8; i++) {\n    if (steps[i] > 1.0) {\n      break;\n    }\n    if(steps[i] == steps[i - 1]) {\n      color = colors[i];\n    } else {\n      color = mix(color, colors[i], clamp((t - steps[i - 1]) / (steps[i] - steps[i - 1]), 0.0, 1.0));\n    }\n    if (steps[i] >= t) {\n      break;\n    }\n  }\n}\n#endif\n\nvoid transformColor(inout vec4 color, in float colorMatrix[20]) {\n  float r = color.r, g = color.g, b = color.b, a = color.a;\n  color[0] = colorMatrix[0] * r + colorMatrix[1] * g + colorMatrix[2] * b + colorMatrix[3] * a + colorMatrix[4];\n  color[1] = colorMatrix[5] * r + colorMatrix[6] * g + colorMatrix[7] * b + colorMatrix[8] * a + colorMatrix[9];\n  color[2] = colorMatrix[10] * r + colorMatrix[11] * g + colorMatrix[12] * b + colorMatrix[13] * a + colorMatrix[14];\n  color[3] = colorMatrix[15] * r + colorMatrix[16] * g + colorMatrix[17] * b + colorMatrix[18] * a + colorMatrix[19];\n}\n\n#ifdef CLOUDFILTER\nvoid buildCloudColor(inout float colorCloudMatrix[20]) {\n  colorCloudMatrix[0] = colorCloud0[0];\n  colorCloudMatrix[1] = colorCloud1[0];\n  colorCloudMatrix[2] = colorCloud2[0];\n  colorCloudMatrix[3] = colorCloud3[0];\n  colorCloudMatrix[4] = colorCloud4[0];\n\n  colorCloudMatrix[5] = colorCloud0[1];\n  colorCloudMatrix[6] = colorCloud1[1];\n  colorCloudMatrix[7] = colorCloud2[1];\n  colorCloudMatrix[8] = colorCloud3[1];\n  colorCloudMatrix[9] = colorCloud4[1];\n\n  colorCloudMatrix[10] = colorCloud0[2];\n  colorCloudMatrix[11] = colorCloud1[2];\n  colorCloudMatrix[12] = colorCloud2[2];\n  colorCloudMatrix[13] = colorCloud3[2];\n  colorCloudMatrix[14] = colorCloud4[2];\n\n  colorCloudMatrix[15] = colorCloud0[3];\n  colorCloudMatrix[16] = colorCloud1[3];\n  colorCloudMatrix[17] = colorCloud2[3];\n  colorCloudMatrix[18] = colorCloud3[3];\n  colorCloudMatrix[19] = colorCloud4[3];\n}\n#endif\n\nvoid main() {\n  vec4 color = vColor;\n\n#ifdef GRADIENT\n  if(u_gradientType > 0 && flagBackground > 0.0 || u_gradientType == 0 && flagBackground <= 0.0) {\n    if (vGradientVector1.z > 0.0 || vGradientVector2.z > 0.0) {\n      radial_gradient(color, vGradientVector1, vGradientVector2, u_colorSteps);\n    } \n    else {\n      linear_gradient(color, vGradientVector1, vGradientVector2, u_colorSteps);\n    }\n  }\n#endif\n\n  if(u_opacity < 1.0) {\n    color.a *= u_opacity;\n  }\n\n#ifdef TEXTURE\n  if(u_texFlag > 0 && flagBackground > 0.0) {\n    vec2 texCoord = vTextureCoord;\n\n    if(u_repeat == 1) {\n      texCoord = fract(texCoord);\n    }\n\n    if(texCoord.x <= 1.0 && texCoord.x >= 0.0\n      && texCoord.y <= 1.0 && texCoord.y >= 0.0) {\n      if(u_srcRect.z > 0.0) {\n        texCoord.x = u_srcRect.x + texCoord.x * u_srcRect.z;\n        texCoord.y = 1.0 - (u_srcRect.y + (1.0 - texCoord.y) * u_srcRect.w);\n      }\n      if(frameIndex < 0.0) {\n        vec4 texColor = texture2D(u_texSampler, texCoord);\n        color = mix(color, texColor, texColor.a);\n      } else {\n        int index = int(floor(clamp(0.0, 11.0, frameIndex)));\n        vec4 texColor;\n        if(index == 0) texColor = texture2D(u_texFrame0, texCoord);\n        else if(index == 1) texColor = texture2D(u_texFrame1, texCoord);\n        else if(index == 2) texColor = texture2D(u_texFrame2, texCoord);\n        else if(index == 3) texColor = texture2D(u_texFrame3, texCoord);\n        else if(index == 4) texColor = texture2D(u_texFrame4, texCoord);\n        else if(index == 5) texColor = texture2D(u_texFrame5, texCoord);\n        else if(index == 6) texColor = texture2D(u_texFrame6, texCoord);\n        else if(index == 7) texColor = texture2D(u_texFrame7, texCoord);\n        else if(index == 8) texColor = texture2D(u_texFrame8, texCoord);\n        else if(index == 9) texColor = texture2D(u_texFrame9, texCoord);\n        else if(index == 10) texColor = texture2D(u_texFrame10, texCoord);\n        else texColor = texture2D(u_texFrame11, texCoord);\n        float alpha = texColor.a;\n        if(u_opacity < 1.0) {\n          texColor.a *= u_opacity;\n          alpha *= mix(0.465, 1.0, u_opacity);\n        }\n        // color = mix(color, texColor, texColor.a);\n        color.rgb = mix(texColor.rgb, color.rgb, 1.0 - alpha);\n        color.a = texColor.a + (1.0 - texColor.a) * color.a;\n      }\n    }\n  }\n#endif\n\n#ifdef FILTER\n  if(u_filterFlag > 0) {\n    transformColor(color, u_colorMatrix);\n  }\n#endif\n\n#ifdef CLOUDFILTER\n  if(u_cloudFilterFlag > 0) {\n    float colorCloudMatrix[20];\n    buildCloudColor(colorCloudMatrix);\n    transformColor(color, colorCloudMatrix);\n  }\n#endif\n\n  gl_FragColor = color;\n}";n(0).glMatrix.setMatrixArrayType(Array);var te=Symbol("shaders");function ee(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.hasTexture,r=void 0!==n&&n,o=e.hasFilter,i=void 0!==o&&o,s=e.hasGradient,u=void 0!==s&&s,c=e.hasGlobalTransform,l=r|i<<1|u<<2|(void 0!==c&&c)<<3,f=t[te][l];Array.isArray(f)&&(f=t.createProgram.apply(t,a()(f)),t[te][l]=f),t.program!==f&&t.useProgram(f,{a_color:{type:"UNSIGNED_BYTE",normalize:!0}})}var ne=[];function re(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.hasTexture,r=void 0!==n&&n,o=e.hasFilter,i=void 0!==o&&o,s=e.hasGradient,u=void 0!==s&&s,c=e.hasGlobalTransform,l=void 0!==c&&c,f=e.hasCloudColor,h=void 0!==f&&f,d=e.hasCloudFilter,v=r|i<<1|u<<2|l<<3|h<<4|(void 0!==d&&d)<<5,p=ne[v];Array.isArray(p)&&(p=t.createProgram.apply(t,a()(p)),ne[v]=p),t.program!==p&&t.useProgram(p,{a_color:{type:"UNSIGNED_BYTE",normalize:!0},a_fillCloudColor:{type:"UNSIGNED_BYTE",normalize:!0},a_strokeCloudColor:{type:"UNSIGNED_BYTE",normalize:!0}})}n(0).glMatrix.setMatrixArrayType(Array);var oe={autoUpdate:!1,preserveDrawingBuffer:!1,bufferSize:1500},ie=Symbol("glRenderer"),ae=Symbol("canvasRenderer"),se=Symbol("options"),ue=Symbol("globalTransform"),ce=Symbol("applyGlobalTransform"),le=Symbol("canvas");function fe(t,e,n,r){var o=t.createTexture(e.canvas),i=[[[0,0],[n,0],[n,r],[0,r],[0,0]]];i.closed=!0;var a=new Qt({contours:i},{width:n,height:r});a.setTexture(o),t.setMeshData([a.meshData]),t._draw(),o.delete(),e.clearRect(0,0,n,r),delete e._filter}var he=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u()(this,t);var r=n.contextType;if(r||("function"==typeof WebGL2RenderingContext&&(r="webgl2"),r="function"==typeof WebGLRenderingContext?"webgl":"2d"),!e.getContext){var o=e;e={getContext:function(){return o},width:n.width,height:n.height},o.canvas=e,r="2d"}if(this[le]=e,"webgl"!==r&&"webgl2"!==r&&"2d"!==r)throw new Error("Unknown context type ".concat(r));if(n.contextType=r,this[se]=Object.assign({},oe,n),"webgl"===r||"webgl2"===r){"webgl2"===r&&(this[se].webgl2=!0);var i=new T(e,this[se]);!function(t){t[te]=[];for(var e=0;e<16;e++){var n=[],r=!!(1&e),o=!!(2&e),i=!!(4&e),a=!!(8&e);r&&n.push("#define TEXTURE 1"),o&&n.push("#define FILTER 1"),i&&n.push("#define GRADIENT 1"),a&&n.push("#define GLOBALTRANSFORM 1");var s="".concat(n.join("\n"),"\n"),u=[];r&&u.push("uniform sampler2D u_texSampler;"),t[te][e]=[s+u.join("\n")+$t,s+Zt]}}(i),ee(i),function(t){for(var e=0;e<64;e++){var n=[],r=!!(1&e),o=!!(2&e),i=!!(4&e),a=!!(8&e),s=!!(16&e),u=!!(32&e);r&&n.push("#define TEXTURE 1"),o&&n.push("#define FILTER 1"),i&&n.push("#define GRADIENT 1"),a&&n.push("#define GLOBALTRANSFORM 1"),s&&n.push("#define CLOUDCOLOR 1"),u&&n.push("#define CLOUDFILTER 1");var c="".concat(n.join("\n"),"\n"),l=[];if(r){l.push("uniform sampler2D u_texSampler;");for(var f=0;f<12;f++)l.push("uniform sampler2D u_texFrame".concat(f,";"))}ne[e]=[c+l.join("\n")+Kt,c+Jt]}}();var a=i.gl;a.clearColor(0,0,0,0),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),this[ie]=i}else this[ae]=new D(e,this[se]);this[ue]=[1,0,0,1,0,0]}return l()(t,[{key:ce,value:function(t){var e=this[ie]||this[ae];if(this[ie]){var n=this.canvas,r=n.width,o=n.height;e.uniforms.u_globalTransform=[].concat(a()(t.slice(0,3)),[r],a()(t.slice(3)),[o])}else e.setTransform(t)}},{key:"createTexture",value:function(t){return(this[ie]||this[ae]).createTexture(t)}},{key:"loadTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.useImageBitmap,r=void 0!==n&&n,o=this[ie]||this[ae];return o.loadTexture(t,{useImageBitmap:r})}},{key:"createText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.font,r=void 0===n?"16px arial":n,o=e.fillColor,i=void 0===o?null:o,a=e.strokeColor,s=void 0===a?null:a;if(this[ie]){var u=V(t,{font:r,fillColor:i,strokeColor:s});return this.createTexture(u)}return{_img:{font:r,fillColor:i,strokeColor:s,text:t}}}},{key:"deleteTexture",value:function(t){return(this[ie]||this[ae]).deleteTexture(t)}},{key:"clear",value:function(){if(this[ie]){var t=this[ie].gl;t.clear(t.COLOR_BUFFER_BIT)}else{var e;(e=this[ae]).clear.apply(e,arguments)}}},{key:"drawMeshCloud",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clear,r=void 0!==n&&n,o=e.program,i=void 0===o?null:o,a=e.attributeOptions,s=void 0===a?{}:a,u=this[ie]||this[ae];if(this[ie]){var c=u.gl;if(r&&c.clear(c.COLOR_BUFFER_BIT),i)u.program!==i&&u.useProgram(i,Object.assign({a_color:{type:"UNSIGNED_BYTE",normalize:!0},a_fillCloudColor:{type:"UNSIGNED_BYTE",normalize:!0},a_strokeCloudColor:{type:"UNSIGNED_BYTE",normalize:!0}},s));else{var l=t.mesh.meshData,f=!!l.uniforms.u_texSampler,h=!!l.uniforms.u_filterFlag,d=!!l.uniforms.u_radialGradientVector,v=!bt(this[ue]),p=t.hasCloudColor,g=!0;re(u,{hasTexture:f,hasFilter:h,hasGradient:d,hasGlobalTransform:v,hasCloudColor:p,hasCloudFilter:g})}this[ce](this[ue]),u.setMeshData(t.meshData),u._draw()}else{for(var m=[],y=0;y<t.amount;y++){var x=t.getTransform(y),b=t.getTextureFrame(y);b&&(b=b._img);var M=t.getFilter(y),_=t.getCloudRGBA(y),S=_.fill,w=_.stroke;m.push({mesh:t.mesh,_cloudOptions:[S,w,b,x,M]})}u.setTransform(this[ue]),u.drawMeshes(m,{clear:r})}}},{key:"drawMeshes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clear,r=void 0!==n&&n,o=e.program,i=void 0===o?null:o,s=e.attributeOptions,u=void 0===s?{}:s,c=this[ie]||this[ae];if(this[ie]){var l=G(this,t),f=c.gl;r&&f.clear(f.COLOR_BUFFER_BIT);var h=!bt(this[ue]),d=!0,v=!1,p=void 0;try{for(var g,m=l[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var y=g.value;if(!i&&y.filterCanvas){ee(c,{hasTexture:!0});var x=this.canvas,b=x.width,M=x.height,_=this.filterContext;if(!_){var S=Object(A.b)(b,M);_=S.getContext("2d"),this.filterContext=_}var w=t[y.packIndex],E=w.filter,C=t[y.packIndex+1],O=t[y.packIndex-1];if(O&&O.filterCanvas&&O.filter===E||C&&C.filterCanvas&&C.filter===E){var k;if(h)_.save(),(k=_).transform.apply(k,a()(this[ue]));Object(A.c)(w,_,!1),h&&_.restore(),C&&C.filterCanvas&&w.filter===C.filter||(Object(A.a)(_,E),fe(c,_,b,M))}else{var T;if(h)_.save(),(T=_).transform.apply(T,a()(this[ue])),Object(A.c)(w,_,!1),_.restore(),Object(A.a)(_,E);else Object(A.c)(w,_,!0);fe(c,_,b,M)}}else{if(i)c.program!==i&&c.useProgram(i,Object.assign({a_color:{type:"UNSIGNED_BYTE",normalize:!0}},u));else{var L=!!y.uniforms.u_texSampler,R=!!y.uniforms.u_filterFlag,D=!!y.uniforms.u_radialGradientVector;ee(c,{hasTexture:L,hasFilter:R,hasGradient:D,hasGlobalTransform:h})}y.filterCanvas&&console.warn("User program ignored some filter effects."),this[ce](this[ue]),c.setMeshData([y]),c._draw()}}}catch(t){v=!0,p=t}finally{try{d||null==m.return||m.return()}finally{if(v)throw p}}}else c.setTransform(this[ue]),c.drawMeshes(t,{clear:r})}},{key:"setGlobalTransform",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this[ue];return L.mat2d.equals(e,r)||(this[ue]=e,e=L.mat2d.multiply(Array.of(0,0,0,0,0,0),e,L.mat2d.invert(Array.of(0,0,0,0,0,0),r)),this[ce](e)),this}},{key:"globalTransform",value:function(){for(var t=this[ue],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this[ue]=L.mat2d.multiply(Array.of(0,0,0,0,0,0),n,t),this[ce](n),this}},{key:"globalTranslate",value:function(t,e){var n=L.mat2d.create();return n=L.mat2d.translate(Array.of(0,0,0,0,0,0),n,[t,e]),this.globalTransform.apply(this,a()(n))}},{key:"globalRotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=o()(e,2),r=n[0],i=n[1],s=L.mat2d.create();return s=L.mat2d.translate(Array.of(0,0,0,0,0,0),s,[r,i]),s=L.mat2d.rotate(Array.of(0,0,0,0,0,0),s,t),s=L.mat2d.translate(Array.of(0,0,0,0,0,0),s,[-r,-i]),this.globalTransform.apply(this,a()(s))}},{key:"globalScale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=o()(n,2),i=r[0],s=r[1],u=L.mat2d.create();return u=L.mat2d.translate(Array.of(0,0,0,0,0,0),u,[i,s]),u=L.mat2d.scale(Array.of(0,0,0,0,0,0),u,[t,e]),u=L.mat2d.translate(Array.of(0,0,0,0,0,0),u,[-i,-s]),this.globalTransform.apply(this,a()(u))}},{key:"globalSkew",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=o()(n,2),i=r[0],s=r[1],u=L.mat2d.create();return u=L.mat2d.translate(Array.of(0,0,0,0,0,0),u,[i,s]),u=L.mat2d.multiply(Array.of(0,0,0,0,0,0),u,L.mat2d.fromValues(1,Math.tan(e),Math.tan(t),1,0,0)),u=L.mat2d.translate(Array.of(0,0,0,0,0,0),u,[-i,-s]),this.globalTransform.apply(this,a()(u))}},{key:"transformPoint",value:function(t,e,n){var r=this[ue];return n&&(r=L.mat2d.multiply(Array.of(0,0,0,0,0,0),r,n)),[t*r[0]+e*r[2]+r[4],t*r[1]+e*r[3]+r[5]]}},{key:"canvas",get:function(){return this[le]}},{key:"canvasRenderer",get:function(){return this[ae]}},{key:"glRenderer",get:function(){return this[ie]}},{key:"isWebGL2",get:function(){return this[ie]&&this[ie].isWebGL2}},{key:"options",get:function(){return this[se]}},{key:"globalTransformMatrix",get:function(){return this[ue]}}]),t}(),de=n(16),ve=n.n(de),pe=n(20),ge=n.n(pe);n(0).glMatrix.setMatrixArrayType(Array);var me=2*Math.PI;function ye(t,e,n,r){var o=t*n+e*r;return o>1&&(o=1),o<-1&&(o=-1),(t*r-e*n<0?-1:1)*Math.acos(o)}function xe(t,e){var n=4/3*Math.tan(e/4),r=Math.cos(t),o=Math.sin(t),i=Math.cos(t+e),a=Math.sin(t+e);return[r,o,r-o*n,o+r*n,i+a*n,a-i*n,i,a]}function be(t,e,n,r,o,i,a,s,u){var c=Math.sin(u*me/360),l=Math.cos(u*me/360),f=l*(t-n)/2+c*(e-r)/2,h=-c*(t-n)/2+l*(e-r)/2;if(0===f&&0===h)return[];if(0===a||0===s)return[];a=Math.abs(a),s=Math.abs(s);var d=f*f/(a*a)+h*h/(s*s);d>1&&(a*=Math.sqrt(d),s*=Math.sqrt(d));var v=function(t,e,n,r,o,i,a,s,u,c){var l=c*(t-n)/2+u*(e-r)/2,f=-u*(t-n)/2+c*(e-r)/2,h=a*a,d=s*s,v=l*l,p=f*f,g=h*d-h*p-d*v;g<0&&(g=0),g/=h*p+d*v;var m=(g=Math.sqrt(g)*(o===i?-1:1))*a/s*f,y=g*-s/a*l,x=c*m-u*y+(t+n)/2,b=u*m+c*y+(e+r)/2,M=(l-m)/a,_=(f-y)/s,S=(-l-m)/a,w=(-f-y)/s,E=ye(1,0,M,_),C=ye(M,_,S,w);return 0===i&&C>0&&(C-=me),1===i&&C<0&&(C+=me),[x,b,E,C]}(t,e,n,r,o,i,a,s,c,l),p=[],g=v[2],m=v[3],y=Math.max(Math.ceil(Math.abs(m)/(me/4)),1);m/=y;for(var x=0;x<y;x++)p.push(xe(g,m)),g+=m;return p.map(function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],r=t[e+1],o=l*(n*=a)-c*(r*=s),i=c*n+l*r;t[e+0]=o+v[0],t[e+1]=i+v[1]}return t})}function Me(t,e,n,r){return["C",t,e,n,r,n,r]}function _e(t,e,n,r,o,i){return["C",t/3+2/3*n,e/3+2/3*r,o/3+2/3*n,i/3+2/3*r,o,i]}n(0).glMatrix.setMatrixArrayType(Array),n(0).glMatrix.setMatrixArrayType(Array);var Se=Symbol("contours"),we=Symbol("path"),Ee=Symbol("simplify"),Ce=Symbol("scale"),Oe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u()(this,t),"string"==typeof e&&(e={path:e}),e.path?this[we]=ve()(e.path):this[we]=[],this[Se]=null,this[Ee]=e.simplify||0,this[Ce]=e.scale||1}return l()(t,[{key:"getPointAtLength",value:function(t){return this.contours?St(this[Se],t):null}},{key:"getTotalLength",value:function(){return this.contours?Mt(this[Se]):0}},{key:"addPath",value:function(t){var e;this[Se]=null,(e=this[we]).push.apply(e,a()(ve()(t)))}},{key:"beginPath",value:function(){this[we]=[],this.moveTo(0,0)}},{key:"clear",value:function(){this[we]=[],this[Se]=null}},{key:"arc",value:function(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=2*Math.PI;if(o!==r){(o=(o-r)%a)<=0&&(o+=a);var s="",u=[t+n*Math.cos(r),e+n*Math.sin(r)],c=i?-1:1,l=[t+n*Math.cos(o),e+c*n*Math.sin(o)],f=o>Math.PI?1:0,h=Number(!i);o<a?s+="M".concat(t," ").concat(e,"L").concat(u.join(" ")):(l[1]+=.01*c,s+="M".concat(u.join(" "))),s+="A".concat(n," ").concat(n," 0 ").concat(f," ").concat(h," ").concat(l.join(" ")),o>=a&&(s+="Z"),this.addPath(s)}}},{key:"arcTo",value:function(t,e,n,r,o,i,a){this[Se]=null,this[we].push(["A",t,e,n,r,o,i,a])}},{key:"moveTo",value:function(t,e){this[Se]=null,this[we].push(["M",t,e])}},{key:"lineTo",value:function(t,e){this[Se]=null,this[we].push(["L",t,e])}},{key:"bezierCurveTo",value:function(t,e,n,r,o,i){this[Se]=null,this[we].push(["C",t,e,n,r,o,i])}},{key:"quadraticCurveTo",value:function(t,e,n,r){this[Se]=null,this[we].push(["Q",t,e,n,r])}},{key:"rect",value:function(t,e,n,r){var o="M".concat(t," ").concat(e,"L").concat(t+n," ").concat(e,"L").concat(t+n," ").concat(e+r,"L").concat(t," ").concat(e+r,"Z");this.addPath(o)}},{key:"closePath",value:function(){this[Se]=null,this[we].push("Z")}},{key:"contours",get:function(){var t=null;if(!this[Se]&&this[we]){var e=function(t){for(var e,n=[],r=0,i=0,a=0,s=0,u=null,c=null,l=0,f=0,h=0,d=t.length;h<d;h++){var v=t[h],p=v[0];switch(p){case"M":a=v[1],s=v[2];break;case"A":var g=be(l,f,v[6],v[7],v[4],v[5],v[1],v[2],v[3]);if(!g.length)continue;g=g.map(function(t){var e=o()(t,8);return e[0],e[1],{x1:e[2],y1:e[3],x2:e[4],y2:e[5],x:e[6],y:e[7]}});for(var m,y=0;y<g.length;y++)v=["C",(m=g[y]).x1,m.y1,m.x2,m.y2,m.x,m.y],y<g.length-1&&n.push(v);break;case"S":var x=l,b=f;"C"!=e&&"S"!=e||(x+=x-r,b+=b-i),v=["C",x,b,v[1],v[2],v[3],v[4]];break;case"T":"Q"==e||"T"==e?(u=2*l-u,c=2*f-c):(u=l,c=f),v=_e(l,f,u,c,v[1],v[2]);break;case"Q":u=v[1],c=v[2],v=_e(l,f,v[1],v[2],v[3],v[4]);break;case"L":v=Me(l,f,v[1],v[2]);break;case"H":v=Me(l,f,v[1],f);break;case"V":v=Me(l,f,l,v[1]);break;case"Z":v=Me(l,f,a,s)}e=p,l=v[v.length-2],f=v[v.length-1],v.length>4?(r=v[v.length-4],i=v[v.length-3]):(r=l,i=f),n.push(v)}return n}(ge()(this[we]));this[Se]=Ot()(e,this[Ce],this[Ee]),this[Se].path=e,this[Se].simplify=this[Ee],this[Se].scale=this[Ce]}return this[Se]&&((t=this[Se].map(function(t){return a()(t)})).path=this[Se].path,t.simplify=this[Se].simplify,t.scale=this[Se].scale),t}},{key:"path",get:function(){return this[we]}},{key:"simplify",get:function(){return this[Ee]}},{key:"boundingBox",get:function(){var t=this.contours;if(t){var e=t.reduce(function(t,e){return[].concat(a()(t),a()(e))});return z()(e)}return null}}]),t}();function ke(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function Te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ke(n,!0).forEach(function(e){v()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ke(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n(0).glMatrix.setMatrixArrayType(Array);var Le=Symbol("mesh"),Ae=Symbol("count"),Re=Symbol("transform"),De=Symbol("transform"),Ie=Symbol("color"),Fe=Symbol("color"),Ue=Symbol("color"),Pe=Symbol("color"),qe=Symbol("color"),Ge=Symbol("blend"),Ne=Symbol("filter"),Be=Symbol("textures"),je=Symbol("frameIndex"),Ve=Symbol("fillColor"),He=Symbol("strokeColor"),ze=Symbol("cloudColor"),We=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u()(this,t),this[Ae]=n,this[Le]=e,this[Re]=[],this[De]=[],this[Ie]=[],this[Fe]=[],this[Ue]=[],this[Pe]=[],this[qe]=[],this[Be]=[],this[je]=[],this[Ne]=[],this[Ve]=[],this[He]=[],this[ze]=!1,this[Ge]=!1;for(var r=e.width,o=e.height,i=0;i<n;i++)this[Re].push([1,0,0,r]),this[De].push([1,0,0,o]),this[je].push([-1]),this[Ne].push([]),this[Ve].push([0,0,0,0]),this[He].push([0,0,0,0]),this.setColorTransform(i,null)}return l()(t,[{key:"getFilter",value:function(t){return this[Ne][t].join(" ")}},{key:"setColorTransform",value:function(t,e){if(null!=e){if(t>=this[Ae]||t<0)throw new Error("Out of range.");this[Ie][t]=[e[0],e[5],e[10],e[15]],this[Fe][t]=[e[1],e[6],e[11],e[16]],this[Ue][t]=[e[2],e[7],e[12],e[17]],this[Pe][t]=[e[3],e[8],e[13],e[18]],this[qe][t]=[e[4],e[9],e[14],e[19]],this[Ge]=this[Ge]||e[18]<1,this[Le].setUniforms({u_cloudFilterFlag:1})}else this[Ie][t]=[1,0,0,0],this[Fe][t]=[0,1,0,0],this[Ue][t]=[0,0,1,0],this[Pe][t]=[0,0,0,1],this[qe][t]=[0,0,0,0],this[Le].setUniforms({u_cloudFilterFlag:0});return this}},{key:"getColorTransform",value:function(t){if(t>=this[Ae]||t<0)throw new Error("Out of range.");return[this[Ie][t][0],this[Fe][t][0],this[Ue][t][0],this[Pe][t][0],this[qe][t][0],this[Ie][t][1],this[Fe][t][1],this[Ue][t][1],this[Pe][t][1],this[qe][t][1],this[Ie][t][2],this[Fe][t][2],this[Ue][t][2],this[Pe][t][2],this[qe][t][2],this[Ie][t][3],this[Fe][t][3],this[Ue][t][3],this[Pe][t][3],this[qe][t][3]]}},{key:"transformColor",value:function(t,e){var n=this.getColorTransform(t);return n=ft(n,e),this.setColorTransform(t,n),this}},{key:"setFillColor",value:function(t,e){"string"==typeof e&&(e=Lt(e)),e[3]>0&&(this[ze]=!0),this[Ve][t]=e.map(function(t){return Math.round(255*t)})}},{key:"setStrokeColor",value:function(t,e){"string"==typeof e&&(e=Lt(e)),e[3]>0&&(this[ze]=!0),this[He][t]=e.map(function(t){return Math.round(255*t)})}},{key:"getCloudRGBA",value:function(t){var e=a()(this[Ve][t]),n=a()(this[He][t]);return e[3]/=255,n[3]/=255,{fill:"rgba(".concat(e.join(),")"),stroke:"rgba(".concat(n.join(),")")}}},{key:"grayscale",value:function(t,e){this.transformColor(t,ht(e)),this[Ne][t].push("grayscale(".concat(100*e,"%)"))}},{key:"brightness",value:function(t,e){this.transformColor(t,dt(e)),this[Ne][t].push("brightness(".concat(100*e,"%)"))}},{key:"saturate",value:function(t,e){this.transformColor(t,vt(e)),this[Ne][t].push("saturate(".concat(100*e,"%)"))}},{key:"contrast",value:function(t,e){this.transformColor(t,pt(e)),this[Ne][t].push("contrast(".concat(100*e,"%)"))}},{key:"invert",value:function(t,e){this.transformColor(t,gt(e)),this[Ne][t].push("invert(".concat(100*e,"%)"))}},{key:"sepia",value:function(t,e){this.transformColor(t,mt(e)),this[Ne][t].push("sepia(".concat(100*e,"%)"))}},{key:"opacity",value:function(t,e){this.transformColor(t,yt(e)),this[Ne][t].push("opacity(".concat(100*e,"%)"))}},{key:"hueRotate",value:function(t,e){this.transformColor(t,xt(e)),this[Ne][t].push("hue-rotate(".concat(e,"deg)"))}},{key:"setTransform",value:function(t,e){if(t>=this[Ae]||t<0)throw new Error("Out of range.");return this[Re][t][0]=e[0],this[Re][t][1]=e[1],this[Re][t][2]=e[2],this[De][t][0]=e[3],this[De][t][1]=e[4],this[De][t][2]=e[5],this}},{key:"getTransform",value:function(t){if(t>=this[Ae]||t<0)throw new Error("Out of range.");return[].concat(a()(this[Re][t].slice(0,3)),a()(this[De][t].slice(0,3)))}},{key:"getTextureFrame",value:function(t){return this[Be][this[je][t]]}},{key:"setTextureFrames",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.length>12)throw new Error("Max frames exceed. Allow 12 frames.");if(t.length){var n=this[Le];n.setTexture(t[0],e)}this[Be]=t}},{key:"setFrameIndex",value:function(t,e){if(t>=this[Ae]||t<0)throw new Error("Out of range.");var n=this[Be].length;if(n<=0)throw new Error("No frames");this[je][t]=e%n}},{key:"transform",value:function(t,e){var n=this.getTransform(t);return e=L.mat2d.multiply(Array.of(0,0,0,0,0,0),e,n),this.setTransform(t,e),this}},{key:"translate",value:function(t,e){var n=o()(e,2),r=n[0],i=n[1],a=L.mat2d.create();return a=L.mat2d.translate(Array.of(0,0,0,0,0,0),a,[r,i]),this.transform(t,a)}},{key:"rotate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=o()(n,2),i=r[0],a=r[1],s=L.mat2d.create();return s=L.mat2d.translate(Array.of(0,0,0,0,0,0),s,[i,a]),s=L.mat2d.rotate(Array.of(0,0,0,0,0,0),s,e),s=L.mat2d.translate(Array.of(0,0,0,0,0,0),s,[-i,-a]),this.transform(t,s)}},{key:"scale",value:function(t,e){var n=o()(e,2),r=n[0],i=n[1],a=void 0===i?r:i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],u=o()(s,2),c=u[0],l=u[1],f=L.mat2d.create();return f=L.mat2d.translate(Array.of(0,0,0,0,0,0),f,[c,l]),f=L.mat2d.scale(Array.of(0,0,0,0,0,0),f,[r,a]),f=L.mat2d.translate(Array.of(0,0,0,0,0,0),f,[-c,-l]),this.transform(t,f)}},{key:"skew",value:function(t,e){var n=o()(e,2),r=n[0],i=n[1],a=void 0===i?r:i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],u=o()(s,2),c=u[0],l=u[1],f=L.mat2d.create();return f=L.mat2d.translate(Array.of(0,0,0,0,0,0),f,[c,l]),f=L.mat2d.multiply(Array.of(0,0,0,0,0,0),f,L.mat2d.fromValues(1,Math.tan(a),Math.tan(r),1,0,0)),f=L.mat2d.translate(Array.of(0,0,0,0,0,0),f,[-c,-l]),this.transform(t,f)}},{key:"isPointCollision",value:function(t,e){var n,r=o()(e,2),i=r[0],s=r[1],u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"both",c=this.getTransform(t),l=Object(lt.c)([i,s],L.mat2d.invert(Array.of(0,0,0,0,0,0),c));return(n=this[Le]).isPointCollision.apply(n,a()(l).concat([u]))}},{key:"isPointInPath",value:function(t,e){var n=o()(e,2),r=n[0],i=n[1];return this.isPointCollision(t,[r,i],"fill")}},{key:"isPointInStroke",value:function(t,e){var n=o()(e,2),r=n[0],i=n[1];return this.isPointCollision(t,[r,i],"stroke")}},{key:"mesh",get:function(){return this[Le]}},{key:"hasCloudColor",get:function(){return this[ze]}},{key:"hasCloudFilter",get:function(){return!!this[Le].uniforms.u_cloudFilterFlag}},{key:"enableBlend",get:function(){return this[Le].enableBlend||this[Ge]}},{key:"amount",get:function(){return this[Ae]}},{key:"meshData",get:function(){var t=this[Le].meshData,e=t.attributes,n=t.cells,r=t.positions,o=t.textureCoord,i=t.uniforms,a=this[Be],s={attributes:Te({},e),cells:n,positions:r,textureCoord:o,uniforms:Te({},i),instanceCount:this[Ae],enableBlend:this.enableBlend};return a.length&&a.forEach(function(t,e){s.uniforms["u_texFrame".concat(e)]=t}),s.attributes.a_frameIndex={data:this[je],divisor:1},s.attributes.a_transform0={data:this[Re],divisor:1},s.attributes.a_transform1={data:this[De],divisor:1},s.attributes.a_colorCloud0={data:this[Ie],divisor:1},s.attributes.a_colorCloud1={data:this[Fe],divisor:1},s.attributes.a_colorCloud2={data:this[Ue],divisor:1},s.attributes.a_colorCloud3={data:this[Pe],divisor:1},s.attributes.a_colorCloud4={data:this[qe],divisor:1},s.attributes.a_fillCloudColor={data:this[Ve],divisor:1},s.attributes.a_strokeCloudColor={data:this[He],divisor:1},s}}]),t}();n.d(e,"Renderer",function(){return he}),n.d(e,"Figure2D",function(){return Oe}),n.d(e,"Mesh2D",function(){return Qt}),n.d(e,"MeshCloud",function(){return We}),n(0).glMatrix.setMatrixArrayType(Array)}])});